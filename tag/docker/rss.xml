<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>命运转轮 • Posts by &#34;docker&#34; tag</title>
        <link>https://arachnid.cc</link>
        <description>不曾亏欠, 不曾辜负, 如此足矣</description>
        <language>zh-CN</language>
        <pubDate>Wed, 18 Jun 2025 22:11:18 +0800</pubDate>
        <lastBuildDate>Wed, 18 Jun 2025 22:11:18 +0800</lastBuildDate>
        <category>EDA</category>
        <category>history</category>
        <category>电子</category>
        <category>硬件设计</category>
        <category>C</category>
        <category>MCU</category>
        <category>Ubuntu</category>
        <category>git</category>
        <category>工具</category>
        <category>hexo</category>
        <category>gcc</category>
        <category>IDE</category>
        <category>SQL</category>
        <category>JSON</category>
        <category>Linux</category>
        <category>linux_c</category>
        <category>arm_linux</category>
        <category>imx6ull</category>
        <category>docker</category>
        <category>nas</category>
        <category>RTOS</category>
        <category>FreeRTOS</category>
        <category>算法</category>
        <category>DMX512</category>
        <category>modbus</category>
        <category>Modem</category>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-paperless/</guid>
            <title>docker 部署之 paperless-ngx 文档归类</title>
            <link>https://arachnid.cc/docker-deployment-of-paperless/</link>
            <category>docker</category>
            <pubDate>Wed, 18 Jun 2025 22:11:18 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/paperless-ngx/paperless-ngx/tree/v2.16.3&#34;&gt;&lt;strong&gt;Paperless-ngx&lt;/strong&gt;&lt;/a&gt; 2.16.3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174546690.png&#34; alt=&#34;paperless-ngx login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;Paperless-ngx 是一个基于 &lt;strong&gt;Django&lt;/strong&gt; 框架的开源文档管理系统。与传统的扫描仪相比，它不仅可以将纸质文件数字化，还支持 &lt;strong&gt;OCR（光学字符识别）&lt;/strong&gt;，将文档内容识别为可搜索的文本。&lt;/p&gt;
&lt;p&gt;其核心功能包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;文档的组织与索引&lt;/strong&gt;：通过标签、对应者、类型等多种方式组织扫描文档。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OCR 文本识别&lt;/strong&gt;：对文档进行光学字符识别，使包含图像的扫描文档也能搜索和选择文本。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多语言支持&lt;/strong&gt;：利用开源的 Tesseract 引擎，支持 100 多种语言。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;长期存储格式&lt;/strong&gt;：文档以 PDF/A 格式保存，设计用于长期存储。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;智能标签与分类&lt;/strong&gt;：使用机器学习自动添加标签、对应者和文档类型。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;广泛的文件支持&lt;/strong&gt;：支持 PDF 文档、图像、纯文本文件、Office 文档等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;定制化的文件管理&lt;/strong&gt;：Paperless-ngx 管理文件名和文件夹，支持不同的配置。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;现代化的网页应用&lt;/strong&gt;：定制仪表板、过滤器、批量编辑、拖放上传、自定义视图、共享链接等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;全文搜索&lt;/strong&gt;：自动完成、相关性排序、高亮显示匹配查询的部分。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;电子邮件处理&lt;/strong&gt;：从电子邮件账户导入文档，配置多个账户和规则。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多用户权限系统&lt;/strong&gt;：内置健壮的多用户权限系统。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多核系统优化&lt;/strong&gt;：并行处理多个文档。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tLw==&#34;&gt;https://docs.paperless-ngx.com/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174656418.png&#34; alt=&#34;paperless-ngx&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;创建 paperless-ngx 数据文件夹及文档归类存放位置：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的文档归类存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/paperless-ngx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/export /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/consume /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/data /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/media&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;进入到  &lt;code&gt;/app/paperless-ngx&lt;/code&gt;  文件夹后，依次创建如下配置所需文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/paperless-ngx] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; redisdata dbdata&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加  &lt;code&gt;docker-compose.yml&lt;/code&gt;  配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/paperless-ngx] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;touch&lt;/span&gt; docker-compose.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;span&gt;docker-compose.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# docker compose file for running paperless from the Docker Hub.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This file contains everything paperless needs to run.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Paperless supports amd64, arm and arm64 hardware.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# All compose files of paperless configure paperless in the following way:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Paperless is (re)started on system boot, if it was running before shutdown.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Docker volumes for storing data are managed by Docker.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Folders for importing and exporting files are created in the same directory&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#   as this file and mounted to the correct folders inside the container.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Paperless listens on port 8000.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# In addition to that, this Docker Compose file adds the following optional&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# configurations:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Instead of SQLite (default), MariaDB is used as the database server.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Apache Tika and Gotenberg servers are started with paperless and paperless&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#   is configured to use these services. These provide support for consuming&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#   Office documents (Word, Excel, Power Point and their LibreOffice counter-&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#   parts.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# To install and update paperless with this file, do the following:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Copy this file as &#39;docker-compose.yml&#39; and the files &#39;docker-compose.env&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#   and &#39;.env&#39; into a folder.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Run &#39;docker compose pull&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# - Run &#39;docker compose up -d&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# For more extensive installation and update instructions, refer to the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# documentation.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;3.4&#34;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 指定使用的 Docker Compose 文件版本&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;broker&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;37&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; library/redis&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;38&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;broker&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;39&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;broker&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;40&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; unless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;stopped&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;41&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;42&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /home/.app/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx/redisdata&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/data&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;43&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;44&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;45&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; library/mariadb&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;lts&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;46&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;mariadb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;47&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;mariadb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;48&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; unless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;stopped&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;49&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;50&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /home/.app/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx/dbdata&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/var/lib/mysql&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;51&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;52&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_HOST&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;53&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_DATABASE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;54&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_USER&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;55&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_PASSWORD&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;56&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;57&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;58&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;webserver&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;59&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperlessngx/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;60&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;61&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;62&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; unless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;stopped&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;63&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;depends_on&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;64&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; db&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;65&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; broker&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;66&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; gotenberg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;67&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; tika&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;68&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;69&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;28030:8000&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;70&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;healthcheck&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 定义健康检查&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;71&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;CMD&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;curl&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;-fs&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;-S&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;--max-time&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;2&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;http://localhost:8000&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 使用 curl 命令检查容器内的服务是否健康&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;72&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 30s  &lt;span class=&#34;token comment&#34;&gt;# 每 30 秒检查一次&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;73&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 10s  &lt;span class=&#34;token comment&#34;&gt;# 超时时间为 10 秒&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;74&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;retries&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 连续失败 5 次后认为服务不健康&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;75&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# 如果不太懂下面路径映射具体作用，可看先下面详细的参数说明&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;76&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /srv/dev&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;disk&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;by&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;uuid&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;c2850abb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;0f0a&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;4770&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;8408&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;f4d5f0987175/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx/data&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/usr/src/paperless/data    &lt;span class=&#34;token comment&#34;&gt;# 挂载数据 (检索的索引，源码数据库、分类模型等等) 目录，即 PAPERLESS_DATA_DIR 字段&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;77&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /srv/dev&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;disk&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;by&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;uuid&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;c2850abb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;0f0a&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;4770&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;8408&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;f4d5f0987175/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx/media&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/usr/src/paperless/media  &lt;span class=&#34;token comment&#34;&gt;# 挂载存储文档及缩略图目录，即 PAPERLESS_MEDIA_ROOT 字段&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;78&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /srv/dev&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;disk&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;by&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;uuid&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;c2850abb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;0f0a&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;4770&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;8408&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;f4d5f0987175/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx/export&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/usr/src/paperless/export  &lt;span class=&#34;token comment&#34;&gt;# 挂载导出目录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;79&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /srv/dev&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;disk&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;by&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;uuid&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;c2850abb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;0f0a&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;4770&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;8408&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;f4d5f0987175/paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;ngx/import&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/usr/src/paperless/consume  &lt;span class=&#34;token comment&#34;&gt;# 挂载加载导入目录，即 PAPERLESS_CONSUMPTION_DIR 字段&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;80&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;env_file&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; docker&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;compose.env&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;81&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;82&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_REDIS&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; redis&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;//broker&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;6379&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 配置 Redis 连接信息&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;83&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_DBENGINE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; mariadb  &lt;span class=&#34;token comment&#34;&gt;# 选择 mariadb 数据库&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;84&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_DBHOST&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; db  &lt;span class=&#34;token comment&#34;&gt;# 配置数据库主机地址&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;85&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_DBUSER&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless &lt;span class=&#34;token comment&#34;&gt;# only needed if non-default username&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;86&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_DBPASS&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless &lt;span class=&#34;token comment&#34;&gt;# only needed if non-default password&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;87&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_DBPORT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;3306&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;88&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_TIKA_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;89&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_TIKA_GOTENBERG_ENDPOINT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; http&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;//gotenberg&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;3000&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 配置 Gotenberg 服务的地址&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;90&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PAPERLESS_TIKA_ENDPOINT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; http&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;//tika&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;9998&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 配置 Tika 服务的地址&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;91&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;dns&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;# 定义 DNS 服务器&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;92&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; 8.8.8.8  &lt;span class=&#34;token comment&#34;&gt;# 使用 Google 的 DNS 服务器&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;93&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; 114.114.114.114  &lt;span class=&#34;token comment&#34;&gt;# 使用中国运营的 DNS 服务器&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;94&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;95&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;gotenberg&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;96&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; gotenberg/gotenberg&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;97&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;gotenberg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;98&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;gotenberg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;99&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; unless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;stopped&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;100&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;# The gotenberg chromium route is used to convert .eml files. We do not&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;101&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;# want to allow external content like tracking pixels or even javascript.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;102&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;103&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;gotenberg&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;104&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;--chromium-disable-javascript=true&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;105&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;--chromium-allow-list=file:///tmp/.*&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;106&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;107&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;tika&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;108&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; apache/tika&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;109&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;tika&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;110&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; paperless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;tika&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;111&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; unless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;stopped&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;112&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;113&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;114&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;115&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;media&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;116&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;dbdata&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;117&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  redisdata&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;根据配置，同样单独添加环境变量文件  &lt;code&gt;docker-compose.env&lt;/code&gt;  ：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/paperless-ngx] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;touch&lt;/span&gt; docker-compose.env&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-test&#34;&gt;###############################################################################
# Paperless-ngx settings                                                      #
###############################################################################

# See http://docs.paperless-ngx.com/configuration/ for all available options.

# The UID and GID of the user used to run paperless in the container. Set this
# to your UID and GID on the host so that you have write access to the
# consumption directory.
USERMAP_UID=0
USERMAP_GID=0

# See the documentation linked above for all options. A few commonly adjusted settings
# are provided below.

# This is required if you will be exposing Paperless-ngx on a public domain
# (if doing so please consider security measures such as reverse proxy)
#PAPERLESS_URL=https://paperless.example.com

# Adjust this key if you plan to make paperless available publicly. It should
# be a very long sequence of random characters. You don&#39;t need to remember it.
PAPERLESS_SECRET_KEY=change-me

# Use this variable to set a timezone for the Paperless Docker containers. Defaults to UTC.
PAPERLESS_TIME_ZONE=Asia/Shanghai

# The default language to use for OCR. Set this to the language most of your
# documents are written in.
PAPERLESS_OCR_LANGUAGE=eng

# Additional languages to install for text recognition, separated by a whitespace.
# Note that this is different from PAPERLESS_OCR_LANGUAGE (default=eng), which defines
# the language used for OCR.
# The container installs English, German, Italian, Spanish and French by default.
# See https://packages.debian.org/search?keywords=tesseract-ocr-&amp;amp;searchon=names&amp;amp;suite=buster
# for available languages.
PAPERLESS_OCR_LANGUAGES=chi-sim chi-tra

# Changes the filenames paperless uses to store documents in the media directory. See File name handling for details.
# Default is none, which disables this feature.
PAPERLESS_FILENAME_FORMAT=other/&amp;#123;&amp;#123; original_name &amp;#125;&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改完成后，使用以下命令进行部署：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/paperless-ngx] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker-compose&lt;/span&gt; up &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;主要参数说明&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#主要参数说明&#34;&gt;#&lt;/a&gt; 主要参数说明&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;关于映射路径：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在  &lt;code&gt;docker-compose.yml&lt;/code&gt;  文件的  &lt;code&gt;webserver&lt;/code&gt;  服务配置中，存在四个路径的映射，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/usr/src/paperless/data&lt;/code&gt;  ：即  &lt;code&gt;PAPERLESS_DATA_DIR&lt;/code&gt;  字段，用于存放数据 (检索的索引，源码数据库、分类模型等等)，如果使用默认的  &lt;code&gt;PAPERLESS_LOGGING_DIR&lt;/code&gt;  字段，那么 log 文件也将  &lt;code&gt;PAPERLESS_DATA_DIR/log/&lt;/code&gt;  路径下存储。具体说明可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2NvbmZpZ3VyYXRpb24vI1BBUEVSTEVTU19EQVRBX0RJUg==&#34;&gt;https://docs.paperless-ngx.com/configuration/#PAPERLESS_DATA_DIR&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/usr/src/paperless/media&lt;/code&gt;  ：即  &lt;code&gt;PAPERLESS_MEDIA_ROOT&lt;/code&gt;  字段，用于存储上传后的文档及提取的缩略文件，后期在面板上的  &lt;code&gt;保存路径&lt;/code&gt;  也是此路径为根目录。具体说明可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2NvbmZpZ3VyYXRpb24vI1BBUEVSTEVTU19NRURJQV9ST09U&#34;&gt;https://docs.paperless-ngx.com/configuration/#PAPERLESS_MEDIA_ROOT&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/usr/src/paperless/export&lt;/code&gt;  ：如其名，该目录一般用于导出现有的文档所指向的存储路径，可以使用  &lt;code&gt;document_exporter&lt;/code&gt;  命令执行。具体说明可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2FkbWluaXN0cmF0aW9uLyNleHBvcnRlcg==&#34;&gt;https://docs.paperless-ngx.com/administration/#exporter&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/usr/src/paperless/consume&lt;/code&gt;  ：即  &lt;code&gt;PAPERLESS_CONSUMPTION_DIR&lt;/code&gt;  字段，用于批量加载导入现有的文档，如果你有大量的需要上传分析的文档，只需把这些文档统统放到目录下即可自动帮你处理归档，值得注意的是该目录下不能解析子目录，只处理当前的一级目录，并不会递归处理底下的子目录。具体说明可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2NvbmZpZ3VyYXRpb24vI1BBUEVSTEVTU19DT05TVU1QVElPTl9ESVI=&#34;&gt;https://docs.paperless-ngx.com/configuration/#PAPERLESS_CONSUMPTION_DIR&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;关于环境变量：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;PAPERLESS_OCR_LANGUAGE&lt;/code&gt;  ：该字段是用于设置文档在解析的时候所调用的 OCR 语言，默认是使用  &lt;code&gt;eng&lt;/code&gt;  ，一般来说这是一个使用 3 个字符的代码，所支持的语言可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90ZXNzZXJhY3Qtb2NyLmdpdGh1Yi5pby90ZXNzZG9jL0RhdGEtRmlsZXMtaW4tZGlmZmVyZW50LXZlcnNpb25zLmh0bWw=&#34;&gt;languages Tesseract supports&lt;/span&gt; ；当然它也可以是多语言，可以使用  &lt;code&gt;+&lt;/code&gt;  符号来组合，eg：  &lt;code&gt;deu+eng&lt;/code&gt;  ；值得注意的是，如果使用多语言组合，需要在 &lt;a href=&#34;https://docs.paperless-ngx.com/configuration/#PAPERLESS_OCR_LANGUAGES&#34;&gt; &lt;code&gt;PAPERLESS_OCR_LANGUAGES&lt;/code&gt; &lt;/a&gt; 字段中添加对应的语言，或者在部署后手动安装对应的语言，如何手动安装可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9vY3JteXBkZi5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvbGFuZ3VhZ2VzLmh0bWw=&#34;&gt;Installing additional language packs&lt;/span&gt;  。另外，若如果你的语言包含一个  &lt;code&gt;-&lt;/code&gt;  字符，如  &lt;code&gt;chi-sim&lt;/code&gt;  中文简体，你必须使用  &lt;code&gt;chi_sim&lt;/code&gt;  。具体说明可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2NvbmZpZ3VyYXRpb24vI1BBUEVSTEVTU19PQ1JfTEFOR1VBR0U=&#34;&gt;https://docs.paperless-ngx.com/configuration/#PAPERLESS_OCR_LANGUAGE&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PAPERLESS_OCR_LANGUAGES&lt;/code&gt;  ：用于安装其它的 OCR 语言。 默认情况下，无需安装的语言有英语、德语、意大利语、西班牙语和法语。 如果你需要的语言不在列表中，请使用此配置选项安装所需的语言。 你需要找到正确的 LangCodes，但需要注意的是，&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wYWNrYWdlcy5kZWJpYW4ub3JnL2J1bGxzZXllL2dyYXBoaWNzLw==&#34;&gt;tesseract-ocr-* package&lt;/span&gt; 中的名字并不总是与语言代码相对应，例如， &lt;code&gt;chi_tra&lt;/code&gt;  应指定为  &lt;code&gt;chi-tra&lt;/code&gt;  。而对于使用安装多个语言时，必须利用 space 分离 。具体说明可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2NvbmZpZ3VyYXRpb24vI1BBUEVSTEVTU19PQ1JfTEFOR1VBR0VT&#34;&gt;https://docs.paperless-ngx.com/configuration/#PAPERLESS_OCR_LANGUAGES&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PAPERLESS_FILENAME_FORMAT&lt;/code&gt;  ：该项用于调整你的文档存储结构及文件命名；如果你想以不同的方式命名并分类存储所上传的文档，那么你可以通过参数调整该属性，当然，你也可以后续通过面板设置的  &lt;code&gt;保存路径&lt;/code&gt;  中重新调整路径结构及命名方式。在这里的  &lt;code&gt;other/&amp;#123;&amp;#123; original_name &amp;#125;&amp;#125;&lt;/code&gt;  参数，拆解出来就是以  &lt;code&gt;原始命名的方式&lt;/code&gt;  存储在  &lt;code&gt;$PAPERLESS_MEDIA_ROOT/other/&lt;/code&gt;  路径下，eg： &lt;code&gt;PAPERLESS_MEDIA_ROOT&lt;/code&gt;  的映射路径为  &lt;code&gt;/mnt/sda1/documents/&lt;/code&gt;  上传一份名为  &lt;code&gt;paperless.pdf&lt;/code&gt;  的文件，那么它将存储为  &lt;code&gt;/mnt/sda1/documents/other/paperless.pdf&lt;/code&gt;  ；而对于官方默认的情况下，您最终会在媒体目录中得到  &lt;code&gt;/mnt/sda1/documents/0000123.pdf&lt;/code&gt;  之类的文件。嘛，具体详细的说明可以观看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2FkdmFuY2VkX3VzYWdlLyNmaWxlLW5hbWUtaGFuZGxpbmc=&#34;&gt;File name handling&lt;/span&gt; ，或者自己尝试验证，这里就不作过多的介绍了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;关于其它功能配置可以参看官方  &lt;code&gt;docker-compose&lt;/code&gt;  文件：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3BhcGVybGVzcy1uZ3gvcGFwZXJsZXNzLW5neC90cmVlL2Rldi9kb2NrZXIvY29tcG9zZQ==&#34;&gt;https://github.com/paperless-ngx/paperless-ngx/tree/dev/docker/compose&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;关于配置属性字段可以参看官方说明：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2NvbmZpZ3VyYXRpb24v&#34;&gt;https://docs.paperless-ngx.com/configuration/&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;进入 paperless-ngx 容器中的 shell 终端：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;exec&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-it&lt;/span&gt; paperless-ngx /bin/sh&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;输入下面的命令创建超级用户：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;# &#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;python3 manage.py createsuperuser&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;依次输入：&lt;br /&gt;
 &lt;code&gt;username&lt;/code&gt; &lt;br /&gt;
 &lt;code&gt;email&lt;/code&gt; &lt;br /&gt;
 &lt;code&gt;password&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;通过浏览器访问  &lt;code&gt;http://localhost:2430&lt;/code&gt;  ，输入刚才设置的账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250618232553494.png&#34; alt=&#34;image-20250618232553494&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;ocr-配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ocr-配置&#34;&gt;#&lt;/a&gt; OCR 配置&lt;/h2&gt;
&lt;p&gt;在  &lt;code&gt;配置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;OCR 设置&lt;/code&gt;  中调整为以下参数：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250620210917503.png&#34; alt=&#34;image-20250620210917503&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;路径管理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#路径管理&#34;&gt;#&lt;/a&gt; 路径管理&lt;/h2&gt;
&lt;p&gt;在面板上的  &lt;code&gt;保存路径&lt;/code&gt;  中，你可以创建不同的存储路径，该路径皆在  &lt;code&gt;PAPERLESS_MEDIA_ROOT&lt;/code&gt;  字段的路径下：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621101331594.png&#34; alt=&#34;image-20250621101331594&#34; /&gt;&lt;/p&gt;
&lt;p&gt;同样的，这些路径参数也支持 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLnBhcGVybGVzcy1uZ3guY29tL2FkdmFuY2VkX3VzYWdlLyNmaWxlbmFtZS1mb3JtYXQtdmFyaWFibGVz&#34;&gt;Placeholders&lt;/span&gt; 的属性参数：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621160921382.png&#34; alt=&#34;image-20250621160921382&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;匹配算法&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#匹配算法&#34;&gt;#&lt;/a&gt; 匹配算法&lt;/h2&gt;
&lt;p&gt;在  &lt;code&gt;联系人&lt;/code&gt;  、 &lt;code&gt;标签&lt;/code&gt;  、 &lt;code&gt;保存路径&lt;/code&gt;  等管理中，存在匹配算法这一选项，这是用来自动归类，添加到所属联系人、赋予对应的标签或存到指定路径下：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621162127589.png&#34; alt=&#34;image-20250621162127589&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;关于 App 客户端，可以使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2FzdHViZW5ib3JkL3BhcGVybGVzcy1tb2JpbGU=&#34;&gt;Paperless Mobile&lt;/span&gt; 软件：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814203639468.png&#34; alt=&#34;image-20250814203639468&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814203646699.png&#34; alt=&#34;image-20250814203646699&#34; /&gt;&lt;/p&gt;
&lt;p&gt;主要功能都有，唯一遗憾就是目前还不支持中文，不过英文基本也能看懂，问题不大。&lt;/p&gt;
&lt;p&gt;功能特点：&lt;/p&gt;
&lt;p&gt;✔️一目了然地查看文档&lt;/p&gt;
&lt;p&gt;✔️添加，删除或编辑文档&lt;/p&gt;
&lt;p&gt;✔️共享、下载和预览文件&lt;/p&gt;
&lt;p&gt;✔️管理和分配标签&lt;/p&gt;
&lt;p&gt;✔️扫描并上传文件到无纸化&lt;/p&gt;
&lt;p&gt;✔️通过无纸化移动上传其他应用程序中的现有文档&lt;/p&gt;
&lt;p&gt;✔️在专用收件箱中轻松处理和管理新文档&lt;/p&gt;
&lt;p&gt;✔️使用广泛的过滤条件搜索文档&lt;/p&gt;
&lt;p&gt;✔️使用生物特征因子保护您的数据&lt;/p&gt;
&lt;p&gt;✔️支持 TLS 互认证（客户端证书）&lt;/p&gt;
&lt;p&gt;✔️现代，直观的 UI 根据材料设计 3 规范构建&lt;/p&gt;
&lt;p&gt;✔️提供英语，德语，波兰语，法语，加泰罗尼亚语，捷克语和土耳其语，并将提供更多&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-v2raya/</guid>
            <title>docker 部署之 v2raya 科学上网</title>
            <link>https://arachnid.cc/docker-deployment-of-v2raya/</link>
            <category>docker</category>
            <pubDate>Wed, 02 Apr 2025 19:34:32 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/v2rayA/v2rayA/releases/tag/v2.2.6.7&#34;&gt;&lt;strong&gt;v2rayA&lt;/strong&gt;&lt;/a&gt; 2.2.6.7&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621175032528.png&#34; alt=&#34;v2raya login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;v2raya 是一个使用 Web UI 来配置 v2ray 的服务，方便好用，特别适合没有图形界面的 linux server 系统。&lt;/p&gt;
&lt;p&gt;主要功能：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自动定时从机场订阅地址中获取更新配置&lt;/li&gt;
&lt;li&gt;提供透明代理，系统代理，代理端口&lt;/li&gt;
&lt;li&gt;提供路由服务，自动更新 GFWList&lt;/li&gt;
&lt;li&gt;可视化的配置页面&lt;/li&gt;
&lt;li&gt;几乎所有机场都能支持，完美替代 clash 功能&lt;/li&gt;
&lt;li&gt;支持多节点负载均衡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;项目地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3YycmF5QS92MnJheUE=&#34;&gt;https://github.com/v2rayA/v2rayA&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621175400593.png&#34; alt=&#34;v2raya&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;为你的 v2raya 存放创建数据和配置文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/v2raya&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull mzz2017/v2raya:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt; v2raya &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--privileged&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--net&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;host &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;V2RAYA_LOG_FILE&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/tmp/v2raya.log &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;V2RAYA_V2RAY_BIN&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/usr/local/bin/v2ray &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;V2RAYA_NFTABLES_SUPPORT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;off &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;IPTABLES_MODE&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;legacy &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;V2RAYA_ADDRESS&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0:2017 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# 监听端口为 2017&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /lib/modules:/lib/modules:ro &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /etc/resolv.conf:/etc/resolv.conf &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/v2raya:/etc/v2raya &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  mzz2017/v2raya&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;成功运行后，默认的端口为：2017。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;通过访问  &lt;code&gt;http://localhost:2017&lt;/code&gt;  ，初始登录建立管理账号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615093908346.png&#34; alt=&#34;image-20250615093908346&#34; /&gt;&lt;/p&gt;
&lt;p&gt;进入后，现在配置里配置好再添加你的订阅地址，一般按如下配置即可：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615094349529.png&#34; alt=&#34;image-20250615094349529&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;gfwlist-模式&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#gfwlist-模式&#34;&gt;#&lt;/a&gt; GFWList 模式&lt;/h2&gt;
&lt;p&gt;如果要使用  &lt;code&gt;GFWList 模式&lt;/code&gt;  ，记得更新到最新的资源。&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816231852555.png&#34; alt=&#34;image-20250816231852555&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;大陆白名单模式&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#大陆白名单模式&#34;&gt;#&lt;/a&gt; 大陆白名单模式&lt;/h2&gt;
&lt;p&gt;如果是用大陆白名单模式，可以通过更新  &lt;code&gt;geosite.dat&lt;/code&gt;  和  &lt;code&gt;geoip.dat&lt;/code&gt;  文件来适应新的规则，这俩文件的存放路径（定义为  &lt;code&gt;/run/user/&amp;#123;uid&amp;#125;/v2raya&lt;/code&gt; ，一般 root 用户的 uid 为 0）可进终端后台查看：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615102136530.png&#34; alt=&#34;image-20250615102136530&#34; /&gt;&lt;/p&gt;
&lt;p&gt;由于在 v2raya 中没有找到自动更新这俩文件的入口（估计是跟随版本的），所以可以单独写个脚本自动更新（注意：是在 docker 容器里），更新来源可以参看项目：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0xveWFsc29sZGllci92MnJheS1ydWxlcy1kYXQ=&#34;&gt;https://github.com/Loyalsoldier/v2ray-rules-dat&lt;/span&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-jellyfin/</guid>
            <title>docker 部署之 jellyfin 家庭影院</title>
            <link>https://arachnid.cc/docker-deployment-of-jellyfin/</link>
            <category>docker</category>
            <category>nas</category>
            <pubDate>Wed, 19 Mar 2025 19:11:35 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/paperless-ngx/paperless-ngx/tree/v2.16.3&#34;&gt;&lt;strong&gt;Paperless-ngx&lt;/strong&gt;&lt;/a&gt; 10.10.6&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814212532995.png&#34; alt=&#34;image-20250814212532995&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;目前市面上比较主流的家庭媒体服务器的选择主要有三个：Plex、Emby 和 Jellyfin；其中前两款对于基本使用免费，但对于像通过显卡硬件解码等功能是需付费订阅才能使用；而 Jellyfin 是 Emby 某个版本开源后独立出来的一个影音服务软件，是完全开源和免费的。Jellyfin 在一些大佬改装配置好驱动后能适应不同的显卡硬转，以此达到在外网播放的情况下使用硬件转码流畅播放。&lt;/p&gt;
&lt;p&gt;官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9qZWxseWZpbi5vcmcv&#34;&gt;https://jellyfin.org/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814210117624.png&#34; alt=&#34;image-20250814210117624&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;为你的 jellyfin 存放创建缓存和配置文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的影视存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/jellyfin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/jellyfin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; cache config&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/media&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;硬解支持&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#硬解支持&#34;&gt;#&lt;/a&gt; 硬解支持&lt;/h2&gt;
&lt;p&gt;要让 jellyfin 的 docker 容器调用核显驱动（即人们常说的开启硬解），要满足两个条件：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;拥有支持视频解码的核心显卡，且核心显卡的&lt;strong&gt;驱动程序&lt;/strong&gt;运行正常；&lt;/li&gt;
&lt;li&gt;将核显驱动&lt;strong&gt;直通&lt;/strong&gt;给 docker 容器，并赋予 docker 容器调用该驱动的权限。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;对于系统是否满足上述第一个条件，可以输入以下命令进行检验：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ls&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-l&lt;/span&gt; /dev/dri&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;total &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;drwxr-xr-x &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt; root root         &lt;span class=&#34;token number&#34;&gt;80&lt;/span&gt; Jun &lt;span class=&#34;token number&#34;&gt;20&lt;/span&gt; 02:04 by-path&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;crw-rw---- &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root video  &lt;span class=&#34;token number&#34;&gt;226&lt;/span&gt;,   &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; Jun &lt;span class=&#34;token number&#34;&gt;20&lt;/span&gt; 02:04 card0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;crw-rw---- &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root render &lt;span class=&#34;token number&#34;&gt;226&lt;/span&gt;, &lt;span class=&#34;token number&#34;&gt;128&lt;/span&gt; Jun &lt;span class=&#34;token number&#34;&gt;20&lt;/span&gt; 02:04 renderD128&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;终端返回的结果有  &lt;code&gt;renderD128&lt;/code&gt;  ，那么它即对应你的核显，硬件系统满足视频解码的基本条件。&lt;/p&gt;
&lt;p&gt;接下来为这个核显驱动授予 docker 容器的驱动权限；从上面可以看到  &lt;code&gt;crw-rw---- 1 root render  226&lt;/code&gt;  中， &lt;code&gt;root&lt;/code&gt;  为管理用户，  &lt;code&gt;render&lt;/code&gt;  为所在组，如果你不想麻烦可以在部署的时候直接赋予 root 权限，若是想分组或分用户管理，那就需要分别获取对应的用户 UID 或所属组 GID，通过如下命令获取（不同发行版请根据对应命令获取）：&lt;/p&gt;
&lt;p&gt;获取 UID：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# &amp;lt;GROUP&gt; 为查询的用户&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-u&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;USER_NAME&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;获取 GID：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# &amp;lt;GROUP&gt; 为查询的组名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;getent group &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;GROUP_NAME&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;cut&lt;/span&gt; -d: &lt;span class=&#34;token parameter variable&#34;&gt;-f3&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull nyanmisaka/jellyfin:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;jellyfin &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;PUID&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;PGID&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;8096&lt;/span&gt;:8096 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/jellyfin/config:/config &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/jellyfin/cache:/cache &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--mount&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;bind,source&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/srv/dev-disk-by-uuid-fb7da335-33b8-4fac-8bbe-24c4cd13ccf7/media,destination&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/media,ro&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;true &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--device&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/dev/dri/renderD128 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  nyanmisaka/jellyfin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：如果有需要用到不同的管理用户或管理组，那么在使用硬解的前提，需要获取对应 UID 和 GID 填写到部署上，否则后面使用硬解将会有问题，具体获取看上面。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;通过浏览器访问：  &lt;code&gt;http://localhost:8096&lt;/code&gt;  ，按照指示一步步初始化配置：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816144652927.png&#34; alt=&#34;image-20250816144652927&#34; /&gt;&lt;/p&gt;
&lt;p&gt;配置你的管理员账号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816144721170.png&#34; alt=&#34;image-20250816144721170&#34; /&gt;&lt;/p&gt;
&lt;p&gt;设置媒体读取路径，这里可以先跳过，后面进入控制台设置：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816144851150.png&#34; alt=&#34;image-20250816144851150&#34; /&gt;&lt;/p&gt;
&lt;p&gt;如需云端访问，可开启以下设置：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816145031703.png&#34; alt=&#34;image-20250816145031703&#34; /&gt;&lt;/p&gt;
&lt;p&gt;最后完成初始配置后，即可重新登录进入主界面：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816145114308.png&#34; alt=&#34;image-20250816145114308&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816145443332.png&#34; alt=&#34;image-20250816145443332&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;硬解配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#硬解配置&#34;&gt;#&lt;/a&gt; 硬解配置&lt;/h2&gt;
&lt;p&gt;点击左上角：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816094625543.png&#34; alt=&#34;image-20250816094625543&#34; /&gt;&lt;/p&gt;
&lt;p&gt;进入 &amp;quot;控制台&amp;quot; ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816094722765.png&#34; alt=&#34;image-20250816094722765&#34; /&gt;&lt;/p&gt;
&lt;p&gt;在 jellyfin 容器中的 shell 终端执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls /dev/dri
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;确认显卡直通，正常将会显示：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816105816703.png&#34; alt=&#34;image-20250816105816703&#34; /&gt;&lt;/p&gt;
&lt;p&gt;记录并配置解码器：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816095148702.png&#34; alt=&#34;image-20250816095148702&#34; /&gt;&lt;/p&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬件加速这里：下拉选择 &amp;quot;Video Acceleartion API (VAAP)&amp;quot; 或者 &amp;quot;Intel QuickSync (QSV)&amp;quot; ，不是太老的核 / 独显卡，建议选 QSV；&lt;/li&gt;
&lt;li&gt;如果播放失败，则可以尝试关闭 &amp;quot;启用低电压模式的 Intel H.264 硬件编码器&amp;quot; 和 &amp;quot;启用低电压模式的 Intel HEVC 硬件编码器&amp;quot; ;&lt;/li&gt;
&lt;li&gt;如需播放杜比视界，必须关闭 &amp;quot;启用 VPP 色调映射&amp;quot; ;&lt;/li&gt;
&lt;li&gt;如需支持杜比视界格式的 HDR 视频，则必须打开 &amp;quot;首选系统原生的 DXVA 或 VA-API 硬件解码器&amp;quot; ;&lt;/li&gt;
&lt;li&gt;最后根据实际情况选中 &amp;quot;允许实时提取字幕&amp;quot; 和 &amp;quot;限制转码速度&amp;quot; ；&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;测试转码：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816105231987.png&#34; alt=&#34;image-20250816105231987&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816103820476.png&#34; alt=&#34;image-20250816103820476&#34; /&gt;&lt;/p&gt;
&lt;p&gt;硬解码资源占用：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816104002038.png&#34; alt=&#34;image-20250816104002038&#34; /&gt;&lt;/p&gt;
&lt;p&gt;如果不使用硬解码，那么你将会看到 CPU 占用 95% 以上的使用率，并且对于低性能 CPU 来说，将会播放卡顿：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816104339045.png&#34; alt=&#34;image-20250816104339045&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;添加插件&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#添加插件&#34;&gt;#&lt;/a&gt; 添加插件&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;控制台&lt;/code&gt;  -&amp;gt;  &lt;code&gt;目录&lt;/code&gt;  -&amp;gt;  &lt;code&gt;存储库&lt;/code&gt;  -&amp;gt; 点击加号进行添加&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# Jellyfin Stable&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;http://fra1.mirror.jellyfin.org/releases/plugin/manifest-stable.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-metashark&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://github.com/cxfksword/jellyfin-plugin-metashark/releases/download/manifest/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-metatube&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://raw.githubusercontent.com/metatube-community/jellyfin-plugin-metatube/dist/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-bangumi&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://kookxiang.github.io/jellyfin-plugin-bangumi/repository.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-manifest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://raw.githubusercontent.com/danieladov/JellyfinPluginManifest/master/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugins-manifest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://www.iamparadox.dev/jellyfin/plugins/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果加载完以上插件后，可以按需安装相应插件，一般用以下插件足矣：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816110312936.png&#34; alt=&#34;image-20250816110312936&#34; /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;File Transformation 和 Media Bar 是用于配置主题的，也即前面看到的电影背景封面及简介显示的轮播滚动。&lt;/li&gt;
&lt;li&gt;SkinManager 同样也是配置主题，目前里面支持九个主题配置。&lt;/li&gt;
&lt;li&gt;Bangumi 主要用于动漫刮削及动漫信息同步。&lt;/li&gt;
&lt;li&gt;MetaShark 和 MetaTube 则是用于电影和 xxx 的信息刮削。&lt;/li&gt;
&lt;li&gt;其余的部分也是用于刮削及资源整理的，具体可测试使用。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;如果不想用网页端观看，而使用客户端，那么关于客户端应用可以在以下链接获取所需应用：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9qZWxseWZpbi5vcmcvZG93bmxvYWRz&#34;&gt;https://jellyfin.org/downloads&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在这里，你也可以使用第三方的客户端 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2phcm5lZGVtZXVsZW1lZXN0ZXIvZmluZHJvaWQ=&#34;&gt;Findroid&lt;/span&gt; ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816114435404.png&#34; alt=&#34;image-20250816114435404&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816114441878.png&#34; alt=&#34;image-20250816114441878&#34; /&gt;&lt;/p&gt;
&lt;p&gt;目前使用下来，有个致命缺陷，混合类型和音乐类型的合集是无法显示的，只能电影或电视剧。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-navidrome/</guid>
            <title>docker 部署之 navidrome 音乐播放</title>
            <link>https://arachnid.cc/docker-deployment-of-navidrome/</link>
            <category>docker</category>
            <category>nas</category>
            <pubDate>Wed, 19 Mar 2025 19:11:35 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/navidrome/navidrome/tree/v0.55.2&#34;&gt;&lt;strong&gt;Navidrome&lt;/strong&gt;&lt;/a&gt; 0.55.2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816115804062.png&#34; alt=&#34;image-20250816115804062&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;Navidrome 是一款开源的、轻量级的、自托管的音乐服务器，兼容 Subsonic API，可以通过网页或客户端应用访问和播放音乐。&lt;/p&gt;
&lt;p&gt;特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;处理超大音乐收藏&lt;/li&gt;
&lt;li&gt;几乎可串流任何音频格式&lt;/li&gt;
&lt;li&gt;读取并使用所有精心策划的元数据&lt;/li&gt;
&lt;li&gt;对合集（Various Artists 专辑）和盒装（多碟专辑）的强大支持&lt;/li&gt;
&lt;li&gt;多用户，每个用户都有自己的播放次数、播放列表、收藏夹等。&lt;/li&gt;
&lt;li&gt;资源使用率极低&lt;/li&gt;
&lt;li&gt;多平台，可在 macOS、Linux 和 Windows 上运行。还提供 Docker 映像&lt;/li&gt;
&lt;li&gt;所有主要平台（包括 Raspberry Pi）的二进制文件均可随时使用&lt;/li&gt;
&lt;li&gt;自动监控资料库变化，导入新文件并重新加载新元数据&lt;/li&gt;
&lt;li&gt;基于 Material UI 的可主题化、现代化和响应式网络界面&lt;/li&gt;
&lt;li&gt;与所有 Subsonic / Madsonic / Airsonic 客户端兼容&lt;/li&gt;
&lt;li&gt;即时转码可按用户 / 播放器设置。支持 Opus 编码&lt;/li&gt;
&lt;li&gt;翻译成各种语言&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816143236595.png&#34; alt=&#34;image-20250816143236595&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;创建 navidrome 数据文件夹及音乐存放位置：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的相册存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/navidrome/data&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/music&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/navidrome&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加  &lt;code&gt;docker-compose.yml&lt;/code&gt;  配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/navidrome] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;touch&lt;/span&gt; docker-compose.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;span&gt;docker-compose.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;navidrome&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; deluan/navidrome&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; navidrome&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; navidrome&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 0&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# should be owner of volumes&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;4533:4533&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; always&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; network&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;# Optional: put your config options customization here. Examples:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SCANNER_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SCANNER_SCHEDULE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;@weekly&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_LOGLEVEL&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; info&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SESSIONTIMEOUT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 12h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_BASEURL&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_DEFAULTLANGUAGE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;zh-Hans&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_LASTFM_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_LISTENBRAINZ_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLEDOWNLOADS&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLEFAVOURITES&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;true&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLESHARING&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLESTARRATING&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLETRANSCODINGCONFIG&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;true&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_TRANSCODINGCACHESIZE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;400MB&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_IMAGECACHESIZE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;100MB&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SCANNER_ARTISTJOINER&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;amp;&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/app/navidrome/data:/data&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/&amp;lt;$PATH&gt;/music:/music:ro&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;driver&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; bridge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;修改完成后，使用以下命令进行部署：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker-compose&lt;/span&gt; up &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;主要参数说明&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#主要参数说明&#34;&gt;#&lt;/a&gt; 主要参数说明&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;关于环境变量：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ND_SCANNER_ENABLED&lt;/code&gt;  ：该字段用于是否启用计划扫描功能，默认是不开启，如果设为  &lt;code&gt;true&lt;/code&gt;  ，那么将根据  &lt;code&gt;ND_SCANNER_SCHEDULE&lt;/code&gt;  字段参数进行定时扫描。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_SCANNER_SCHEDULE&lt;/code&gt;  ：通过 Cron 语法定义自动扫描的时间，可以利用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jcm9udGFiLmd1cnUv&#34;&gt;https://crontab.guru/&lt;/span&gt; 生成你所需的计划时间。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_LOGLEVEL&lt;/code&gt;  ：如其名，用于记录调试信息的等级，支持  &lt;code&gt;error&lt;/code&gt; ,  &lt;code&gt;warn&lt;/code&gt; ,  &lt;code&gt;info&lt;/code&gt; ,  &lt;code&gt;debug&lt;/code&gt; ,  &lt;code&gt;trace&lt;/code&gt;  。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_SESSIONTIMEOUT&lt;/code&gt;  ：用于设置 web UI 登录后无操作的退出时间。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_BASEURL&lt;/code&gt;  ：该字段用于配置 navidrome 的代理地址，不需要则为空。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_DEFAULTLANGUAGE&lt;/code&gt;  ：设置默认登录 web UI 时所显示的语言文本，支持语言可看 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL25hdmlkcm9tZS9uYXZpZHJvbWUvdHJlZS9tYXN0ZXIvcmVzb3VyY2VzL2kxOG4=&#34;&gt;resources/i18n&lt;/span&gt; ；对于中文语言有简体和繁体之分，所以要明确格式，eg：中文简体 -  &lt;code&gt;zh-Hans&lt;/code&gt;  ，而中文繁体则为  &lt;code&gt;zh-Hant&lt;/code&gt;  。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_LASTFM_ENABLED&lt;/code&gt;  ：是否需要集成 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubGFzdC5mbS8=&#34;&gt;Last.fm&lt;/span&gt;，一般用来获取艺人信息，默认打开，如果使用则需要配置  &lt;code&gt;ND_LASTFM_APIKEY&lt;/code&gt;  、 &lt;code&gt;ND_LASTFM_SECRET&lt;/code&gt;  。由于 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL0xhc3QuZm0=&#34;&gt;Last.fm&lt;/span&gt; 是在国外架设服务器，国内访问时常抽风，因此建议关闭。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_LISTENBRAINZ_ENABLED&lt;/code&gt;  ：是否需要集成 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9saXN0ZW5icmFpbnoub3JnLw==&#34;&gt;Listen Brainz&lt;/span&gt;，用于补全专辑 / 歌曲信息、封面信息等标签信息，默认打开；可用  &lt;code&gt;ND_LISTENBRAINZ_BASEURL&lt;/code&gt;  字段覆盖 Listen Brainz 默认地址，例如使用镜像 Listen Brainz 替代。由于 Listen Brainz 是在国外架设服务器，国内访问时常抽风，因此建议关闭。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLEDOWNLOADS&lt;/code&gt;  ：是否允许从 Web 界面下载音乐 / 专辑 / 播放列表，建议关闭，默认打开。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLEFAVOURITES&lt;/code&gt;  ：是否允许从 Web 界面星标或收藏 歌曲 / 专辑 / 艺术家。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLESHARING&lt;/code&gt;  ：是否允许创建分享链接。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLESTARRATING&lt;/code&gt;  ：是否在 Web 界面启用 5 星评分机制。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLETRANSCODINGCONFIG&lt;/code&gt;  ：是否允许在 Web 界面修改转码设置。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_TRANSCODINGCACHESIZE&lt;/code&gt;  ：用于设置转码缓存大小，设为 0 时禁用转码缓存，默认为 100MB。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_IMAGECACHESIZE&lt;/code&gt;  ：用于设置媒体图像缓存大小，设为 0 时禁用媒体图像缓存，默认为 100MB。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_SCANNER_ARTISTJOINER&lt;/code&gt;  ：当存在多个艺术家时，用于界分每个艺术家，而分割的字符则由该字段控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;关于多个艺术家显示：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubmF2aWRyb21lLm9yZy9kb2NzL3VzYWdlL2N1c3RvbXRhZ3MvI2NvbmZpZ3VyaW5nLWN1c3RvbS10YWdz&#34;&gt;Configuring custom tags&lt;/span&gt; 中有提到：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816225344016.png&#34; alt=&#34;image-20250816225344016&#34; /&gt;&lt;/p&gt;
&lt;p&gt;因此，除了上面的  &lt;code&gt;ND_SCANNER_ARTISTJOINER&lt;/code&gt;  字段能定义总的艺术家切割字符外，还可以自定义详细的不同分类的切割字符，因此，我们可以在  &lt;code&gt;navidrome.toml&lt;/code&gt;  文件中编写需要的信息：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /app/navidrome/data/navidrome.toml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight toml&#34;&gt;&lt;figcaption data-lang=&#34;TOML&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key property&#34;&gt;Tags.Artist.Split&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;/&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; / &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; feat. &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;feat.&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; feat &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; ft. &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; ft &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;; &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;amp;&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key property&#34;&gt;Tags.Roles.Split&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;/&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;;&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;amp;&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Tags.Artist.Split&lt;/code&gt;  ：表示存在多个艺术家 / 专辑艺术家时，所识别分割的匹配字符。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tags.Roles.Split&lt;/code&gt;  ：表示除了  &lt;code&gt;Tags.Artist.Split&lt;/code&gt;  定义的艺术家和专辑艺术家以外的，所有剩余的作词家、作曲家以及编曲家等存在多个时，其所匹配分割的字符。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果容器启动后找不到  &lt;code&gt;navidrome.toml&lt;/code&gt;  文件识别，可以在  &lt;code&gt;ND_CONFIGFILE&lt;/code&gt;  字段中指定位置（该字段默认为  &lt;code&gt;&amp;quot;./navidrome.toml&amp;quot;&lt;/code&gt; ）。&lt;/p&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;关于其它的变量属性可以参看官方说明：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubmF2aWRyb21lLm9yZy9kb2NzL3VzYWdlL2NvbmZpZ3VyYXRpb24tb3B0aW9ucy8jZW52aXJvbm1lbnQtdmFyaWFibGVz&#34;&gt;https://www.navidrome.org/docs/usage/configuration-options/#environment-variables&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;关于加载外部配置属性参数可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL25hdmlkcm9tZS9uYXZpZHJvbWUvYmxvYi9tYXN0ZXIvcmVzb3VyY2VzL21hcHBpbmdzLnlhbWw=&#34;&gt;https://github.com/navidrome/navidrome/blob/master/resources/mappings.yaml&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;音乐库分类管理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#音乐库分类管理&#34;&gt;#&lt;/a&gt; 音乐库分类管理&lt;/h2&gt;
&lt;p&gt;通常情况下音乐库的结构分类应该是：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;.
|-- Artist A
|   |-- Albums A
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- Albums B
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- ......
|   `-- Albums n
|       |-- Music A
|       |-- Music B
|       |-- ......
|       `-- Music n
|-- Artist B
|   |-- Albums A
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- Albums B
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- ......
|   `-- Albums n
|       |-- Music A
|       |-- Music B
|       |-- ......
|       `-- Music n
|-- ......
`-- Artist n
    |-- Albums A
    |   |-- Music A
    |   |-- Music B
    |   |-- ......
    |   `-- Music n
    |-- Albums B
    |   |-- Music A
    |   |-- Music B
    |   |-- ......
    |   `-- Music n
    |-- ......
    `-- Albums n
        |-- Music A
        |-- Music B
        |-- ......
        `-- Music n
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;由于在部署 navidrome 的时候没有集成 lastfm, spotify, deezer 组件，因此，在查看艺术家的时候是没有相应的图片的，所以你可以在你的对应艺术家分类目录下放置艺术家图片即可显示，图片命名以  &lt;code&gt;ND_ARTISTARTPRIORITY&lt;/code&gt;  字段的参数为匹配项，默认为  &lt;code&gt;&amp;quot;artist.*, album/artist.*, external&amp;quot;&lt;/code&gt;  ；&lt;/p&gt;
&lt;p&gt;eg：&lt;/p&gt;
&lt;p&gt;在目录下放置  &lt;code&gt;artist.jpg&lt;/code&gt;  艺术家封图：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817120342493.png&#34; alt=&#34;image-20250817120342493&#34; /&gt;&lt;/p&gt;
&lt;p&gt;在查看对应 artist 显示，可以看到已经识别导入了（需要完全扫描一次）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817120526221.png&#34; alt=&#34;image-20250817120526221&#34; /&gt;&lt;/p&gt;
&lt;p&gt;而对于 artist 本地传记显示，目前版本还不支持，但已经有需求提出了，具体可看 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL25hdmlkcm9tZS9uYXZpZHJvbWUvaXNzdWVzLzk2MQ==&#34;&gt;https://github.com/navidrome/navidrome/issues/961&lt;/span&gt; ；当然，如果对自己网络访问国外服务器有信心的，可以启用  &lt;code&gt;ND_LASTFM_ENABLED&lt;/code&gt;  or  &lt;code&gt;ND_SPOTIFY_ID&lt;/code&gt;  项，即可实现 artist 封图和简介等相关信息：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817140334532.png&#34; alt=&#34;image-20250817140334532&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;浏览器访问  &lt;code&gt;http://localhost:4533&lt;/code&gt;  ，首次进入需要设置账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817135949534.png&#34; alt=&#34;image-20250817135949534&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;音乐标签信息&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#音乐标签信息&#34;&gt;#&lt;/a&gt; 音乐标签信息&lt;/h2&gt;
&lt;p&gt;对于歌曲的标签信息写入，只要符合常规的 &amp;quot;ID3Tags&amp;quot; 都能读取，像中文这种，推荐使用 &amp;quot;ID3v2.3 UTF-16&amp;quot; 格式。关于 navidrome 中定制的 tag，可以参看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubmF2aWRyb21lLm9yZy9kb2NzL3VzYWdlL3RhZ2dpbmctZ3VpZGVsaW5lcy8=&#34;&gt;https://www.navidrome.org/docs/usage/tagging-guidelines/&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;Navidrome 除了网页界面，还支持各种第三方客户端：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iOS: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL21pY2hhZWxzYXBwcy5kay9wbGF5c3ViYXBwLw==&#34;&gt;play:Sub&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdWJzdHJlYW1lcmFwcC5jb20v&#34;&gt;substreamer&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0JMZWVFWi9hbXBlcmZ5I3JlYWRtZQ==&#34;&gt;Amperfy&lt;/span&gt; and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pc3ViLmFwcC8=&#34;&gt;iSub&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Android: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0NhcHBpZWxsb0FudG9uaW8vdGVtcG8=&#34;&gt;Tempo&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3Nhd3llcmYvQ2FzdGFmaW9yZQ==&#34;&gt;Castafiore&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wbGF5Lmdvb2dsZS5jb20vc3RvcmUvYXBwcy9kZXRhaWxzP2lkPWdpdGh1Yi5kYW5lcmVuMjAwNS5kc3Vi&#34;&gt;DSub&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2F1c3RpbnJpZWQvc3VidHJhY2tzI3JlYWRtZQ==&#34;&gt;Subtracks&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdWJzdHJlYW1lcmFwcC5jb20v&#34;&gt;substreamer&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3VsdHJhc29uaWMvdWx0cmFzb25pYyNyZWFkbWU=&#34;&gt;Ultrasonic&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL252bGxzdm0vQXVkaW5hdXQjcmVhZG1l&#34;&gt;Audinaut&lt;/span&gt; and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tdXNpYy5hcXpzY24uY24v&#34;&gt;音流&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Web: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3BlZ3Vlcm9zZGMvc3VicGxheWVyI3JlYWRtZQ==&#34;&gt;Subplayer&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3RhbWxhbmQvYWlyc29uaWMtcmVmaXgjcmVhZG1l&#34;&gt;Airsonic Refix&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3NocmltcHphLmdpdGh1Yi5pby9hdXJpYWwv&#34;&gt;Aurial&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2phbXN0YXNoLmNvbS8=&#34;&gt;Jamstash&lt;/span&gt; and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3Auc3ViZmlyZXBsYXllci5uZXQv&#34;&gt;Subfire&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Desktop: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdWJsaW1lbXVzaWMuYXBwLw==&#34;&gt;Sublime Music&lt;/span&gt; (Linux) and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2plZmZ2bGkvc29uaXhk&#34;&gt;Sonixd&lt;/span&gt; (Windows/Linux/macOS)&lt;/li&gt;
&lt;li&gt;CLI: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3RyeWZmZWwvamVsbHljbGkjcmVhZG1l&#34;&gt;Jellycli&lt;/span&gt; (Windows/Linux) and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3dpbGRleWVkc2tpZXMvc3RtcCNyZWFkbWU=&#34;&gt;STMP&lt;/span&gt; (Linux/macOS)&lt;/li&gt;
&lt;li&gt;Connected Speakers:
&lt;ul&gt;
&lt;li&gt;Sonos: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3NpbW9qZW5raS9ib25vYiNyZWFkbWU=&#34;&gt;bonob&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Alexa: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3NyaWNodGVyL2Fza3NvbmljI3JlYWRtZQ==&#34;&gt;AskSonic&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Other:
&lt;ul&gt;
&lt;li&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3dhcndpY2toL3BsdWdpbi5hdWRpby5zdWJzb25pYyNyZWFkbWU=&#34;&gt;Subsonic Kodi Plugin&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0JvYkhhc05vU291bC9wbHVnaW4uYXVkaW8ubmF2aWRyb21lI3JlYWRtZQ==&#34;&gt;Navidrome Kodi Plugin&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2ZhbmdmdWZ1L2h0dHBkaXJmcyNyZWFkbWU=&#34;&gt;HTTPDirFS&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在这里，安卓手机客户端可以尝试使用 Temop 或 Castafiore，当然还有其它的，具体哪个好用、谁才适合，则看自己的使用需求了。&lt;/p&gt;
&lt;p&gt;下面为 Tempo 的使用界面：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816160120279.png&#34; alt=&#34;image-20250816160120279&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816160132127.png&#34; alt=&#34;image-20250816160132127&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816160140991.png&#34; alt=&#34;image-20250816160140991&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Castafiore 使用界面：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817151224772.png&#34; alt=&#34;image-20250817151224772&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817151230932.png&#34; alt=&#34;image-20250817151230932&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817151240959.png&#34; alt=&#34;image-20250817151240959&#34; /&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-qbittorrent/</guid>
            <title>docker 部署之 qbittorrent 资源下载</title>
            <link>https://arachnid.cc/docker-deployment-of-qbittorrent/</link>
            <category>docker</category>
            <pubDate>Sat, 08 Mar 2025 09:54:09 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/linuxserver/docker-qbittorrent&#34;&gt;&lt;strong&gt;qBittorrent&lt;/strong&gt;&lt;/a&gt; v5.0.4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621175702013.png&#34; alt=&#34;qbittorrent login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;qBittorrent 是一款免费的开源种子下载工具，作为 µTorrent 的替代品。它在所有平台上都提供相同的功能，包括 Windows、Linux 和 macOS。该应用程序还配备了一个可扩展的搜索引擎以及 Web UI 远端，以最大化你的 torrent 体验。使用 qBittorrent，你可以在多个平台上轻松下载你喜爱的内容。&lt;/p&gt;
&lt;p&gt;官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cucWJpdHRvcnJlbnQub3JnLw==&#34;&gt;https://www.qbittorrent.org/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;项目：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2xpbnV4c2VydmVyL2RvY2tlci1xYml0dG9ycmVudA==&#34;&gt;https://github.com/linuxserver/docker-qbittorrent&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621180126200.png&#34; alt=&#34;qbittorrent&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;创建 qbittorrent 数据文件存放位置：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的下载存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/qbittorrent/config /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/qbittorrent&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加  &lt;code&gt;docker-compose.yml&lt;/code&gt;  配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/navidrome] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; docker-compose.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;span&gt;docker-compose.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;qbittorrent&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; linuxserver/qbittorrent&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; qbittorrent&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; PUID=0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; PGID=0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; TZ=Asia/Shanghai&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; WEBUI_PORT=9350 &lt;span class=&#34;token comment&#34;&gt;# Web UI 访问端口&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; TORRENTING_PORT=18960 &lt;span class=&#34;token comment&#34;&gt;# 容器的监听端口&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /app/qbittorrent/config&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/config&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; /&amp;lt;$PATH&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;/downloads&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;/downloads &lt;span class=&#34;token comment&#34;&gt;#optional&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; 9350&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;9350&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# 映射须一致&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; 18960&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;18960&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# TCP 监听端口&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; 18960&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;18960/udp &lt;span class=&#34;token comment&#34;&gt;# UDP 监听端口&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; always&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;TORRENTING_PORT&lt;/code&gt;  最好避免填写  &lt;code&gt;6881&lt;/code&gt;  端口，运营商一般屏蔽该端口，选  &lt;code&gt;10000&lt;/code&gt;  后的比较好；当改动该项的时候，底下的  &lt;code&gt;TCP 监听端口&lt;/code&gt;  和  &lt;code&gt;UDP 监听端口&lt;/code&gt;  也要一同改变；如果想通过在 Web UI 上变换端口，则只是当前保存生效，重启容器后会自动变回  &lt;code&gt;TORRENTING_PORT&lt;/code&gt;  的配置端口。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;访问  &lt;code&gt;http://localhost:9350&lt;/code&gt;  ，初次登录，默认用户名（admin）和密码，通过启动日志获取；可在主机通过终端命令  &lt;code&gt;docker logs qbittorrent&lt;/code&gt;  获取：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;2034870-20231230013241798-192308779.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;语言切换&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#语言切换&#34;&gt;#&lt;/a&gt; 语言切换&lt;/h2&gt;
&lt;p&gt;在  &lt;code&gt;设置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;行为&lt;/code&gt;  中找到语言，进行你需要的配置，然后点击保存：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615115000144.png&#34; alt=&#34;image-20250615115000144&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;密码修改&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#密码修改&#34;&gt;#&lt;/a&gt; 密码修改&lt;/h2&gt;
&lt;p&gt;由于初始化的账号密码随机性，可以在  &lt;code&gt;设置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;WebUI&lt;/code&gt;  中的验证更改：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615115248894.png&#34; alt=&#34;image-20250615115248894&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;更改监听端口&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#更改监听端口&#34;&gt;#&lt;/a&gt; 更改监听端口&lt;/h2&gt;
&lt;p&gt;如出现默认端口被一般 PT 站点禁用，显示 ‘Port 6881 is blacklisted’ 报错，或者种子下载没速度（非网络问题），则尝试在 qbittorrent 变更监听端口：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615115450536.png&#34; alt=&#34;image-20250615115450536&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;tracker-服务器&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#tracker-服务器&#34;&gt;#&lt;/a&gt; tracker 服务器&lt;/h2&gt;
&lt;p&gt;部分冷门资源会导致下载缓慢，这时可以添加 BT 下载所需的 tracker 服务器列表：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615120148452.png&#34; alt=&#34;image-20250615120148452&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;下载路径&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#下载路径&#34;&gt;#&lt;/a&gt; 下载路径&lt;/h2&gt;
&lt;p&gt;不管是默认下载路径亦或是手动指定下载路径：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615120359623.png&#34; alt=&#34;image-20250615120359623&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615120503870.png&#34; alt=&#34;image-20250615120503870&#34; /&gt;&lt;/p&gt;
&lt;p&gt;都需要根据 Docker 配置里的  &lt;code&gt;volumes&lt;/code&gt;  字段中设置的下载文件夹映射路径配置，可以是底下的子文件夹，但不能更换为其范围以外的路径，eg：可以是  &lt;code&gt;/downloads/movie&lt;/code&gt;  或  &lt;code&gt;/downloads/video&lt;/code&gt;  等子路径，不能是  &lt;code&gt;/movie&lt;/code&gt;  或  &lt;code&gt;/video&lt;/code&gt;  这些非配置上的路径。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-komga/</guid>
            <title>docker 部署之 komga 漫画管理</title>
            <link>https://arachnid.cc/docker-deployment-of-komga/</link>
            <category>docker</category>
            <pubDate>Tue, 17 Dec 2024 23:33:29 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/gotson/komga/tree/1.15.1&#34;&gt;&lt;strong&gt;komga&lt;/strong&gt;&lt;/a&gt; v1.15.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621180216042.png&#34; alt=&#34;komga login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;komga 是一个自托管的漫画管理程序，支持常见的 CBZ、CBR、PDF 、EPUB 格式的漫画或文件，可以直接在网页端阅读漫画，并加以修改、编辑漫画的元数据。同时它支持全平台运行，&lt;/p&gt;
&lt;p&gt;官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9rb21nYS5vcmcv&#34;&gt;https://komga.org/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;项目地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2dvdHNvbi9rb21nYS90cmVlLzEuMTUuMQ==&#34;&gt;https://github.com/gotson/komga/tree/1.15.1&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622151001079.png&#34; alt=&#34;komga&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;为你的 komga 存放创建数据和配置文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你存储盘的路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/komga/config /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/komga/data&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull gotson/komga:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt; komga &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/komga/data:/data &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/komga/config:/config &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;25600&lt;/span&gt;:25600 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--user&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;0:0&#34;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  gotson/komga&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参数解释：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-v /&amp;lt;$PATH&amp;gt;/komga/data:/data&lt;/code&gt;  和  &lt;code&gt;-v /&amp;lt;$PATH&amp;gt;/komga/config:/config&lt;/code&gt;  ：将对应存储盘目录下的  &lt;code&gt;/komga/data&lt;/code&gt;  和  &lt;code&gt;/komga/config&lt;/code&gt;  目录分别映射进容器的  &lt;code&gt;/data&lt;/code&gt;  和  &lt;code&gt;/config&lt;/code&gt;  路径，用于数据和配置的持久化。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-e TZ=Asia/Shanghai&lt;/code&gt;  ：设置容器的环境变量  &lt;code&gt;TZ&lt;/code&gt; ，用于指定时区。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--user &amp;quot;0:0&amp;quot;&lt;/code&gt;  ：以 root 用户运行容器，这对于某些环境的权限管理是必要的。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;note：用 docker 容器安装的话，在  &lt;code&gt;添加库&lt;/code&gt;  时选择的根文件夹填写的是容器内部的路径（即上面的  &lt;code&gt;/data&lt;/code&gt;  目录下）。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;浏览器输入访问  &lt;code&gt;http://localhost:25600&lt;/code&gt;  ，初次进入提示创建邮箱密码：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622174815622.png&#34; alt=&#34;image-20250622174815622&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;创建漫画库&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#创建漫画库&#34;&gt;#&lt;/a&gt; 创建漫画库&lt;/h2&gt;
&lt;p&gt;在左侧栏的  &lt;code&gt;库&lt;/code&gt;  旁边有个  &lt;code&gt;+&lt;/code&gt;  符号，点击添加：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622175219989.png&#34; alt=&#34;image-20250622175219989&#34; /&gt;&lt;/p&gt;
&lt;p&gt;然后弹出窗口，为当前库命名，并选择指向的路径（注意：填写的是容器内部的路径，即  &lt;code&gt;/data&lt;/code&gt;  路径及其子路径）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622175339875.png&#34; alt=&#34;image-20250622175339875&#34; /&gt;&lt;/p&gt;
&lt;p&gt;扫描器这里，你可以选择你想要的扫描操作，以及需要支持的扫描类型（漫画书存档即  &lt;code&gt;.cbz&lt;/code&gt;   &lt;code&gt;.cbr&lt;/code&gt;  格式，其实与  &lt;code&gt;.zip&lt;/code&gt;   &lt;code&gt;.rar&lt;/code&gt;  格式一样，同时也可以解析  &lt;code&gt;.zip&lt;/code&gt;  格式文件）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622180001458.png&#34; alt=&#34;image-20250622180001458&#34; /&gt;&lt;/p&gt;
&lt;p&gt;剩下两项，一般保持默认即可，如有其它需要则自行更改。&lt;/p&gt;
&lt;h2 id=&#34;元数据编辑&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#元数据编辑&#34;&gt;#&lt;/a&gt; 元数据编辑&lt;/h2&gt;
&lt;p&gt;如果漫画文件中存在  &lt;code&gt;ComicInfo.xml&lt;/code&gt;  元数据文件，那么会被 Komga 直接识别，就无需手动补齐元数据了。但是一般情况下是没有的，所以需要手动补充。如果手动编辑，分为两种：一种是单本编辑，另一种是整册编辑。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;单本编辑&lt;/p&gt;
&lt;p&gt;如果有多层结构，进入到最里层，出现下图在单本中有显示阅读图标的，那么在这里的配置就是单本编辑：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622181358937.png&#34; alt=&#34;image-20250622181358937&#34; /&gt;&lt;/p&gt;
&lt;p&gt;单本编辑一般有如下编辑：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622181445324.png&#34; alt=&#34;image-20250622181445324&#34; /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;整册编辑&lt;/p&gt;
&lt;p&gt;像一般多卷的单行本，存在多个连载本，这时候你可以整册编辑：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622181817974.png&#34; alt=&#34;image-20250622181817974&#34; /&gt;&lt;/p&gt;
&lt;p&gt;对于整册编辑，如果单本中与部分属性没有配置保持默认，而整册中却配置了该属性，那么在单本显示会映射出整册的配置属性（即： &lt;code&gt;单本属性&lt;/code&gt;  &amp;gt;  &lt;code&gt;整册属性&lt;/code&gt;  &amp;gt;  &lt;code&gt;默认属性(null)&lt;/code&gt; ）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622182453623.png&#34; alt=&#34;image-20250622182453623&#34; /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;漫画归类整理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#漫画归类整理&#34;&gt;#&lt;/a&gt; 漫画归类整理&lt;/h2&gt;
&lt;p&gt;komge 归类首要识别的是内嵌的  &lt;code&gt;ComicInfo.xml&lt;/code&gt;  文件，根据其字段信息来帮你归类为某个系列，但一般情况下我们获取的漫画都并非自带  &lt;code&gt;ComicInfo.xml&lt;/code&gt;  文件，因此往往需要手动添加修改，或以脚本自动补充；除了用脚本自动补充便捷归类外，常见的方式就是利用文件夹进行整理归类，期间你可以设立多级子文件夹，最后会以存档的上一级文件夹名为默认的系列名，即：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;.
|-- [敖幼祥] 乌龙院
|   |-- [敖幼祥] 乌龙院之爆笑系列
|   |   |-- 第01卷-豆腐罗曼史.zip
|   |   |-- 第02卷-红烧蔡捕头.zip
|   |   |-- ......
|   |   `-- 第10卷-六合大战.zip
|   |-- [敖幼祥] 乌龙院之黑柠檬
|   |   |-- 01.zip
|   |   |-- 02.zip
|   |   `-- 03.zip
|   |-- [敖幼祥] 乌龙院之活宝系列
|   |   |-- 01.zip
|   |   |-- 02.zip
|   |   |-- ......
|   |   `-- 43.zip
|   |-- [敖幼祥] 乌龙院之名作剧场
|   |   |-- 七鲜鱼丸.zip
|   |   `-- 御兽园.zip
|   |-- [敖幼祥] 乌龙院之前传
|   |   |-- 01.zip
|   |   |-- 02.zip
|   |   |-- ......
|   |   `-- 78.zip
|   `-- [敖幼祥] 乌龙院之四格系列
|       |-- 01.zip
|       |-- 02.zip
|       |-- ......
|       `-- 06.zip
|-- [北条司] 城市猎人
|   |-- [Vol_01].zip
|   |-- [Vol_02].zip
|   |-- ......
|   |-- [Vol_35].zip
|   `-- 全 35 卷.txt
|-- ......
`-- [鳥山明] 七龙珠
    |-- [龍珠完全版][鳥山明][文傳]Vol_01.zip
    |-- [龍珠完全版][鳥山明][文傳]Vol_02.zip
    |-- ......
    |-- [龍珠完全版][鳥山明][文傳]Vol_34.zip
    |-- [龍珠完全版公式手冊_Dragonball_FOREVER_人造人篇～魔人布歐篇][鳥山明][文傳].zip
    |-- [龍珠完全版公式手冊_Dragonball_LANDMARK_少年篇～菲利篇][鳥山明][文傳].zip
    `-- 全 34 卷.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;像 “乌龙院” 系列，即使有二级结构，但实际出来的还是一个单一系列：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250629113512571.png&#34; alt=&#34;image-20250629113512571&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250629114450732.png&#34; alt=&#34;image-20250629114450732&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;漫画导入&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#漫画导入&#34;&gt;#&lt;/a&gt; 漫画导入&lt;/h2&gt;
&lt;p&gt;komga 在面板上支持导入，嘛，一般本人是手动在存储文件夹里导入的；不过面板这里的导入可以用来对比替换原有漫画（比如由于漫画质量、缺页、乱页等需要重新收录），不过这个使用起来也挺麻烦的，需要你的漫画信息齐全，或者说部分信息必须要有。。。因此，强烈推荐还是手动比较！&lt;/p&gt;
&lt;p&gt;如果你真的想用这个功能，那么你需要做到以下几步：&lt;/p&gt;
&lt;p&gt;1、为你的导入漫画单独安置一个导入文件夹，然后里面存放需要导入的漫画，可以拥有子目录：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622194057342.png&#34; alt=&#34;image-20250622194057342&#34; /&gt;&lt;/p&gt;
&lt;p&gt;2、进入面板的  &lt;code&gt;导入&lt;/code&gt;  窗口，选择对应的导入路径，点击扫描：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622194600873.png&#34; alt=&#34;image-20250622194600873&#34; /&gt;&lt;/p&gt;
&lt;p&gt;3、扫描出来后，你可以检查校对导入的漫画：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622195033818.png&#34; alt=&#34;image-20250622195033818&#34; /&gt;&lt;/p&gt;
&lt;p&gt;4、对于有系列和没系列的区别，如果你没有按照提示选择系列，那么后期执行导入将跳过未设置的漫画：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622195449602.png&#34; alt=&#34;image-20250622195449602&#34; /&gt;&lt;/p&gt;
&lt;p&gt;关于系列的设置，是在整册的设置中配置  &lt;code&gt;常规&lt;/code&gt;  的  &lt;code&gt;标题&lt;/code&gt;  ，或者  &lt;code&gt;副标题&lt;/code&gt;  的  &lt;code&gt;标签&lt;/code&gt;  属性（注意：它们的配置都必须有锁，否则是在导入中查询不到的）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622200804478.png&#34; alt=&#34;image-20250622200804478&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622200003954.png&#34; alt=&#34;image-20250622200003954&#34; /&gt;&lt;/p&gt;
&lt;p&gt;因此，如果是替换的话，那么需要你在原有的漫画中配置该属性，而对于新建的，则需要建立一个整册文件夹（实际就是在库目录里建一个为了存放新建漫画的子文件夹），才能搜索到系列：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622201424811.png&#34; alt=&#34;image-20250622201424811&#34; /&gt;&lt;/p&gt;
&lt;p&gt;5、重设漫画导入后的名称，如果已经配置了  &lt;code&gt;系列&lt;/code&gt;  项，那么你能看到该系列里的列出的所有存在的文件（见下面框选位置）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622201701331.png&#34; alt=&#34;image-20250622201701331&#34; /&gt;&lt;/p&gt;
&lt;p&gt;6、新建与替换的关系：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622214357246.png&#34; alt=&#34;image-20250622214357246&#34; /&gt;&lt;/p&gt;
&lt;p&gt;对于你想新建的漫画，在  &lt;code&gt;编号&lt;/code&gt;  项中，你可以任意自定义未冲突的号码或者留空；而对于想要替换的漫画，那么你需要在  &lt;code&gt;编号&lt;/code&gt;  项中选择你要替换的编号，像在原有的漫画中，可以在单本编辑中查看，或者在整册上看前缀编号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622215045849.png&#34; alt=&#34;image-20250622215045849&#34; /&gt;&lt;/p&gt;
&lt;p&gt;然后如果是替换的漫画，你可以点击  &lt;code&gt;详情&lt;/code&gt;  或者  &lt;code&gt;图片查询&lt;/code&gt;  按键来对比：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622215326812.png&#34; alt=&#34;image-20250622215326812&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622215445165.png&#34; alt=&#34;image-20250622215445165&#34; /&gt;&lt;/p&gt;
&lt;p&gt;7、确定没问题后，然后点击  &lt;code&gt;导入&lt;/code&gt;  ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622201829617.png&#34; alt=&#34;image-20250622201829617&#34; /&gt;&lt;/p&gt;
&lt;p&gt;期间会有提示框：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622215710185.png&#34; alt=&#34;image-20250622215710185&#34; /&gt;&lt;/p&gt;
&lt;p&gt;8、待所有任务完成后，在历史记录中查看是否成功：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622215851952.png&#34; alt=&#34;image-20250622215851952&#34; /&gt;9、进入整册查看效果：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250622220552349.png&#34; alt=&#34;image-20250622220552349&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;关于 App 客户端，这里可以用官方的推荐的：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9rb21nYS5vcmcvZG9jcy9jYXRlZ29yeS9yZWFkZXJz&#34;&gt;https://komga.org/docs/category/readers&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;一般常用的有 &lt;strong&gt;Tachiyomi&lt;/strong&gt; 、&lt;strong&gt;Mihon&lt;/strong&gt; 、&lt;strong&gt;tachiyomiJ2K&lt;/strong&gt; ；前者由于版权等一系列问题被迫删库跑路了。。。所以衍生出后面两个，当然也还有其它更多的 forks 版本，这里就不一一说了。&lt;/p&gt;
&lt;p&gt;选择导入插件仓库地址：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://raw.githubusercontent.com/keiyoushi/extensions/repo/index.min.json
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;或者手动下载 komga 插件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://keiyoushi.github.io/extensions/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后选择搜索 komga：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814203137641.png&#34; alt=&#34;image-20250814203137641&#34; /&gt;&lt;/p&gt;
&lt;p&gt;客户端展示：&lt;/p&gt;
&lt;p&gt;1、 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL21paG9uYXBwL21paG9u&#34;&gt;Mihon&lt;/span&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250813222752267.png&#34; alt=&#34;image-20250813222752267&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250813223006155.png&#34; alt=&#34;image-20250813223006155&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250813222813431.png&#34; alt=&#34;image-20250813222813431&#34; /&gt;&lt;/p&gt;
&lt;p&gt;2、 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0pheXMyS2luZ3MvdGFjaGl5b21pSjJL&#34;&gt;tachiyomiJ2K&lt;/span&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250813215259060.png&#34; alt=&#34;image-20250813215259060&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250813215333781.png&#34; alt=&#34;image-20250813215333781&#34; /&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-photoview/</guid>
            <title>docker 部署之 photoview 图片相册</title>
            <link>https://arachnid.cc/docker-deployment-of-photoview/</link>
            <category>docker</category>
            <pubDate>Tue, 17 Dec 2024 23:33:29 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/photoview/photoview/tree/v2.4.0&#34;&gt;&lt;strong&gt;photoview&lt;/strong&gt;&lt;/a&gt; 2.4.0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174347104.png&#34; alt=&#34;photoview login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;Photoview 是一个简单且用户友好的照片库，是专为摄影师制作，旨在提供一个简单且快速的方式来导航目录，其中包含数以千计的高分辨率照片。&lt;/p&gt;
&lt;p&gt;您可以将 Photoview 配置为在文件系统的某个目录中查找照片和视频。 扫描仪会自动拾取您的媒体并开始生成缩略图图像，以使浏览速度加快。&lt;/p&gt;
&lt;p&gt;当您的媒体被扫描后，它们会显示在网站上，其组织方式与文件系统相同。&lt;/p&gt;
&lt;p&gt;特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;保持与文件系统架构一样的目录显示。&lt;/li&gt;
&lt;li&gt;多用户管理。&lt;/li&gt;
&lt;li&gt;支持公共链接共享，并可选密码保护。&lt;/li&gt;
&lt;li&gt;支持 RAW 文件格式和 EXIF 解析。&lt;/li&gt;
&lt;li&gt;支持多种常见视频格式，并自动针对网络优化。&lt;/li&gt;
&lt;li&gt;自动人脸识别，并按人像分组。&lt;/li&gt;
&lt;li&gt;支持低中高分辨率，优先加载缩略图。&lt;/li&gt;
&lt;li&gt;所有媒体资源受 Cookie 令牌保护，所有密码经过哈希处理，API 采用严格的 CORS 策略。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;项目地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3Bob3Rvdmlldy9waG90b3ZpZXc=&#34;&gt;https://github.com/photoview/photoview&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621175519441.png&#34; alt=&#34;photoview&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;创建 photoview 配置文件夹及相册存放位置：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的相册存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/photoview] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/photoview] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/pictures&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;根据官方说明，由于配置参数过多，因此采用 docker compose 的方法，添加  &lt;code&gt;docker-compose.yml&lt;/code&gt;  配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; docker-compose.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;span&gt;docker-compose.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;photoview&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; viktorstrate/photoview&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; always&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; root&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;stop_grace_period&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 10s&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;2430:80&#34;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;## HTTP port (host:container)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;## This ensures that DB is initialized and ready for connections.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;## Comment out the entire `depends_on` section if PHOTOVIEW_DATABASE_DRIVER is set to `sqlite` in the .env&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;depends_on&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;mariadb&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token key atrule&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; service_healthy&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;## Security options for some restricted systems&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;security_opt&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; seccomp&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;unconfined&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; apparmor&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;unconfined&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PHOTOVIEW_DATABASE_DRIVER&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; $&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;PHOTOVIEW_DATABASE_DRIVER&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Comment out the next variable in the case PHOTOVIEW_DATABASE_DRIVER is set to `sqlite` or `postgres` in the .env&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PHOTOVIEW_MYSQL_URL&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;$&amp;#123;MARIADB_USER&amp;#125;:$&amp;#123;MARIADB_PASSWORD&amp;#125;@tcp(photoview-mariadb)/$&amp;#123;MARIADB_DATABASE&amp;#125;&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Uncomment the next line if PHOTOVIEW_DATABASE_DRIVER is set to `sqlite` in the .env&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;# PHOTOVIEW_SQLITE_PATH: $&amp;#123;PHOTOVIEW_SQLITE_PATH&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;PHOTOVIEW_LISTEN_IP&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;0.0.0.0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Optional: If you are using Samba/CIFS-Share and experience problems with &#34;directory not found&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Enable the following Godebug&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;# - GODEBUG=asyncpreemptoff=1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Optional: To enable map related features, you need to create a mapbox token.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## A token can be generated for free here https://account.mapbox.com/access-tokens/&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## It&#39;s a good idea to limit the scope of the token to your own domain, to prevent others from using it.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MAPBOX_TOKEN&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; $&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;MAPBOX_TOKEN&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Example:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## - &#34;/host/folder:/container/folder&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;37&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/etc/localtime:/etc/localtime:ro&#34;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;## use local time from host&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;38&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/etc/timezone:/etc/timezone:ro&#34;&lt;/span&gt;   &lt;span class=&#34;token comment&#34;&gt;## use timezone from host&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;39&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Uncomment the next line if PHOTOVIEW_DATABASE_DRIVER is set to `sqlite` in the .env&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;40&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;# - &#34;$&amp;#123;HOST_PHOTOVIEW_LOCATION&amp;#125;/database:/home/photoview/database&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;41&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;$&amp;#123;HOST_PHOTOVIEW_LOCATION&amp;#125;/storage:/home/photoview/media-cache&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;42&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Change This in the .env file: to the directory where your photos are located on your server.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;43&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## You can mount multiple paths if your photos are spread across multiple directories.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;44&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## The same path as the container path set here, you&#39;ll need to provide on the Photoview&#39;s init page (the one between the &#39;:&#39; chars).&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;45&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## If you mount several folders, provide the path to the parent one on the init page.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;46&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## If you mount several folders, make sure that there are no direct mappings to the media root folder.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;47&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## This means that you need to also modify the container path of the HOST_PHOTOVIEW_MEDIA_ROOT&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;48&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## to something like &#39;/photos/main&#39;. Note that this new name (&#39;main&#39; in this example) will become an album in Photoview.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;49&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;$&amp;#123;HOST_PHOTOVIEW_MEDIA_ROOT&amp;#125;:/photos:ro&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;50&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## *Additional* media folders can be mounted like this (set the variable in .env file)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;51&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Note that a mount cannot be located in a subfolder of another mount.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;52&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;# - &#34;$&amp;#123;HOST_PHOTOVIEW_MEDIA_PRIVATE&amp;#125;:/private:ro&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;53&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;54&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token comment&#34;&gt;## Comment out the `mariadb` service if PHOTOVIEW_DATABASE_DRIVER is set to `sqlite` or `postgres` in the .env&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;55&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;mariadb&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;56&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; mariadb&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;lts&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;57&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; photoview&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;mariadb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;58&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; photoview&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;mariadb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;59&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; unless&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;stopped&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;60&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;stop_grace_period&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 5s&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;61&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;## Optimized MariaDB startup command for better performance and compatibility&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;62&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; mariadbd &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;innodb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;buffer&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;pool&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;size=512M &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;transaction&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;isolation=READ&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;COMMITTED &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;character&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;set&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;server=utf8mb4 &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;collation&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;server=utf8mb4_unicode_ci &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;max&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;connections=512 &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;innodb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;rollback&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;on&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;timeout=OFF &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;innodb&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;lock&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;wait&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;timeout=120&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;63&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;security_opt&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;## see https://github.com/MariaDB/mariadb-docker/issues/434#issuecomment-1136151239&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;64&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; seccomp&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;unconfined&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;65&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; apparmor&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;unconfined&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;66&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;67&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_AUTO_UPGRADE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;68&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_DATABASE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; $&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;MARIADB_DATABASE&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;69&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_USER&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; $&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;MARIADB_USER&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;70&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_PASSWORD&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; $&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;MARIADB_PASSWORD&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;71&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;MARIADB_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; $&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;MARIADB_ROOT_PASSWORD&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;72&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;73&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## Example:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;74&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;## - &#34;/host/folder:/container/folder&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;75&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/etc/localtime:/etc/localtime:ro&#34;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;## use local time from host&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;76&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/etc/timezone:/etc/timezone:ro&#34;&lt;/span&gt;   &lt;span class=&#34;token comment&#34;&gt;## use timezone from host&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;77&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;$&amp;#123;HOST_PHOTOVIEW_LOCATION&amp;#125;/database/mariadb:/var/lib/mysql&#34;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;## DO NOT REMOVE&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;78&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;healthcheck&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;79&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; healthcheck.sh &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;connect &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;innodb_initialized&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;80&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 1m&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;81&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 5s&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;82&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;retries&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;83&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;start_period&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 3m&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加  &lt;code&gt;.env&lt;/code&gt;  环境变量：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/photoview] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; .env&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##================***================##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## These are the environment setup variables.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Start setting up your instance from here.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Syntax of the .env file is next:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## VARIABLE_NAME=variable value with everything after the &#39;=&#39; and till the end of the line.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## The variables with values, set in the docker-compose.yml directly, are for advanced configuration.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##================***================##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##----------Host variables-----------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## This is the current folder, where all Photoview files and folders (except of your media library) are located&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;HOST_PHOTOVIEW_LOCATION=/app/photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## This is where your original photos and videos located.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Provide here the path to single root folder for your media collection.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;HOST_PHOTOVIEW_MEDIA_ROOT=/&amp;lt;$PATH&gt;/pictures&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## If you&#39;d like to map multiple folders from different locations, create additional variables&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## here like the next one and modify the docker-compose.yml to match them and use in volume mappings.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# HOST_PHOTOVIEW_MEDIA_PRIVATE=&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-----------------------------------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-------Photoview variables---------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## PHOTOVIEW_DATABASE_DRIVER could have one of values: `mysql` (default), `sqlite`, `postgres`&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;PHOTOVIEW_DATABASE_DRIVER=mysql&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Optional: To enable map related features, you need to create a mapbox token.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## A token can be generated for free here https://account.mapbox.com/access-tokens/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## It&#39;s a good idea to limit the scope of the token to your own domain, to prevent others from using it.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# MAPBOX_TOKEN=yourToken&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-----------------------------------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##----------Video variables----------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Set the hardware acceleration when encoding videos.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Support `qsv`, `vaapi`, `nvenc`.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Only `qsv` is verified with `/dev/dri` devices.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# PHOTOVIEW_VIDEO_HARDWARE_ACCELERATION=&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-----------------------------------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;37&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;38&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##--------MariaDB variables----------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;39&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Comment out these variables if PHOTOVIEW_DATABASE_DRIVER is `sqlite` or `postgres`&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;40&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Use password generator to generate secret values and replace these defaults&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;41&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;MARIADB_DATABASE=photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;42&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;MARIADB_USER=photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;43&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Note: If your `MARIADB_PASSWORD` contains special characters (e.g. `@`), make sure to URL-encode them.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;44&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;MARIADB_PASSWORD=photosecret&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;45&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;MARIADB_ROOT_PASSWORD=superphotosecret&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;46&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-----------------------------------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;47&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;48&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##---------SQLite variables----------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;49&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Uncomment the next line if PHOTOVIEW_DATABASE_DRIVER is `sqlite`&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;50&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# PHOTOVIEW_SQLITE_PATH=/app/photoview/database/photoview.db&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;51&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-----------------------------------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;52&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;53&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-------PostgreSQL variables--------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;54&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Uncomment the next lines if PHOTOVIEW_DATABASE_DRIVER is `postgres`&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;55&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# PGSQL_DATABASE=photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;56&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# PGSQL_USER=photoview&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;57&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Note: If your `PGSQL_PASSWORD` contains special characters (e.g. `@`), make sure to URL-encode them.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;58&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# PGSQL_PASSWORD=superphotosecret&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;59&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## See https://www.postgresql.org/docs/current/libpq-ssl.html for possible ssl modes&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;60&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# PGSQL_SSL_MODE=prefer&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;61&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-----------------------------------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;62&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;63&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##-------Watchtower variables--------##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;64&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## The POLL_INTERVAL in sec&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;65&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;WATCHTOWER_POLL_INTERVAL=86400&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;66&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;WATCHTOWER_TIMEOUT=30s&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;67&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;WATCHTOWER_CLEANUP=true&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;68&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;##\\\\\\\\\\\\\\\\\//////////////////##&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;一般需要修改的是  &lt;code&gt;Photoview variables&lt;/code&gt;  中的内容。&lt;/p&gt;
&lt;p&gt;修改完成后，使用以下命令进行部署：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/photoview] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker-compose&lt;/span&gt; up &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;在这里不启用地点功能，如需启用则按照指示进入网站注册获取 token 填写即可开启。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;浏览器访问  &lt;code&gt;http://localhost:2430&lt;/code&gt;  ，首次进入需要设置账号密码及路径：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;modb_20220615_284dfee2-ec9b-11ec-a5f5-fa163eb4f6be.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;语言及扫描&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#语言及扫描&#34;&gt;#&lt;/a&gt; 语言及扫描&lt;/h2&gt;
&lt;p&gt;登入进来后，在  &lt;code&gt;设置&lt;/code&gt;  中可以配置您需要的语言；如果你的图片存放文件夹已经存放有相应的图片，那么首次显示需要扫描才出来：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250617223249426.png&#34; alt=&#34;image-20250617223249426&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;多用户管理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#多用户管理&#34;&gt;#&lt;/a&gt; 多用户管理&lt;/h2&gt;
&lt;p&gt;同样是在  &lt;code&gt;设置&lt;/code&gt;  中，在  &lt;code&gt;用户&lt;/code&gt;  项里你可以管理多个用户，并指定权限，同样的每个用户上也支持多个相册路径，值得注意的是增加的主路径要确保在配置上是存在的，当然，你一可以单一主路径，但为其增设子文件夹：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250617224027119.png&#34; alt=&#34;image-20250617224027119&#34; /&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-webdav/</guid>
            <title>docker 部署之 webdav 文件服务</title>
            <link>https://arachnid.cc/docker-deployment-of-webdav/</link>
            <category>docker</category>
            <pubDate>Sun, 01 Dec 2024 15:28:53 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/hacdias/webdav/tree/v5.4.1&#34;&gt;&lt;strong&gt;webdav&lt;/strong&gt;&lt;/a&gt; v5.4.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;h2 id=&#34;nfs-协议&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#nfs-协议&#34;&gt;#&lt;/a&gt; NFS 协议&lt;/h2&gt;
&lt;p&gt;NFS（网络文件系统 Network File System）是 TCP/IP 协议集所提供的一种子协议，已然成为 Unix/Linux 类系统的标配。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 Unix/Linux 环境中性能优异。&lt;/li&gt;
&lt;li&gt;配置相对简单，集成在大部分类 Unix 系统中。&lt;/li&gt;
&lt;li&gt;支持不同的 NFS 版本，提供向后兼容性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;缺点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;权限管理相对简单，对安全性要求高的场景需额外配置。&lt;/li&gt;
&lt;li&gt;通常依赖于底层网络的稳定性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;安全性&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有加密授权等功能，仅依靠 IP 地址或主机名来决定用户能否挂载共享目录，对具体目录和文件无法进行 ACL 权限控制（NFSv4 以前）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;常见用途&lt;/strong&gt;：Unix/Linux 系统间的文件共享、分布式文件系统、HPC（高性能计算）环境。&lt;/p&gt;
&lt;h2 id=&#34;samba-协议&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#samba-协议&#34;&gt;#&lt;/a&gt; Samba 协议&lt;/h2&gt;
&lt;p&gt;Samba 是 SMB/CIFS（Server Message Block / Common Internet File System）网络协议的重新实现，可以在局域网不同计算机之间进行文件、打印机等资源共享，和 NFS 功能类似。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持丰富的功能，包括文件和打印共享、用户身份验证和授权。&lt;/li&gt;
&lt;li&gt;广泛应用于 Windows 网络环境，集成度高。&lt;/li&gt;
&lt;li&gt;提供详细的权限设置和文件锁定机制，支持并发控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;缺点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;相对复杂，可能需要较多的配置和管理。&lt;/li&gt;
&lt;li&gt;在大规模网络中，性能可能受限。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;安全性&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;提供端到端加密、安全性高，配置选项丰富，支持 ACL 并支持多种用户认证模式。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;常见用途&lt;/strong&gt;：局域网内的文件共享、打印服务、企业内部网络存储。&lt;/p&gt;
&lt;h2 id=&#34;webdav-协议&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#webdav-协议&#34;&gt;#&lt;/a&gt; WebDAV 协议&lt;/h2&gt;
&lt;p&gt;WebDAV（Web-based Distributed Authoring and Versioning）是基于 HTTP1.1 协议的拓展升级版，可以很方便的跨越网关、防火墙。使得在公网上访问特别简单，并且通过 https 的公网访问拥有非常棒的安全性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于 HTTP 协议，广泛兼容。&lt;/li&gt;
&lt;li&gt;提供文件锁定机制，支持多人协作。&lt;/li&gt;
&lt;li&gt;支持元数据（属性）的存储和管理。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;缺点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;性能相比专用文件系统协议稍差。&lt;/li&gt;
&lt;li&gt;安全性依赖于 HTTP 的基础设施（如 SSL/TLS）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;安全性&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;协议本身并没有提供加密功能，但可以通过使用 HTTPS 协议来保障数据传输的安全性；另外，支持身份验证和权限控制，可以设置访问权限，从而保障数据的安全性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;常见用途&lt;/strong&gt;：远程文件编辑、网络存储解决方案（如云端存储）。&lt;/p&gt;
&lt;p&gt;因此，在了解了上面常规的文件服务挂载协议后，对于远程数据访问，这里就可以使用 webdav 文件服务，关于该服务的搭建可以使用：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2hhY2RpYXMvd2ViZGF2&#34;&gt;https://github.com/hacdias/webdav&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;建立存放路径及生成配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $WEBDAV_PATH 为你 webdav 部署共享的路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/webdav /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token variable&#34;&gt;$WEBDAV_PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/webdav&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; config.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加配置：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;span&gt;config.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 0.0.0.0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;8081&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# TLS-related settings if you want to enable TLS directly.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token boolean important&#34;&gt;false&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;cert&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; cert.pem&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; key.pem&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Prefix to apply to the WebDAV path-ing. Default is &#39;/&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; /&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Enable or disable debug logging. Default is &#39;false&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token boolean important&#34;&gt;false&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Disable sniffing the files to detect their content type. Default is &#39;false&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;noSniff&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token boolean important&#34;&gt;false&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# The directory that will be able to be accessed by the users when connecting.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This directory will be used by users unless they have their own &#39;directory&#39; defined.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Default is &#39;.&#39; (current directory).&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;directory&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; .&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# The default permissions for users. This is a case insensitive option. Possible&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# permissions: C (Create), R (Read), U (Update), D (Delete). You can combine multiple&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# permissions. For example, to allow to read and create, set &#34;RC&#34;. Default is &#34;R&#34;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;permissions&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; R&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# The default permissions rules for users. Default is none.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Logging configuration&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token comment&#34;&gt;# Logging format (&#39;console&#39;, &#39;json&#39;). Default is &#39;console&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; console&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token comment&#34;&gt;# Enable or disable colors. Default is &#39;true&#39;. Only applied if format is &#39;console&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;colors&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token boolean important&#34;&gt;true&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;37&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token comment&#34;&gt;# Logging outputs. You can have more than one output. Default is only &#39;stderr&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;38&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;39&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; stderr&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;40&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;41&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# CORS configuration&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;42&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;cors&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;43&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token comment&#34;&gt;# Whether or not CORS configuration should be applied. Default is &#39;false&#39;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;44&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;enabled&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token boolean important&#34;&gt;false&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;45&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;credentials&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token boolean important&#34;&gt;false&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;46&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;allowed_headers&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;47&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; Depth&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;48&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;allowed_hosts&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;49&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; http&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;//localhost&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;8081&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;50&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;allowed_methods&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;51&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; GET&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;52&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;exposed_headers&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;53&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; Content&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;Length&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;54&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; Content&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;Range&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;55&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;56&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# The list of users. If the list is empty, then there will be no authentication.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;57&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Otherwise, basic authentication will automatically be configured.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;58&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;59&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# If you&#39;re delegating the authentication to a different service, you can proxy&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;60&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# the username using basic authentication, and then disable webdav&#39;s password&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;61&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# check using the option:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;62&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;63&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# noPassword: true&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;64&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;65&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token comment&#34;&gt;# Example &#39;john&#39; user with bcrypt encrypted password, with custom directory.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;66&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token key atrule&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; john&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;67&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;#123;bcrypt&amp;#125;$2y$10$zEP6oofmXFeHaeMfBNLnP.DO8m.H.Mwhd24/TOX2MWLxAExXi4qgi&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;68&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;directory&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; /data&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull hacdias/webdav:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt; webdav &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token variable&#34;&gt;$WEBDAV_PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/:/data &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/webdav/config.yml:/webdav_config.yml:ro &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;6065&lt;/span&gt;:8081 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  ghcr.io/hacdias/webdav &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-c&lt;/span&gt; /webdav_config.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参数解释：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-v /app/webdav/config.yml:/webdav_config.yml:ro&lt;/code&gt;  ：将主机的  &lt;code&gt;config.yml&lt;/code&gt;  配置文件映射为容器的  &lt;code&gt;/webdav_config.yml&lt;/code&gt;  文件，用于启动参数的获取。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 6065:8081&lt;/code&gt;  ：将容器的 8081 端口映射到主机的 6065 端口，使得 webdav 的 Web 界面可以通过主机的端口访问。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-c /webdav_config.yml&lt;/code&gt;  ：通过传参命令，指定读取（容器内路径）启动参数配置。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;通过专用的 webdav 挂载工具，输入地址加端口，在登录的时候，根据  &lt;code&gt;webdav_config.yml&lt;/code&gt;  中的  &lt;code&gt;users:&lt;/code&gt;  字段，选择不同的用户登录，则链接到不同的挂载访问路径。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-gitea/</guid>
            <title>docker 部署之 gitea 代码管控</title>
            <link>https://arachnid.cc/docker-deployment-of-gitea/</link>
            <category>docker</category>
            <pubDate>Sun, 01 Dec 2024 15:25:21 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/go-gitea/gitea/tree/v1.22.4&#34;&gt;&lt;strong&gt;Gitea&lt;/strong&gt;&lt;/a&gt; 1.22.4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621173610358.png&#34; alt=&#34;gitea login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;作为开发人员，想必正在使用 GitHub 了吧，或者没用过也听说过它的大名；而对于自己的项目，难免避免不了代码管理，如果不想受限于 GitHub 的服务器网络或者想建立一个小团队的 Git 服务，因此能有一个与 GitHub 相仿的工具将大大提高处理效率；而 Gitea 正是这样的工具，它以轻量、极易、快速著称，能够高效而轻松的帮助团队和开发者。&lt;/p&gt;
&lt;p&gt;官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLmdpdGVhLmNvbS96aC1jbi8=&#34;&gt;https://docs.gitea.com/zh-cn/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621173424402.png&#34; alt=&#34;gitea&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;为你的 gitea 存放创建数据和配置文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你存储盘的路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/gitea/data&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull gitea/gitea:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt; gitea &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/gitea/data:/data &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# 是 Gitea 标准容器的数据存储点，包含了 Git 仓库、SQLite 数据库文件、缓存文件等。&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /etc/timezone:/etc/timezone:ro &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /etc/localtime:/etc/localtime:ro &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;3000&lt;/span&gt;:3000 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2220&lt;/span&gt;:22 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  gitea/gitea&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;在这里，并没有指定 db 数据库，因此按照官方的说明，将使用 sqlite3 作为数据库校验存储；如需更改为其它数据库管理，可参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLmdpdGVhLmNvbS96aC1jbi9pbnN0YWxsYXRpb24vaW5zdGFsbC13aXRoLWRvY2tlcg==&#34;&gt;https://docs.gitea.com/zh-cn/installation/install-with-docker&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;首次安装 Gitea 后，输入  &lt;code&gt;http://localhost:3000/&lt;/code&gt;  访问初始化页面，按需设置服务器信息。第一个注册的用户账号为管理账号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;2956540-20220927193823094-433532346.png&#34; alt=&#34;image&#34; /&gt;&lt;/p&gt;
&lt;p&gt;剩下的功能，已与 GitHub 无异，这里就不一一阐述了。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-ddns/</guid>
            <title>docker 部署之 ddns-go 域名解析</title>
            <link>https://arachnid.cc/docker-deployment-of-ddns/</link>
            <category>docker</category>
            <pubDate>Sun, 01 Dec 2024 15:04:11 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;在使用该项目之前，你必须至少拥有一个可支配的域名，否则下文对您来说仅是一篇不同文章，而非操作笔记。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/jeessy2/ddns-go/tree/v6.7.6&#34;&gt;&lt;strong&gt;DDNS-GO&lt;/strong&gt;&lt;/a&gt; v6.7.6&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174156820.png&#34; alt=&#34;ddns-go login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;ddns-go 是一个简易便捷的自动更新域名解析的工具，支持多平台、多架构、多服务商、多域名。&lt;/p&gt;
&lt;h2 id=&#34;特性&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#特性&#34;&gt;#&lt;/a&gt; 特性&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;支持 Mac、Windows、Linux 系统，支持 ARM、x86 架构&lt;/li&gt;
&lt;li&gt;支持的域名服务商  &lt;code&gt;阿里云&lt;/code&gt;   &lt;code&gt;腾讯云&lt;/code&gt;   &lt;code&gt;Dnspod&lt;/code&gt;   &lt;code&gt;Cloudflare&lt;/code&gt;   &lt;code&gt;华为云&lt;/code&gt;   &lt;code&gt;Callback&lt;/code&gt;   &lt;code&gt;百度云&lt;/code&gt;   &lt;code&gt;Porkbun&lt;/code&gt;   &lt;code&gt;GoDaddy&lt;/code&gt;   &lt;code&gt;Namecheap&lt;/code&gt;   &lt;code&gt;NameSilo&lt;/code&gt;   &lt;code&gt;Dynadot&lt;/code&gt;   &lt;code&gt;DNSLA&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;支持接口 / 网卡 /&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2plZXNzeTIvZGRucy1nby93aWtpLyVFOSU4MCU5QSVFOCVCRiU4NyVFNSU5MSVCRCVFNCVCQiVBNCVFOCU4RSVCNyVFNSU4RiU5NklQJUU1JThGJTgyJUU4JTgwJTgz&#34;&gt; 命令&lt;/span&gt;获取 IP&lt;/li&gt;
&lt;li&gt;支持以服务的方式运行&lt;/li&gt;
&lt;li&gt;默认间隔 5 分钟同步一次&lt;/li&gt;
&lt;li&gt;支持同时配置多个 DNS 服务商&lt;/li&gt;
&lt;li&gt;支持多个域名同时解析&lt;/li&gt;
&lt;li&gt;支持多级域名&lt;/li&gt;
&lt;li&gt;网页中配置，简单又方便，默认勾选 &lt;code&gt;禁止从公网访问&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;网页中方便快速查看最近 50 条日志&lt;/li&gt;
&lt;li&gt;支持 Webhook 通知&lt;/li&gt;
&lt;li&gt;支持 TTL&lt;/li&gt;
&lt;li&gt;支持部分 DNS 服务商&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2plZXNzeTIvZGRucy1nby93aWtpLyVFNCVCQyVBMCVFOSU4MCU5MiVFOCU4NyVBQSVFNSVBRSU5QSVFNCVCOSU4OSVFNSU4RiU4MiVFNiU5NSVCMA==&#34;&gt;传递自定义参数&lt;/span&gt;，实现地域解析 / 多 IP 等功能&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于它的更多介绍及使用，可以参看该工程：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2plZXNzeTIvZGRucy1nbw==&#34;&gt;https://github.com/jeessy2/ddns-go&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174255920.png&#34; alt=&#34;ddns-go&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;建立存放路径：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/ddns-go&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull jeessy/ddns-go:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt; ddns-go &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--net&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;host &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/ddns-go:/root &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  jeessy/ddns-go &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-l&lt;/span&gt; :9877 &lt;span class=&#34;token parameter variable&#34;&gt;-f&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;600&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参数解释：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--net=host&lt;/code&gt;  ：使用 docker host 模式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt;  ：通过传参命令，指定监听地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-f&lt;/code&gt;  ：通过传参命令，同步间隔时间 (秒)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;通过访问  &lt;code&gt;http://localhost:9877&lt;/code&gt;  ，初次进入登录并配置管理账号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250614140959073.png&#34; alt=&#34;image-20250614140959073&#34; /&gt;&lt;/p&gt;
&lt;p&gt;登录进来后，选择你对应的域名服务器厂商并进行相应配置，不同的服务商，具体获取的 API Token 也不一样，因此这里就不多做解释了：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250614142020388.png&#34; alt=&#34;image-20250614142020388&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;ipv4&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ipv4&#34;&gt;#&lt;/a&gt; ipv4&lt;/h2&gt;
&lt;p&gt;ipv4 目前还是主流的 IP 使用方式，因此可以直接使用网卡获取的方式进行：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250614142459126.png&#34; alt=&#34;image-20250614142459126&#34; /&gt;&lt;/p&gt;
&lt;p&gt;当然，对于 ipv4 来说，并非每个人都能获取到公网 ipv4，如若没有公网 ipv4，那么则建议你停掉 ipv4 的启用更新。&lt;/p&gt;
&lt;h2 id=&#34;ipv6&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ipv6&#34;&gt;#&lt;/a&gt; ipv6&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;通过网卡获取：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;需要使用 docker host 模式，如果不能从网卡获取 240 开头的外网 ipv6 地址，那么将会显示 “没有找到可用的网卡” 不可选。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;通过命令获取：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250614142930782.png&#34; alt=&#34;image-20250614142930782&#34; /&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-6&lt;/span&gt; addr show eth0 &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;grep&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; deprecated &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;grep&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;inet6 [^f:]&#39;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;awk&lt;/span&gt; -F&lt;span class=&#34;token string&#34;&gt;&#39; &#39;&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;awk&lt;/span&gt; -F&lt;span class=&#34;token string&#34;&gt;&#39;/&#39;&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;&amp;#123;print $1&amp;#125;&#39;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;tail&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后是步骤拆解：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;ip -6 addr show eth0&lt;/code&gt; ，显示网卡（eth0）的全部 ipv6 地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;grep -v deprecated&lt;/code&gt; ，去除已经失效（deprecated）的地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;grep &#39;inet6 [^f:]&#39;&lt;/code&gt; ，显示有 ipv6 地址的那一行（不包含 f 开头的内网 ipv6 地址）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;awk -F&#39; &#39; &#39;&amp;#123;print $2&amp;#125;&#39;&lt;/code&gt; ，根据空格符号分列，打印第二列&lt;/li&gt;
&lt;li&gt;&lt;code&gt;awk -F&#39;/&#39; &#39;&amp;#123;print $1&amp;#125;&#39;&lt;/code&gt; ，根据斜杠符号 / 分列，打印第一列&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tail -1&lt;/code&gt; ，显示最后一行&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;参看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ydW9oYWkud2FuZy8yMDI0MDQvZGRucy1nby11c2Utc2hlbGwtY29tbWFuZC10by1nZXQtdmFsaWQtaXB2Ni1hZGRyLw==&#34;&gt;DDNS-GO 通过命令获取有效的 IPv6 地址&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;重置密码&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#重置密码&#34;&gt;#&lt;/a&gt; 重置密码&lt;/h2&gt;
&lt;p&gt;由于 ddns-go 设置密码必须使用复杂密码，因此如果忘记忘记，可以使用以下命令重置：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;exec&lt;/span&gt; ddns-go ./ddns-go &lt;span class=&#34;token parameter variable&#34;&gt;-resetPassword&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;123456&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; restart ddns-go&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;或者进入容器的控制终端后台：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;exec&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-it&lt;/span&gt; ddns-go /bin/sh&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;/app #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ls&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-al&lt;/span&gt; /root/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;total &lt;span class=&#34;token number&#34;&gt;16&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;drwxr-xr-x    &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt; root     root          &lt;span class=&#34;token number&#34;&gt;4096&lt;/span&gt; Dec  &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;15&lt;/span&gt;:50 &lt;span class=&#34;token builtin class-name&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;drwxr-xr-x    &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root     root          &lt;span class=&#34;token number&#34;&gt;4096&lt;/span&gt; Dec  &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;15&lt;/span&gt;:04 &lt;span class=&#34;token punctuation&#34;&gt;..&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;-rw-------    &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root     root           &lt;span class=&#34;token number&#34;&gt;180&lt;/span&gt; Dec  &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;16&lt;/span&gt;:13 .ash_history&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;-rw-------    &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root     root           &lt;span class=&#34;token number&#34;&gt;958&lt;/span&gt; Dec  &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;16&lt;/span&gt;:28 .ddns_go_config.yaml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;/app #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vi&lt;/span&gt; /root/.ddns_go_config.yaml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;通过编辑  &lt;code&gt;/root/.ddns_go_config.yaml&lt;/code&gt;  文件更改账号密码。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-gitea/</guid>
            <title>docker 部署之 calibre-web 图书馆藏</title>
            <link>https://arachnid.cc/docker-deployment-of-gitea/</link>
            <category>docker</category>
            <pubDate>Mon, 01 Jul 2024 01:21:45 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/janeczku/calibre-web/tree/0.6.23&#34;&gt;&lt;strong&gt;Calibre Web&lt;/strong&gt;&lt;/a&gt; 0.6.23&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174057431.png&#34; alt=&#34;calibre-web login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;calibre-web 是基于著名开源电子书管理工具 calibre 的 calibre-server 内容服务器提供的接口，开发了 calibre 的 Web 端 calibre-web，并提供了 Docker 安装包，使得 calibre 和 calibre-web 实现本地图书管理和在线访问。&lt;/p&gt;
&lt;p&gt;项目：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2phbmVjemt1L2NhbGlicmUtd2Vi&#34;&gt;https://github.com/janeczku/calibre-web&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621174024378.png&#34; alt=&#34;calibre-web&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;为你的 calibre-web 存放创建数据和配置文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你存储盘的路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/calibre/config /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/calibre/book&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull ghcr.io/gshang2017/calibre-web:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;calibre-web &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;PUID&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;PGID&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;DOCKER_MODS&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;linuxserver/calibre-web:calibre &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;8083&lt;/span&gt;:8083 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/calibre/config:/config &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/calibre/library:/books &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  ghcr.io/gshang2017/calibre-web&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;浏览器访问  &lt;code&gt;http://localhost:8083&lt;/code&gt;  ，这时候默认使用英文，登录界面默认账号  &lt;code&gt;admin&lt;/code&gt; ，密码  &lt;code&gt;admin123&lt;/code&gt;  ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250615230359751.png&#34; alt=&#34;image-20250615230359751&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;数据库管理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#数据库管理&#34;&gt;#&lt;/a&gt; 数据库管理&lt;/h2&gt;
&lt;p&gt;登入后会看到 Database Configuration 提示，要求指定 calibre 数据库路径：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;16971183045685.jpg&#34; alt=&#34;calibre-web&#34; /&gt;&lt;/p&gt;
&lt;p&gt;实际上就是要找  &lt;code&gt;metadata.db&lt;/code&gt;  所在的位置，而在此步骤正确设置完成之前，其他任何操作均无法进行。&lt;/p&gt;
&lt;p&gt;那么  &lt;code&gt;metadata.db&lt;/code&gt;  所在何处？  &lt;code&gt;metadata.db&lt;/code&gt;  是一个 calibre 客户端上的数据库，因此在 calibre-web 中并不存在，所以要么在电脑上安装了 calibre 的 PC 客户端上，在安装目录中找到  &lt;code&gt;metadata.db&lt;/code&gt;  文件；要么就从 calibre-web 项目中下载一个默认的 &lt;a href=&#34;https://github.com/janeczku/calibre-web/raw/master/library/metadata.db&#34;&gt; &lt;code&gt;metadata.db&lt;/code&gt; &lt;/a&gt; 文件；当然，最好还是选择第二种获取空白模板的比较好。&lt;/p&gt;
&lt;h2 id=&#34;密码修改及语言配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#密码修改及语言配置&#34;&gt;#&lt;/a&gt; 密码修改及语言配置&lt;/h2&gt;
&lt;p&gt;点击页面右上角  &lt;code&gt;admin&lt;/code&gt; ，在  &lt;code&gt;Password&lt;/code&gt;  中填入新的密码，然后点击  &lt;code&gt;Language&lt;/code&gt;  选择你需要的语言，然后点击  &lt;code&gt;Save&lt;/code&gt;  ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250616200451371.png&#34; alt=&#34;image-20250616200451371&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;上传功能&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#上传功能&#34;&gt;#&lt;/a&gt; 上传功能&lt;/h2&gt;
&lt;p&gt;点击页面右上角  &lt;code&gt;管理权限&lt;/code&gt;  -&amp;gt;  &lt;code&gt;编辑基本配置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;功能配置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;启用上传&lt;/code&gt;  -&amp;gt;  &lt;code&gt;保存&lt;/code&gt;  ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250616201224175.png&#34; alt=&#34;image-20250616201224175&#34; /&gt;&lt;/p&gt;
&lt;p&gt;上面是开启整个上传功能，并且根据提示还需要确认用户上的上传功能，因此在  &lt;code&gt;管理权限&lt;/code&gt;  -&amp;gt;  &lt;code&gt;管理用户&lt;/code&gt;  中配置确认，为你所需的账号开启上传：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250616201525076.png&#34; alt=&#34;image-20250616201525076&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;格式转换功能&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#格式转换功能&#34;&gt;#&lt;/a&gt; 格式转换功能&lt;/h2&gt;
&lt;p&gt;点击页面右上角  &lt;code&gt;管理权限&lt;/code&gt;  -&amp;gt;  &lt;code&gt;编辑基本配置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;扩展程序配置&lt;/code&gt;  ，进行以下修改后点击  &lt;code&gt;保存&lt;/code&gt;  ：&lt;/p&gt;
&lt;p&gt;Calibre 电子书转换器路径： &lt;code&gt;/usr/bin/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;KEpubify 电子书转换器路径： &lt;code&gt;/usr/local/bin/kepubify&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250616203834590.png&#34; alt=&#34;image-20250616203834590&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这个配置是官方给的固定写法，所以不做解释，有兴趣的请翻阅官方文档：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWdpc3RyeS5odWIuZG9ja2VyLmNvbS9yL2xpbnV4c2VydmVyL2NhbGlicmUtd2ViLw==&#34;&gt;https://registry.hub.docker.com/r/linuxserver/calibre-web/&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;关于 App 客户端，这里使用 “&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2dlZG9vci9sZWdhZG8=&#34;&gt;阅读&lt;/span&gt;” App：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250616225105928.png&#34; alt=&#34;image-20250616225105928&#34; /&gt;&lt;/p&gt;
&lt;p&gt;主要功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;自定义书源，自己设置规则，抓取网页数据，规则简单易懂，软件内有规则说明。&lt;/li&gt;
&lt;li&gt;列表书架，网格书架自由切换。&lt;/li&gt;
&lt;li&gt;书源规则支持搜索及发现，所有找书看书功能全部自定义，找书更方便。&lt;/li&gt;
&lt;li&gt;订阅内容，可以订阅想看的任何内容，看你想看&lt;/li&gt;
&lt;li&gt;支持替换净化，去除广告替换内容很方便。&lt;/li&gt;
&lt;li&gt;支持本地 TXT、EPUB 阅读，手动浏览，智能扫描。&lt;/li&gt;
&lt;li&gt;支持高度自定义阅读界面，切换字体、颜色、背景、行距、段距、加粗、简繁转换等。&lt;/li&gt;
&lt;li&gt;支持多种翻页模式，覆盖、仿真、滑动、滚动等。&lt;/li&gt;
&lt;li&gt;软件开源，持续优化，无广告。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;然后搭配 webdav 服务，即可链接下载 calibre-web 服务端上面的书籍了。关于如何搭建 webdav 服务，可以参看：&lt;a href=&#34;https://arachnid.cc/docker-deployment-of-webdav/&#34;&gt;docker 部署之 webdav 文件服务&lt;/a&gt; 。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-portainer/</guid>
            <title>docker 部署之 portainer 管理面板</title>
            <link>https://arachnid.cc/docker-deployment-of-portainer/</link>
            <category>docker</category>
            <pubDate>Sat, 15 Jun 2024 20:32:02 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;如果你喜欢敲命令来操作 Docker，那么这点你可以跳过了，否则可以安装 portainer 对 Docker 进行页面管理。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/eysp/portainer-ce/tree/2.19.5&#34;&gt;&lt;strong&gt;portainer-ce&lt;/strong&gt;&lt;/a&gt; 社区版 2.19.5&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621173729084.png&#34; alt=&#34;portainer login&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;portainer 管理面板是一个简洁的 dockers 容器可视化操作界面，它把常规的命令操作搬到了显示面板上，提供状态显示面板、应用模板快速部署、容器镜像网络数据卷的基本操作（包括上传下载镜像，创建容器等操作）、事件日志显示、容器控制台操作、Swarm 集群和服务等集中管理和操作、登录用户管理和控制等功能。&lt;/p&gt;
&lt;p&gt;具体介绍可以参看官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cucG9ydGFpbmVyLmlvLw==&#34;&gt;Kubernetes and Docker Container Management Software&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250621173226937.png&#34; alt=&#34;portainer&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 拉取汉化版镜像&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull &lt;span class=&#34;token number&#34;&gt;6053537&lt;/span&gt;/portainer-ce:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 启动容器&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt; portainer &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;9000&lt;/span&gt;:9000 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /var/run/docker.sock:/var/run/docker.sock &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/portainer_data:/data &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--privileged&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;true &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token number&#34;&gt;6053537&lt;/span&gt;/portainer-ce&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参数解释：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-d&lt;/code&gt;  ：以后台模式运行容器。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--name portainer&lt;/code&gt;  ：设置容器的名称为  &lt;code&gt;portainer&lt;/code&gt; 。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 9000:9000&lt;/code&gt;  ：将容器的 9000 端口映射到主机的 9000 端口，使得 portainer 的 Web 界面可以通过主机的端口访问。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-v /var/run/docker.sock:/var/run/docker.sock&lt;/code&gt;  和  &lt;code&gt;-v /app/portainer_data:/data&lt;/code&gt;  ：将主机  &lt;code&gt;/var/run/&lt;/code&gt;  目录下的  &lt;code&gt;docker.sock&lt;/code&gt;  和  &lt;code&gt;/app/portainer_data&lt;/code&gt;  目录下的  &lt;code&gt;portainer_data&lt;/code&gt;  分别映射进容器的  &lt;code&gt;/var/run/docker.sock&lt;/code&gt;  和  &lt;code&gt;/data&lt;/code&gt;  路径。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--restart always&lt;/code&gt;  ：确保容器在退出时自动重启。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;6053537/portainer-ce&lt;/code&gt; ：指定使用的 Docker 镜像。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;note：在  &lt;code&gt;docker run&lt;/code&gt;  执行后面加入  &lt;code&gt;--restart=always&lt;/code&gt;  可以使开机后会自动启动面板，否则还要自己手动设备启动。&lt;/p&gt;
&lt;p&gt;最后通过访问  &lt;code&gt;http://localhost:9000&lt;/code&gt;  来访问 portainer 的 Web 界面。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;初次访问 portainer 的 Web 界面，会提示你建立一个 admin 的管理账号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;994129-20230409002217893-356786116.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;并根据向导初始创建环境，这里选择本地环境：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;cd8b52c8bcb1da00995d18d485af4e02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;完成后你就可以管理你的所有 Docker 容器了：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250614120131550.png&#34; alt=&#34;image-20250614120131550&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;关于 App 客户端，可以使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2xvbGxpcG9wa2l0L2ZsdXR0ZXJfc2VydmVyX2JveA==&#34;&gt;ServerBox&lt;/span&gt; 服务器工具箱：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;状态图表（CPU、传感器、GPU 等）, SSH 终端，SFTP, Docker &amp;amp; 进程 &amp;amp; Systemd 管理，S.M.A.R.T ...&lt;/li&gt;
&lt;li&gt;特殊支持：生物认证、推送、桌面小部件、watchOS App、跟随系统颜色 ...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;图示：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;Screenshot_20250814_204352_ServerBox.jpg&#34; alt=&#34;Screenshot_20250814_204352_ServerBox&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;Screenshot_20250814_204705_ServerBox.jpg&#34; alt=&#34;Screenshot_20250814_204705_ServerBox&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;Screenshot_20250814_204526_ServerBox.jpg&#34; alt=&#34;Screenshot_20250814_204526_ServerBox&#34; /&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
