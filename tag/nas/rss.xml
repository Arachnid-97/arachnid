<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>命运转轮 • Posts by &#34;nas&#34; tag</title>
        <link>https://arachnid.cc</link>
        <description>不曾亏欠, 不曾辜负, 如此足矣</description>
        <language>zh-CN</language>
        <pubDate>Wed, 19 Mar 2025 19:11:35 +0800</pubDate>
        <lastBuildDate>Wed, 19 Mar 2025 19:11:35 +0800</lastBuildDate>
        <category>EDA</category>
        <category>history</category>
        <category>电子</category>
        <category>硬件设计</category>
        <category>C</category>
        <category>MCU</category>
        <category>Ubuntu</category>
        <category>git</category>
        <category>工具</category>
        <category>hexo</category>
        <category>gcc</category>
        <category>IDE</category>
        <category>SQL</category>
        <category>JSON</category>
        <category>Linux</category>
        <category>linux_c</category>
        <category>arm_linux</category>
        <category>imx6ull</category>
        <category>docker</category>
        <category>nas</category>
        <category>RTOS</category>
        <category>FreeRTOS</category>
        <category>算法</category>
        <category>DMX512</category>
        <category>modbus</category>
        <category>Modem</category>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-jellyfin/</guid>
            <title>docker 部署之 jellyfin 家庭影院</title>
            <link>https://arachnid.cc/docker-deployment-of-jellyfin/</link>
            <category>docker</category>
            <category>nas</category>
            <pubDate>Wed, 19 Mar 2025 19:11:35 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/paperless-ngx/paperless-ngx/tree/v2.16.3&#34;&gt;&lt;strong&gt;Paperless-ngx&lt;/strong&gt;&lt;/a&gt; 10.10.6&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814212532995.png&#34; alt=&#34;image-20250814212532995&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;目前市面上比较主流的家庭媒体服务器的选择主要有三个：Plex、Emby 和 Jellyfin；其中前两款对于基本使用免费，但对于像通过显卡硬件解码等功能是需付费订阅才能使用；而 Jellyfin 是 Emby 某个版本开源后独立出来的一个影音服务软件，是完全开源和免费的。Jellyfin 在一些大佬改装配置好驱动后能适应不同的显卡硬转，以此达到在外网播放的情况下使用硬件转码流畅播放。&lt;/p&gt;
&lt;p&gt;官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9qZWxseWZpbi5vcmcv&#34;&gt;https://jellyfin.org/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250814210117624.png&#34; alt=&#34;image-20250814210117624&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;为你的 jellyfin 存放创建缓存和配置文件夹：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的影视存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/jellyfin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/jellyfin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; cache config&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/media&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;硬解支持&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#硬解支持&#34;&gt;#&lt;/a&gt; 硬解支持&lt;/h2&gt;
&lt;p&gt;要让 jellyfin 的 docker 容器调用核显驱动（即人们常说的开启硬解），要满足两个条件：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;拥有支持视频解码的核心显卡，且核心显卡的&lt;strong&gt;驱动程序&lt;/strong&gt;运行正常；&lt;/li&gt;
&lt;li&gt;将核显驱动&lt;strong&gt;直通&lt;/strong&gt;给 docker 容器，并赋予 docker 容器调用该驱动的权限。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;对于系统是否满足上述第一个条件，可以输入以下命令进行检验：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ls&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-l&lt;/span&gt; /dev/dri&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;total &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;drwxr-xr-x &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt; root root         &lt;span class=&#34;token number&#34;&gt;80&lt;/span&gt; Jun &lt;span class=&#34;token number&#34;&gt;20&lt;/span&gt; 02:04 by-path&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;crw-rw---- &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root video  &lt;span class=&#34;token number&#34;&gt;226&lt;/span&gt;,   &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; Jun &lt;span class=&#34;token number&#34;&gt;20&lt;/span&gt; 02:04 card0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;crw-rw---- &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; root render &lt;span class=&#34;token number&#34;&gt;226&lt;/span&gt;, &lt;span class=&#34;token number&#34;&gt;128&lt;/span&gt; Jun &lt;span class=&#34;token number&#34;&gt;20&lt;/span&gt; 02:04 renderD128&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;终端返回的结果有  &lt;code&gt;renderD128&lt;/code&gt;  ，那么它即对应你的核显，硬件系统满足视频解码的基本条件。&lt;/p&gt;
&lt;p&gt;接下来为这个核显驱动授予 docker 容器的驱动权限；从上面可以看到  &lt;code&gt;crw-rw---- 1 root render  226&lt;/code&gt;  中， &lt;code&gt;root&lt;/code&gt;  为管理用户，  &lt;code&gt;render&lt;/code&gt;  为所在组，如果你不想麻烦可以在部署的时候直接赋予 root 权限，若是想分组或分用户管理，那就需要分别获取对应的用户 UID 或所属组 GID，通过如下命令获取（不同发行版请根据对应命令获取）：&lt;/p&gt;
&lt;p&gt;获取 UID：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# &amp;lt;GROUP&gt; 为查询的用户&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-u&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;USER_NAME&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;获取 GID：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# &amp;lt;GROUP&gt; 为查询的组名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;getent group &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;GROUP_NAME&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;cut&lt;/span&gt; -d: &lt;span class=&#34;token parameter variable&#34;&gt;-f3&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;运行 Docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull nyanmisaka/jellyfin:latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; run &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--name&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;jellyfin &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;PUID&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;PGID&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-e&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Asia/Shanghai &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;8096&lt;/span&gt;:8096 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/jellyfin/config:/config &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;-v&lt;/span&gt; /app/jellyfin/cache:/cache &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--mount&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;bind,source&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/srv/dev-disk-by-uuid-fb7da335-33b8-4fac-8bbe-24c4cd13ccf7/media,destination&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/media,ro&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;true &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--device&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/dev/dri/renderD128 &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token parameter variable&#34;&gt;--restart&lt;/span&gt; always &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  nyanmisaka/jellyfin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：如果有需要用到不同的管理用户或管理组，那么在使用硬解的前提，需要获取对应 UID 和 GID 填写到部署上，否则后面使用硬解将会有问题，具体获取看上面。&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;通过浏览器访问：  &lt;code&gt;http://localhost:8096&lt;/code&gt;  ，按照指示一步步初始化配置：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816144652927.png&#34; alt=&#34;image-20250816144652927&#34; /&gt;&lt;/p&gt;
&lt;p&gt;配置你的管理员账号：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816144721170.png&#34; alt=&#34;image-20250816144721170&#34; /&gt;&lt;/p&gt;
&lt;p&gt;设置媒体读取路径，这里可以先跳过，后面进入控制台设置：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816144851150.png&#34; alt=&#34;image-20250816144851150&#34; /&gt;&lt;/p&gt;
&lt;p&gt;如需云端访问，可开启以下设置：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816145031703.png&#34; alt=&#34;image-20250816145031703&#34; /&gt;&lt;/p&gt;
&lt;p&gt;最后完成初始配置后，即可重新登录进入主界面：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816145114308.png&#34; alt=&#34;image-20250816145114308&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816145443332.png&#34; alt=&#34;image-20250816145443332&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;硬解配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#硬解配置&#34;&gt;#&lt;/a&gt; 硬解配置&lt;/h2&gt;
&lt;p&gt;点击左上角：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816094625543.png&#34; alt=&#34;image-20250816094625543&#34; /&gt;&lt;/p&gt;
&lt;p&gt;进入 &amp;quot;控制台&amp;quot; ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816094722765.png&#34; alt=&#34;image-20250816094722765&#34; /&gt;&lt;/p&gt;
&lt;p&gt;在 jellyfin 容器中的 shell 终端执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls /dev/dri
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;确认显卡直通，正常将会显示：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816105816703.png&#34; alt=&#34;image-20250816105816703&#34; /&gt;&lt;/p&gt;
&lt;p&gt;记录并配置解码器：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816095148702.png&#34; alt=&#34;image-20250816095148702&#34; /&gt;&lt;/p&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬件加速这里：下拉选择 &amp;quot;Video Acceleartion API (VAAP)&amp;quot; 或者 &amp;quot;Intel QuickSync (QSV)&amp;quot; ，不是太老的核 / 独显卡，建议选 QSV；&lt;/li&gt;
&lt;li&gt;如果播放失败，则可以尝试关闭 &amp;quot;启用低电压模式的 Intel H.264 硬件编码器&amp;quot; 和 &amp;quot;启用低电压模式的 Intel HEVC 硬件编码器&amp;quot; ;&lt;/li&gt;
&lt;li&gt;如需播放杜比视界，必须关闭 &amp;quot;启用 VPP 色调映射&amp;quot; ;&lt;/li&gt;
&lt;li&gt;如需支持杜比视界格式的 HDR 视频，则必须打开 &amp;quot;首选系统原生的 DXVA 或 VA-API 硬件解码器&amp;quot; ;&lt;/li&gt;
&lt;li&gt;最后根据实际情况选中 &amp;quot;允许实时提取字幕&amp;quot; 和 &amp;quot;限制转码速度&amp;quot; ；&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;测试转码：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816105231987.png&#34; alt=&#34;image-20250816105231987&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816103820476.png&#34; alt=&#34;image-20250816103820476&#34; /&gt;&lt;/p&gt;
&lt;p&gt;硬解码资源占用：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816104002038.png&#34; alt=&#34;image-20250816104002038&#34; /&gt;&lt;/p&gt;
&lt;p&gt;如果不使用硬解码，那么你将会看到 CPU 占用 95% 以上的使用率，并且对于低性能 CPU 来说，将会播放卡顿：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816104339045.png&#34; alt=&#34;image-20250816104339045&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;添加插件&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#添加插件&#34;&gt;#&lt;/a&gt; 添加插件&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;控制台&lt;/code&gt;  -&amp;gt;  &lt;code&gt;目录&lt;/code&gt;  -&amp;gt;  &lt;code&gt;存储库&lt;/code&gt;  -&amp;gt; 点击加号进行添加&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# Jellyfin Stable&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;http://fra1.mirror.jellyfin.org/releases/plugin/manifest-stable.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-metashark&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://github.com/cxfksword/jellyfin-plugin-metashark/releases/download/manifest/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-metatube&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://raw.githubusercontent.com/metatube-community/jellyfin-plugin-metatube/dist/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-bangumi&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://kookxiang.github.io/jellyfin-plugin-bangumi/repository.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugin-manifest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://raw.githubusercontent.com/danieladov/JellyfinPluginManifest/master/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# jellyfin-plugins-manifest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;https://www.iamparadox.dev/jellyfin/plugins/manifest.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果加载完以上插件后，可以按需安装相应插件，一般用以下插件足矣：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816110312936.png&#34; alt=&#34;image-20250816110312936&#34; /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;File Transformation 和 Media Bar 是用于配置主题的，也即前面看到的电影背景封面及简介显示的轮播滚动。&lt;/li&gt;
&lt;li&gt;SkinManager 同样也是配置主题，目前里面支持九个主题配置。&lt;/li&gt;
&lt;li&gt;Bangumi 主要用于动漫刮削及动漫信息同步。&lt;/li&gt;
&lt;li&gt;MetaShark 和 MetaTube 则是用于电影和 xxx 的信息刮削。&lt;/li&gt;
&lt;li&gt;其余的部分也是用于刮削及资源整理的，具体可测试使用。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;如果不想用网页端观看，而使用客户端，那么关于客户端应用可以在以下链接获取所需应用：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9qZWxseWZpbi5vcmcvZG93bmxvYWRz&#34;&gt;https://jellyfin.org/downloads&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在这里，你也可以使用第三方的客户端 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2phcm5lZGVtZXVsZW1lZXN0ZXIvZmluZHJvaWQ=&#34;&gt;Findroid&lt;/span&gt; ：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816114435404.png&#34; alt=&#34;image-20250816114435404&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816114441878.png&#34; alt=&#34;image-20250816114441878&#34; /&gt;&lt;/p&gt;
&lt;p&gt;目前使用下来，有个致命缺陷，混合类型和音乐类型的合集是无法显示的，只能电影或电视剧。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/docker-deployment-of-navidrome/</guid>
            <title>docker 部署之 navidrome 音乐播放</title>
            <link>https://arachnid.cc/docker-deployment-of-navidrome/</link>
            <category>docker</category>
            <category>nas</category>
            <pubDate>Wed, 19 Mar 2025 19:11:35 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;Version：&lt;a href=&#34;https://github.com/navidrome/navidrome/tree/v0.55.2&#34;&gt;&lt;strong&gt;Navidrome&lt;/strong&gt;&lt;/a&gt; 0.55.2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816115804062.png&#34; alt=&#34;image-20250816115804062&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#介绍&#34;&gt;#&lt;/a&gt; 介绍&lt;/h1&gt;
&lt;p&gt;Navidrome 是一款开源的、轻量级的、自托管的音乐服务器，兼容 Subsonic API，可以通过网页或客户端应用访问和播放音乐。&lt;/p&gt;
&lt;p&gt;特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;处理超大音乐收藏&lt;/li&gt;
&lt;li&gt;几乎可串流任何音频格式&lt;/li&gt;
&lt;li&gt;读取并使用所有精心策划的元数据&lt;/li&gt;
&lt;li&gt;对合集（Various Artists 专辑）和盒装（多碟专辑）的强大支持&lt;/li&gt;
&lt;li&gt;多用户，每个用户都有自己的播放次数、播放列表、收藏夹等。&lt;/li&gt;
&lt;li&gt;资源使用率极低&lt;/li&gt;
&lt;li&gt;多平台，可在 macOS、Linux 和 Windows 上运行。还提供 Docker 映像&lt;/li&gt;
&lt;li&gt;所有主要平台（包括 Raspberry Pi）的二进制文件均可随时使用&lt;/li&gt;
&lt;li&gt;自动监控资料库变化，导入新文件并重新加载新元数据&lt;/li&gt;
&lt;li&gt;基于 Material UI 的可主题化、现代化和响应式网络界面&lt;/li&gt;
&lt;li&gt;与所有 Subsonic / Madsonic / Airsonic 客户端兼容&lt;/li&gt;
&lt;li&gt;即时转码可按用户 / 播放器设置。支持 Opus 编码&lt;/li&gt;
&lt;li&gt;翻译成各种语言&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816143236595.png&#34; alt=&#34;image-20250816143236595&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;创建 navidrome 数据文件夹及音乐存放位置：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# $PATH 为你的相册存放路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /app/navidrome/data&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; /&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token environment constant&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;/music&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /app/navidrome&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加  &lt;code&gt;docker-compose.yml&lt;/code&gt;  配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost:/app/navidrome] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;touch&lt;/span&gt; docker-compose.yml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;span&gt;docker-compose.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;navidrome&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; deluan/navidrome&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;latest&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; navidrome&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; navidrome&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 0&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# should be owner of volumes&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;4533:4533&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; always&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; network&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token comment&#34;&gt;# Optional: put your config options customization here. Examples:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SCANNER_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SCANNER_SCHEDULE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;@weekly&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_LOGLEVEL&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; info&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SESSIONTIMEOUT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; 12h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_BASEURL&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_DEFAULTLANGUAGE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;zh-Hans&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_LASTFM_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_LISTENBRAINZ_ENABLED&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLEDOWNLOADS&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLEFAVOURITES&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;true&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLESHARING&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLESTARRATING&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;false&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_ENABLETRANSCODINGCONFIG&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;true&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_TRANSCODINGCACHESIZE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;400MB&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_IMAGECACHESIZE&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;100MB&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token key atrule&#34;&gt;ND_SCANNER_ARTISTJOINER&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;amp;&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/app/navidrome/data:/data&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/&amp;lt;$PATH&gt;/music:/music:ro&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token key atrule&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;driver&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; bridge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;修改完成后，使用以下命令进行部署：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker-compose&lt;/span&gt; up &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;主要参数说明&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#主要参数说明&#34;&gt;#&lt;/a&gt; 主要参数说明&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;关于环境变量：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ND_SCANNER_ENABLED&lt;/code&gt;  ：该字段用于是否启用计划扫描功能，默认是不开启，如果设为  &lt;code&gt;true&lt;/code&gt;  ，那么将根据  &lt;code&gt;ND_SCANNER_SCHEDULE&lt;/code&gt;  字段参数进行定时扫描。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_SCANNER_SCHEDULE&lt;/code&gt;  ：通过 Cron 语法定义自动扫描的时间，可以利用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jcm9udGFiLmd1cnUv&#34;&gt;https://crontab.guru/&lt;/span&gt; 生成你所需的计划时间。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_LOGLEVEL&lt;/code&gt;  ：如其名，用于记录调试信息的等级，支持  &lt;code&gt;error&lt;/code&gt; ,  &lt;code&gt;warn&lt;/code&gt; ,  &lt;code&gt;info&lt;/code&gt; ,  &lt;code&gt;debug&lt;/code&gt; ,  &lt;code&gt;trace&lt;/code&gt;  。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_SESSIONTIMEOUT&lt;/code&gt;  ：用于设置 web UI 登录后无操作的退出时间。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_BASEURL&lt;/code&gt;  ：该字段用于配置 navidrome 的代理地址，不需要则为空。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_DEFAULTLANGUAGE&lt;/code&gt;  ：设置默认登录 web UI 时所显示的语言文本，支持语言可看 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL25hdmlkcm9tZS9uYXZpZHJvbWUvdHJlZS9tYXN0ZXIvcmVzb3VyY2VzL2kxOG4=&#34;&gt;resources/i18n&lt;/span&gt; ；对于中文语言有简体和繁体之分，所以要明确格式，eg：中文简体 -  &lt;code&gt;zh-Hans&lt;/code&gt;  ，而中文繁体则为  &lt;code&gt;zh-Hant&lt;/code&gt;  。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_LASTFM_ENABLED&lt;/code&gt;  ：是否需要集成 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubGFzdC5mbS8=&#34;&gt;Last.fm&lt;/span&gt;，一般用来获取艺人信息，默认打开，如果使用则需要配置  &lt;code&gt;ND_LASTFM_APIKEY&lt;/code&gt;  、 &lt;code&gt;ND_LASTFM_SECRET&lt;/code&gt;  。由于 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL0xhc3QuZm0=&#34;&gt;Last.fm&lt;/span&gt; 是在国外架设服务器，国内访问时常抽风，因此建议关闭。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_LISTENBRAINZ_ENABLED&lt;/code&gt;  ：是否需要集成 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9saXN0ZW5icmFpbnoub3JnLw==&#34;&gt;Listen Brainz&lt;/span&gt;，用于补全专辑 / 歌曲信息、封面信息等标签信息，默认打开；可用  &lt;code&gt;ND_LISTENBRAINZ_BASEURL&lt;/code&gt;  字段覆盖 Listen Brainz 默认地址，例如使用镜像 Listen Brainz 替代。由于 Listen Brainz 是在国外架设服务器，国内访问时常抽风，因此建议关闭。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLEDOWNLOADS&lt;/code&gt;  ：是否允许从 Web 界面下载音乐 / 专辑 / 播放列表，建议关闭，默认打开。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLEFAVOURITES&lt;/code&gt;  ：是否允许从 Web 界面星标或收藏 歌曲 / 专辑 / 艺术家。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLESHARING&lt;/code&gt;  ：是否允许创建分享链接。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLESTARRATING&lt;/code&gt;  ：是否在 Web 界面启用 5 星评分机制。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_ENABLETRANSCODINGCONFIG&lt;/code&gt;  ：是否允许在 Web 界面修改转码设置。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_TRANSCODINGCACHESIZE&lt;/code&gt;  ：用于设置转码缓存大小，设为 0 时禁用转码缓存，默认为 100MB。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_IMAGECACHESIZE&lt;/code&gt;  ：用于设置媒体图像缓存大小，设为 0 时禁用媒体图像缓存，默认为 100MB。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ND_SCANNER_ARTISTJOINER&lt;/code&gt;  ：当存在多个艺术家时，用于界分每个艺术家，而分割的字符则由该字段控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;关于多个艺术家显示：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubmF2aWRyb21lLm9yZy9kb2NzL3VzYWdlL2N1c3RvbXRhZ3MvI2NvbmZpZ3VyaW5nLWN1c3RvbS10YWdz&#34;&gt;Configuring custom tags&lt;/span&gt; 中有提到：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816225344016.png&#34; alt=&#34;image-20250816225344016&#34; /&gt;&lt;/p&gt;
&lt;p&gt;因此，除了上面的  &lt;code&gt;ND_SCANNER_ARTISTJOINER&lt;/code&gt;  字段能定义总的艺术家切割字符外，还可以自定义详细的不同分类的切割字符，因此，我们可以在  &lt;code&gt;navidrome.toml&lt;/code&gt;  文件中编写需要的信息：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /app/navidrome/data/navidrome.toml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;写入：&lt;/p&gt;
&lt;figure class=&#34;highlight toml&#34;&gt;&lt;figcaption data-lang=&#34;TOML&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key property&#34;&gt;Tags.Artist.Split&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;/&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; / &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; feat. &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;feat.&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; feat &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; ft. &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34; ft &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;; &#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;amp;&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key property&#34;&gt;Tags.Roles.Split&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;/&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;;&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;&amp;amp;&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Tags.Artist.Split&lt;/code&gt;  ：表示存在多个艺术家 / 专辑艺术家时，所识别分割的匹配字符。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tags.Roles.Split&lt;/code&gt;  ：表示除了  &lt;code&gt;Tags.Artist.Split&lt;/code&gt;  定义的艺术家和专辑艺术家以外的，所有剩余的作词家、作曲家以及编曲家等存在多个时，其所匹配分割的字符。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果容器启动后找不到  &lt;code&gt;navidrome.toml&lt;/code&gt;  文件识别，可以在  &lt;code&gt;ND_CONFIGFILE&lt;/code&gt;  字段中指定位置（该字段默认为  &lt;code&gt;&amp;quot;./navidrome.toml&amp;quot;&lt;/code&gt; ）。&lt;/p&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;关于其它的变量属性可以参看官方说明：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubmF2aWRyb21lLm9yZy9kb2NzL3VzYWdlL2NvbmZpZ3VyYXRpb24tb3B0aW9ucy8jZW52aXJvbm1lbnQtdmFyaWFibGVz&#34;&gt;https://www.navidrome.org/docs/usage/configuration-options/#environment-variables&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;关于加载外部配置属性参数可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL25hdmlkcm9tZS9uYXZpZHJvbWUvYmxvYi9tYXN0ZXIvcmVzb3VyY2VzL21hcHBpbmdzLnlhbWw=&#34;&gt;https://github.com/navidrome/navidrome/blob/master/resources/mappings.yaml&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;音乐库分类管理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#音乐库分类管理&#34;&gt;#&lt;/a&gt; 音乐库分类管理&lt;/h2&gt;
&lt;p&gt;通常情况下音乐库的结构分类应该是：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;.
|-- Artist A
|   |-- Albums A
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- Albums B
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- ......
|   `-- Albums n
|       |-- Music A
|       |-- Music B
|       |-- ......
|       `-- Music n
|-- Artist B
|   |-- Albums A
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- Albums B
|   |   |-- Music A
|   |   |-- Music B
|   |   |-- ......
|   |   `-- Music n
|   |-- ......
|   `-- Albums n
|       |-- Music A
|       |-- Music B
|       |-- ......
|       `-- Music n
|-- ......
`-- Artist n
    |-- Albums A
    |   |-- Music A
    |   |-- Music B
    |   |-- ......
    |   `-- Music n
    |-- Albums B
    |   |-- Music A
    |   |-- Music B
    |   |-- ......
    |   `-- Music n
    |-- ......
    `-- Albums n
        |-- Music A
        |-- Music B
        |-- ......
        `-- Music n
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;由于在部署 navidrome 的时候没有集成 lastfm, spotify, deezer 组件，因此，在查看艺术家的时候是没有相应的图片的，所以你可以在你的对应艺术家分类目录下放置艺术家图片即可显示，图片命名以  &lt;code&gt;ND_ARTISTARTPRIORITY&lt;/code&gt;  字段的参数为匹配项，默认为  &lt;code&gt;&amp;quot;artist.*, album/artist.*, external&amp;quot;&lt;/code&gt;  ；&lt;/p&gt;
&lt;p&gt;eg：&lt;/p&gt;
&lt;p&gt;在目录下放置  &lt;code&gt;artist.jpg&lt;/code&gt;  艺术家封图：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817120342493.png&#34; alt=&#34;image-20250817120342493&#34; /&gt;&lt;/p&gt;
&lt;p&gt;在查看对应 artist 显示，可以看到已经识别导入了（需要完全扫描一次）：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817120526221.png&#34; alt=&#34;image-20250817120526221&#34; /&gt;&lt;/p&gt;
&lt;p&gt;而对于 artist 本地传记显示，目前版本还不支持，但已经有需求提出了，具体可看 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL25hdmlkcm9tZS9uYXZpZHJvbWUvaXNzdWVzLzk2MQ==&#34;&gt;https://github.com/navidrome/navidrome/issues/961&lt;/span&gt; ；当然，如果对自己网络访问国外服务器有信心的，可以启用  &lt;code&gt;ND_LASTFM_ENABLED&lt;/code&gt;  or  &lt;code&gt;ND_SPOTIFY_ID&lt;/code&gt;  项，即可实现 artist 封图和简介等相关信息：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817140334532.png&#34; alt=&#34;image-20250817140334532&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#使用&#34;&gt;#&lt;/a&gt; 使用&lt;/h1&gt;
&lt;p&gt;浏览器访问  &lt;code&gt;http://localhost:4533&lt;/code&gt;  ，首次进入需要设置账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817135949534.png&#34; alt=&#34;image-20250817135949534&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;音乐标签信息&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#音乐标签信息&#34;&gt;#&lt;/a&gt; 音乐标签信息&lt;/h2&gt;
&lt;p&gt;对于歌曲的标签信息写入，只要符合常规的 &amp;quot;ID3Tags&amp;quot; 都能读取，像中文这种，推荐使用 &amp;quot;ID3v2.3 UTF-16&amp;quot; 格式。关于 navidrome 中定制的 tag，可以参看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubmF2aWRyb21lLm9yZy9kb2NzL3VzYWdlL3RhZ2dpbmctZ3VpZGVsaW5lcy8=&#34;&gt;https://www.navidrome.org/docs/usage/tagging-guidelines/&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;安可&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安可&#34;&gt;#&lt;/a&gt; 安可&lt;/h1&gt;
&lt;p&gt;Navidrome 除了网页界面，还支持各种第三方客户端：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iOS: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL21pY2hhZWxzYXBwcy5kay9wbGF5c3ViYXBwLw==&#34;&gt;play:Sub&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdWJzdHJlYW1lcmFwcC5jb20v&#34;&gt;substreamer&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0JMZWVFWi9hbXBlcmZ5I3JlYWRtZQ==&#34;&gt;Amperfy&lt;/span&gt; and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pc3ViLmFwcC8=&#34;&gt;iSub&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Android: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0NhcHBpZWxsb0FudG9uaW8vdGVtcG8=&#34;&gt;Tempo&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3Nhd3llcmYvQ2FzdGFmaW9yZQ==&#34;&gt;Castafiore&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wbGF5Lmdvb2dsZS5jb20vc3RvcmUvYXBwcy9kZXRhaWxzP2lkPWdpdGh1Yi5kYW5lcmVuMjAwNS5kc3Vi&#34;&gt;DSub&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2F1c3RpbnJpZWQvc3VidHJhY2tzI3JlYWRtZQ==&#34;&gt;Subtracks&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdWJzdHJlYW1lcmFwcC5jb20v&#34;&gt;substreamer&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3VsdHJhc29uaWMvdWx0cmFzb25pYyNyZWFkbWU=&#34;&gt;Ultrasonic&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL252bGxzdm0vQXVkaW5hdXQjcmVhZG1l&#34;&gt;Audinaut&lt;/span&gt; and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tdXNpYy5hcXpzY24uY24v&#34;&gt;音流&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Web: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3BlZ3Vlcm9zZGMvc3VicGxheWVyI3JlYWRtZQ==&#34;&gt;Subplayer&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3RhbWxhbmQvYWlyc29uaWMtcmVmaXgjcmVhZG1l&#34;&gt;Airsonic Refix&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3NocmltcHphLmdpdGh1Yi5pby9hdXJpYWwv&#34;&gt;Aurial&lt;/span&gt;, &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2phbXN0YXNoLmNvbS8=&#34;&gt;Jamstash&lt;/span&gt; and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3Auc3ViZmlyZXBsYXllci5uZXQv&#34;&gt;Subfire&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Desktop: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdWJsaW1lbXVzaWMuYXBwLw==&#34;&gt;Sublime Music&lt;/span&gt; (Linux) and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2plZmZ2bGkvc29uaXhk&#34;&gt;Sonixd&lt;/span&gt; (Windows/Linux/macOS)&lt;/li&gt;
&lt;li&gt;CLI: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3RyeWZmZWwvamVsbHljbGkjcmVhZG1l&#34;&gt;Jellycli&lt;/span&gt; (Windows/Linux) and &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3dpbGRleWVkc2tpZXMvc3RtcCNyZWFkbWU=&#34;&gt;STMP&lt;/span&gt; (Linux/macOS)&lt;/li&gt;
&lt;li&gt;Connected Speakers:
&lt;ul&gt;
&lt;li&gt;Sonos: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3NpbW9qZW5raS9ib25vYiNyZWFkbWU=&#34;&gt;bonob&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Alexa: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3NyaWNodGVyL2Fza3NvbmljI3JlYWRtZQ==&#34;&gt;AskSonic&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Other:
&lt;ul&gt;
&lt;li&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3dhcndpY2toL3BsdWdpbi5hdWRpby5zdWJzb25pYyNyZWFkbWU=&#34;&gt;Subsonic Kodi Plugin&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL0JvYkhhc05vU291bC9wbHVnaW4uYXVkaW8ubmF2aWRyb21lI3JlYWRtZQ==&#34;&gt;Navidrome Kodi Plugin&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2ZhbmdmdWZ1L2h0dHBkaXJmcyNyZWFkbWU=&#34;&gt;HTTPDirFS&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在这里，安卓手机客户端可以尝试使用 Temop 或 Castafiore，当然还有其它的，具体哪个好用、谁才适合，则看自己的使用需求了。&lt;/p&gt;
&lt;p&gt;下面为 Tempo 的使用界面：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816160120279.png&#34; alt=&#34;image-20250816160120279&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816160132127.png&#34; alt=&#34;image-20250816160132127&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250816160140991.png&#34; alt=&#34;image-20250816160140991&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Castafiore 使用界面：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817151224772.png&#34; alt=&#34;image-20250817151224772&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817151230932.png&#34; alt=&#34;image-20250817151230932&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20250817151240959.png&#34; alt=&#34;image-20250817151240959&#34; /&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/omv6-install/</guid>
            <title>debian 11 桌面安装 OMV 6</title>
            <link>https://arachnid.cc/omv6-install/</link>
            <category>Linux</category>
            <category>nas</category>
            <pubDate>Sat, 13 Jan 2024 21:04:04 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;debian-安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#debian-安装&#34;&gt;#&lt;/a&gt; Debian 安装&lt;/h1&gt;
&lt;p&gt;需要注意的几个点是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装语言的时候选择英文安装，否者会造成部分乱码，至于后面想要使用中文，安装完成后再配置就好了。&lt;/li&gt;
&lt;li&gt;配置软件包不需要选择网络镜像，后期再配置镜像源。&lt;/li&gt;
&lt;li&gt;勾选 ssh 服务，以方便远程操作；至于是否选择图形界面，随个人喜好。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;基本配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#基本配置&#34;&gt;#&lt;/a&gt; 基本配置&lt;/h2&gt;
&lt;h3 id=&#34;添加-sudo-管理组&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#添加-sudo-管理组&#34;&gt;#&lt;/a&gt; 添加 sudo 管理组&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;your_name is not in the sudoers file. This incident will be reported.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;出现这种情况一般是你用普通用户键入  &lt;code&gt;sudo&lt;/code&gt;  命令，但这个用户又没有加入  &lt;code&gt;sudo&lt;/code&gt;  组上面，导致权限不够。&lt;/p&gt;
&lt;p&gt;解决（以下操作皆在 root 下执行）：&lt;/p&gt;
&lt;p&gt;通过追加到 sudo 组的形式，使用命令：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 追加（append）用户到指定组（Group）&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;usermod&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-a&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-G&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; your_name&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;又或者，以修改  &lt;code&gt;/etc/sudoers&lt;/code&gt;  文件的形式：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;visudo&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后移动光标，在  &lt;code&gt;# User privilege specification&lt;/code&gt;  下面添加  &lt;code&gt;your_name ALL=(ALL:ALL) ALL&lt;/code&gt;  ，根据提示  &lt;code&gt;写入 ^O&lt;/code&gt;  ， &lt;code&gt;回车 Enter&lt;/code&gt;  确认保存，  &lt;code&gt;退出 ^X&lt;/code&gt;   ，得到：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /etc/sudoers&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;#&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# This &lt;span class=&#34;token function&#34;&gt;file&lt;/span&gt; MUST be edited with the &lt;span class=&#34;token string&#34;&gt;&#39;visudo&#39;&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;command&lt;/span&gt; as root.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;#&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# Please consider adding &lt;span class=&#34;token builtin class-name&#34;&gt;local&lt;/span&gt; content &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; /etc/sudoers.d/ instead of&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# directly modifying this file.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;#&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# See the &lt;span class=&#34;token function&#34;&gt;man&lt;/span&gt; page &lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; details on how to &lt;span class=&#34;token function&#34;&gt;write&lt;/span&gt; a sudoers file.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;#&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Defaults	env_reset&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Defaults	mail_badpass&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Defaults	&lt;span class=&#34;token assign-left variable&#34;&gt;secure_path&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# Host &lt;span class=&#34;token builtin class-name&#34;&gt;alias&lt;/span&gt; specification&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# User &lt;span class=&#34;token builtin class-name&#34;&gt;alias&lt;/span&gt; specification&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# Cmnd &lt;span class=&#34;token builtin class-name&#34;&gt;alias&lt;/span&gt; specification&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# User privilege specification&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;root	&lt;span class=&#34;token assign-left variable&#34;&gt;ALL&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;ALL:ALL&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; ALL&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;your_name	&lt;span class=&#34;token assign-left variable&#34;&gt;ALL&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;ALL:ALL&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; ALL&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# Allow members of group &lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; to execute any &lt;span class=&#34;token builtin class-name&#34;&gt;command&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;%sudo	 &lt;span class=&#34;token assign-left variable&#34;&gt;ALL&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;ALL:ALL&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; ALL&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;# See sudoers&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;more&lt;/span&gt; information on &lt;span class=&#34;token string&#34;&gt;&#34;@include&#34;&lt;/span&gt; directives:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;@includedir /etc/sudoers.d&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;su&lt;/code&gt;  带有  &lt;code&gt;-&lt;/code&gt;  ，这和  &lt;code&gt;su&lt;/code&gt;  是不同的，在用命令  &lt;code&gt;su&lt;/code&gt;  的时候只是切换到 root，但没有把 root 的环境变量传过去，还是当前用户的环境变量，用  &lt;code&gt;su -&lt;/code&gt;  命令会将环境变量也一起带过去，就像和  &lt;code&gt;root&lt;/code&gt;  登录一样。关于  &lt;code&gt;su -&lt;/code&gt;  的分析可参看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jbG91ZGJvb2wuY29tL2Rwa2ctcmVjb25maWd1cmUtYmFzaC1jb21tYW5kLW5vdC1mb3VuZC5odG1s&#34;&gt;dpkg-reconfigure 命令找不到问题解决&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;避免提示光盘安装软件包&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#避免提示光盘安装软件包&#34;&gt;#&lt;/a&gt; 避免提示光盘安装软件包&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Media change: please insert the disc labeled &#39;Debian GNU/Linux xxx DVD&#39; Media change: please insert the disc labeled.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在 Debian 系统中，如果您碰巧使用 DVD 安装，当你调用  &lt;code&gt;apt&lt;/code&gt;  时，会抛出一个错误消息，表示存储库 cdrom 没有发布文件，并要求插入 Debian 光盘来离线安装软件包，这时候我们需要绕过去掉提示，以便使用网络安装。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;nano&lt;/span&gt; /etc/apt/sources.list&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;得到：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;span&gt;sources.list&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# deb cdrom:[Debian GNU/Linux 11.8.0 _Bullseye_ - Official amd64 DVD Binary-1 20231007-14:05]/ bullseye contrib main&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;deb cdrom:[Debian GNU/Linux 11.8.0 _Bullseye_ - Official amd64 DVD Binary-1 20231007-14:05]/ bullseye contrib main&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# Line commented out by installer because it failed to verify:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;#deb http://security.debian.org/debian-security bullseye-security main contrib&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# Line commented out by installer because it failed to verify:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;#deb-src http://security.debian.org/debian-security bullseye-security main contrib&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;可以看到，默认是先通过  &lt;code&gt;deb cdrom:...&lt;/code&gt;  安装软件的。所以在前面加一个  &lt;code&gt;#&lt;/code&gt;  把这行注释掉即可；最后  &lt;code&gt;写入 ^O&lt;/code&gt;  ， &lt;code&gt;回车 Enter&lt;/code&gt;  确认保存，  &lt;code&gt;退出 ^X&lt;/code&gt;  。&lt;/p&gt;
&lt;h3 id=&#34;更换软件包镜像源&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#更换软件包镜像源&#34;&gt;#&lt;/a&gt; 更换软件包镜像源&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;E: Package &#39;xxx&#39; has no installation candidate.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这种情况一般是软件包获取不到，可能是网络问题，也可能是因为源的问题，换个好一点的镜像源就行了。&lt;/p&gt;
&lt;p&gt;例如：更换为 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvZGViaWFuLw==&#34;&gt;清华源地址&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;cp&lt;/span&gt; /etc/apt/sources.&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;list,list.back&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;nano&lt;/span&gt; /etc/apt/sources.list&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; update&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;先找到镜像源文件并备份，然后使用  &lt;code&gt;nano&lt;/code&gt;  编辑，把获取到的镜像源地址全部覆盖替换原有的文本，最后再执行  &lt;code&gt;apt update&lt;/code&gt;  更新软件包，至此就可以安装原本装失败的软件了。如果用不习惯  &lt;code&gt;nano&lt;/code&gt;  编辑器，可以安装  &lt;code&gt;vim&lt;/code&gt;  。&lt;/p&gt;
&lt;h3 id=&#34;内核编译工具&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#内核编译工具&#34;&gt;#&lt;/a&gt; 内核编译工具&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;make[n]: *** /lib/modules/kernel_version-amd64/build: No such file or directory.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在编译部署内核模块的时候，如果报这个错误，是因为没有  &lt;code&gt;linux-headers&lt;/code&gt;  导致。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; update&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; linux-headers-&lt;span class=&#34;token variable&#34;&gt;&lt;span class=&#34;token variable&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;uname&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-r&lt;/span&gt;&lt;span class=&#34;token variable&#34;&gt;)&lt;/span&gt;&lt;/span&gt;-amd64&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;命令  &lt;code&gt;uname -r&lt;/code&gt;  就是用来获取当前内核版本的。&lt;/p&gt;
&lt;p&gt;一般编译驱动会用到  &lt;code&gt;sudo apt-get install build-essential linux-headers-$(uname -r)-amd64&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;网卡驱动添加&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#网卡驱动添加&#34;&gt;#&lt;/a&gt; 网卡驱动添加&lt;/h3&gt;
&lt;p&gt;获取网卡型号：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;lspci &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;grep&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-i&lt;/span&gt; net&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;02:00.0 Network controller: Realtek Semiconductor Co., Ltd. RTL8723BE PCIe Wireless Network Adapter&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;rev &lt;span class=&#34;token number&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;其中  &lt;code&gt;Ethernet controller&lt;/code&gt;  后面的表示以太网有线网卡，这里是 RTL8111/8168/8411；  &lt;code&gt;Network controller&lt;/code&gt;  后面表示无线网卡，这里则是 RTL8723BE。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;有线网卡&lt;/p&gt;
&lt;p&gt;一般主板上的有线网卡都是自带驱动的，但不排除驱动不管用或者另类没有，这个时候就需要自己找驱动，当然，如果有现成编译好打好包的驱动，那么只需要用 U 盘 copy 到系统然后进行安装即可，如果没有，那么就需要自己编译驱动了，这是一个很麻烦的事，特别是你完全没网的时候，光是安装一堆依赖都得一个个找。。。&lt;/p&gt;
&lt;p&gt;当然你也可以找个联网的虚拟机，安装一样的系统，编译好再 copy 过去；或者利用  &lt;code&gt;apt-cache depends package_name&lt;/code&gt;  获取安装依赖，然后一个个安装；对于  &lt;code&gt;.deb&lt;/code&gt;  文件，可以用  &lt;code&gt;dpkg --info path_deb_file&lt;/code&gt;  查看。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;无线网卡&lt;/p&gt;
&lt;p&gt;在 Debian 最小安装中，是不存在无线网卡驱动的，只能自己安装：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;intel 的无线网卡驱动：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; firmware-iwlwifi&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;支持型号：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wYWNrYWdlcy5kZWJpYW4ub3JnL2J1bGxzZXllL2Zpcm13YXJlLWl3bHdpZmk=&#34;&gt;https://packages.debian.org/bullseye/firmware-iwlwifi&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;realtek（小螃蟹）的无线网卡驱动：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; firmware-realtek&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;支持型号：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wYWNrYWdlcy5kZWJpYW4ub3JnL2J1bGxzZXllL2Zpcm13YXJlLXJlYWx0ZWs=&#34;&gt;https://packages.debian.org/bullseye/firmware-realtek&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;高通的无线网卡驱动：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; firmware-atheros&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;支持型号：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wYWNrYWdlcy5kZWJpYW4ub3JnL2J1bGxzZXllL2Zpcm13YXJlLWF0aGVyb3M=&#34;&gt;https://packages.debian.org/bullseye/firmware-atheros&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;other：&lt;/p&gt;
&lt;p&gt;当然，如果你像一劳永逸，可以直接安装  &lt;code&gt;firmware-nonfree&lt;/code&gt;  整个大包，或者在里面找相应的型号子包安装：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9wYWNrYWdlcy5kZWJpYW4ub3JnL3NvdXJjZS9idWxsc2V5ZS9maXJtd2FyZS1ub25mcmVlJUVGJUJDJTlCJUU4JTgwJThDJUU1JUFGJUI5JUU0JUJBJThFJUU1JTg1JUI2JUU1JUFFJTgzJUU2JUFGJTk0JUU4JUJFJTgzJUU2JTk2JUIwJUU3JTlBJTg0JUU4JUFFJUJFJUU1JUE0JTg3JUU2JTg4JTk2JUU4JTgwJTg1JUU0JUI4JThEJUU1JTlDJUE4JUU2JUI4JTg1JUU1JThEJTk1JUU0JUI4JThBJUU3JTlBJTg0JUU4JUFFJUJFJUU1JUE0JTg3JUVGJUJDJThDJUU1JThGJUFGJUU0JUJCJUE1JUU1JThFJUJCJUU1JUFFJTk4JUU3JUJEJTkxJUU2JTg4JTk2JUU4JTgwJTg1JUU1JUJDJTgwJUU2JUJBJTkwJUU1JUI5JUJGJUU1JTlDJUJBJUU0JUI4JThBJUU2JTg5JUJFJUVGJUJDJThDJUU0JUJEJTg2JUU1JUE0JUE3JUU5JTgzJUE4JUU1JTg4JTg2JUU5JTlDJTgwJUU4JUE2JTgxJUU4JTg3JUFBJUU1JUI3JUIxJUU3JUJDJTk2JUU4JUFGJTkxJUU5JUE5JUIxJUU1JThBJUE4JUUzJTgwJTgy&#34;&gt;https://packages.debian.org/source/bullseye/firmware-nonfree；而对于其它比较新的设备或者不在清单上的设备，可以去官网或者开源广场上找，但大部分需要自己编译驱动。&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于网卡驱动安装完后，可以  &lt;code&gt;reboot&lt;/code&gt;  重启，然后执行  &lt;code&gt;dmesg -l err&lt;/code&gt;  查看日志，看驱动是否生效，如果没有，将会出现 error，然后排查解决就好了。&lt;/p&gt;
&lt;h3 id=&#34;引导时间修改&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#引导时间修改&#34;&gt;#&lt;/a&gt; 引导时间修改&lt;/h3&gt;
&lt;p&gt;如果你是单系统，可以更改引导时间缩短跳转启动系统的时间。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;nano&lt;/span&gt; /etc/default/grub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;更改  &lt;code&gt;GRUB_TIMEOUT&lt;/code&gt;  数值为 1，这里建议不要改成 0，留出 1s 的时间，防止以后有用到。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /etc/default/grub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# If you change this file, run &#39;update-grub&#39; afterwards to update&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# /boot/grub/grub.cfg.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# For full documentation of the options in this file, see:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#   info -f grub -n &#39;Simple configuration&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token assign-left variable&#34;&gt;GRUB_DEFAULT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token assign-left variable&#34;&gt;GRUB_TIMEOUT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token assign-left variable&#34;&gt;GRUB_DISTRIBUTOR&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token variable&#34;&gt;&lt;span class=&#34;token variable&#34;&gt;`&lt;/span&gt;lsb_release &lt;span class=&#34;token parameter variable&#34;&gt;-i&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-s&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&lt;span class=&#34;token file-descriptor important&#34;&gt;2&lt;/span&gt;&gt;&lt;/span&gt; /dev/null &lt;span class=&#34;token operator&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;echo&lt;/span&gt; Debian&lt;span class=&#34;token variable&#34;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token assign-left variable&#34;&gt;GRUB_CMDLINE_LINUX_DEFAULT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;quiet&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token assign-left variable&#34;&gt;GRUB_CMDLINE_LINUX&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment to enable BadRAM filtering, modify to suit your needs&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This works with Linux (no patch required) and with any kernel that obtains&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# the memory map information from GRUB (GNU Mach, kernel of FreeBSD ...)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#GRUB_BADRAM=&#34;0x01234567,0xfefefefe,0x89abcdef,0xefefefef&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment to disable graphical terminal (grub-pc only)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#GRUB_TERMINAL=console&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# The resolution used on graphical terminal&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# note that you can use only modes which your graphic card supports via VBE&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# you can see them in real GRUB with the command `vbeinfo&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#GRUB_GFXMODE=640x480&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment if you don&#39;t want GRUB to pass &#34;root=UUID=xxx&#34; parameter to Linux&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#GRUB_DISABLE_LINUX_UUID=true&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment to disable generation of recovery mode menu entries&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#GRUB_DISABLE_RECOVERY=&#34;true&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment to get a beep at grub start&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#GRUB_INIT_TUNE=&#34;480 440 1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;最后更新 Grub：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;update-grub&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;可以通过  &lt;code&gt;systemd-analyze time&lt;/code&gt;  查看开机时间，通过  &lt;code&gt;systemd-analyze blame&lt;/code&gt;  查看开机服务占用时间。&lt;/p&gt;
&lt;h3 id=&#34;ssh-配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ssh-配置&#34;&gt;#&lt;/a&gt; ssh 配置&lt;/h3&gt;
&lt;p&gt;在安装的时候有勾选 ssh 服务的话，那么只需要配置一下文件即可，否则就需要自己去下载。（当然，这里只是前置使用，后期安装 OMV 后，将由 OMV 接管）&lt;/p&gt;
&lt;h3 id=&#34;安装中文输入法&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装中文输入法&#34;&gt;#&lt;/a&gt; 安装中文输入法&lt;/h3&gt;
&lt;p&gt;在 linux 系统中，常见的两大输入法框架：ibus 和 fcitx，而这里使用 Fcitx5，是用来接替 Fcitx 的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意： fcitx5 包仅提供基本框架，且仅支持英文。如果要输入其他语言（例如中文或日文），则需要安装输入法引擎（IME）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Fcitx5 输入法引擎有以下几种：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;中文&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-chewing 包：是流行的繁体中文注音输入引擎，它基于 libchewing 包。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-chinese-addons 包：包含与中文相关的 addon，例如拼音、双拼和五笔。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-rime 包：使用 Rime 引擎。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;日文&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-anthy 包：是流行的日文输入引擎。但是，它已不再受到积极开发。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-kkc 包：是日文假名输入引擎，它基于 libkkc 包。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-mozc 包：基于 Mozc（Google 日文输入法的开源版本）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fcitx5-skk 包：是日文假名输入引擎，它基于 libskk 包。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;其他语言&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fcitx5-hangul 包：用于输入韩文，基于 libhangul 包。&lt;/li&gt;
&lt;li&gt;fcitx5-unikey 包：可用于输入越南语字符。&lt;/li&gt;
&lt;li&gt;fcitx5-m17n 包：可用于各种语言。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1、卸载旧版及其余输入法&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; purge fcitx* ibus*&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;2、安装 Fcitx5 简体中文输入&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; fcitx5 fcitx5-chinese-addons&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;3、重启配置&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;开机后查看 fcitx5 是否随桌面环境自动启动，如无，则添加开机自启：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;~/.config/autostart/&#34;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;then&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt; &lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt;  ~/.config/autostart/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;fi&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cp&lt;/span&gt; /usr/share/applications/org.fcitx.Fcitx5.desktop ~/.config/autostart/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;4、添加拼音输入&lt;/p&gt;
&lt;p&gt;在应用中打开 Fcitx5 配置，然后在输入法中添加中文拼音，同时在全局选项中配置输入法切换快捷键（默认是  &lt;code&gt;Ctrl + 空格键&lt;/code&gt;  切换）。&lt;/p&gt;
&lt;p&gt;5、修改全局变量&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用  &lt;code&gt;im-config&lt;/code&gt;  组件配置&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; im-config&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;im-config&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;进入图形界面选择 Fcitx5 输入法。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编辑  &lt;code&gt;/etc/environment&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/environment&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加如下全局配置：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;span&gt;/etc/environment&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;GTK_IM_MODULE=fcitx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;QT_IM_MODULE=fcitx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;XMODIFIERS=@im=fcitx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SDL_IM_MODULE=fcitx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;INPUT_METHOD=fcitx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;GLFW_IM_MODULE=ibus&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;资料：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eGNuLm9yZy93aWtpL0ZjaXR4NQ==&#34;&gt;https://wiki.archlinuxcn.org/wiki/Fcitx5&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmRlYmlhbi5vcmcvemhfQ04vSTE4bi9GY2l0eDU=&#34;&gt;https://wiki.debian.org/zh_CN/I18n/Fcitx5&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;节电处理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#节电处理&#34;&gt;#&lt;/a&gt; 节电处理&lt;/h2&gt;
&lt;h3 id=&#34;无线&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#无线&#34;&gt;#&lt;/a&gt; 无线&lt;/h3&gt;
&lt;p&gt;软件关闭蓝牙功能：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;rfkill block bluetooth&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;软件关闭 wifi 功能：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;rfkill block wifi&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;usb&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#usb&#34;&gt;#&lt;/a&gt; USB&lt;/h3&gt;
&lt;p&gt;添加 USB 空闲自动挂起处理，空闲等待时间为 2S， &lt;code&gt;reboot&lt;/code&gt;  重启生效：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;ACTION==&#34;add&#34;, SUBSYSTEM==&#34;usb&#34;,  ATTR&amp;#123;power/control&amp;#125;=&#34;auto&#34;, ATTR&amp;#123;power/autosuspend_delay_ms&amp;#125;=&#34;2000&#34;&#39;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; /etc/udev/rules.d/50-usb_power_save.rules&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;其它控制：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ATTR&amp;#123;power/control&amp;#125;=&amp;quot;on&amp;quot;&lt;/code&gt;  or  &lt;code&gt;ATTR&amp;#123;power/autosuspend_delay_ms&amp;#125;=&amp;quot;-1&amp;quot;&lt;/code&gt; ，表示禁用挂起； &lt;code&gt;ATTR&amp;#123;power/wakeup&amp;#125;=&amp;quot;enable&amp;quot;&lt;/code&gt; ，表示使能 usb 唤醒，写入  &lt;code&gt;disable&lt;/code&gt;  则关闭。&lt;/p&gt;
&lt;p&gt;如果想要单独设置，可以如下查看 usb 设备对应的 udev 字段，eg：查看 Logitech 鼠标：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;lsusb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Bus 002 Device 001: ID 1d6b:0003 Linux Foundation &lt;span class=&#34;token number&#34;&gt;3.0&lt;/span&gt; root hub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Bus 001 Device 003: ID 0bda:b728 Realtek Semiconductor Corp. RTL8723B Bluetooth&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Bus 001 Device 002: ID 046d:c52b Logitech, Inc. Unifying Receiver&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Bus 001 Device 001: ID 1d6b:0002 Linux Foundation &lt;span class=&#34;token number&#34;&gt;2.0&lt;/span&gt; root hub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;lsusb &lt;span class=&#34;token parameter variable&#34;&gt;-tvv&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;/:  Bus 02.Port &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;root_hub, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;xhci_hcd/7p, 5000M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ID 1d6b:0003 Linux Foundation &lt;span class=&#34;token number&#34;&gt;3.0&lt;/span&gt; root hub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    /sys/bus/usb/devices/usb2  /dev/bus/usb/002/001&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;/:  Bus 01.Port &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;root_hub, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;xhci_hcd/9p, 480M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ID 1d6b:0002 Linux Foundation &lt;span class=&#34;token number&#34;&gt;2.0&lt;/span&gt; root hub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    /sys/bus/usb/devices/usb1  /dev/bus/usb/001/001&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt;__ Port &lt;span class=&#34;token number&#34;&gt;4&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;, If &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Human Interface Device, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;usbhid, 12M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        ID 046d:c52b Logitech, Inc. Unifying Receiver&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        /sys/bus/usb/devices/1-4  /dev/bus/usb/001/002&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt;__ Port &lt;span class=&#34;token number&#34;&gt;4&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;, If &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Human Interface Device, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;usbhid, 12M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        ID 046d:c52b Logitech, Inc. Unifying Receiver&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        /sys/bus/usb/devices/1-4  /dev/bus/usb/001/002&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt;__ Port &lt;span class=&#34;token number&#34;&gt;4&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;, If &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Human Interface Device, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;usbhid, 12M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        ID 046d:c52b Logitech, Inc. Unifying Receiver&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        /sys/bus/usb/devices/1-4  /dev/bus/usb/001/002&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt;__ Port &lt;span class=&#34;token number&#34;&gt;8&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;3&lt;/span&gt;, If &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Wireless, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;btusb, 12M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        ID 0bda:b728 Realtek Semiconductor Corp. RTL8723B Bluetooth&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        /sys/bus/usb/devices/1-8  /dev/bus/usb/001/003&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt;__ Port &lt;span class=&#34;token number&#34;&gt;8&lt;/span&gt;: Dev &lt;span class=&#34;token number&#34;&gt;3&lt;/span&gt;, If &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;token assign-left variable&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;Wireless, &lt;span class=&#34;token assign-left variable&#34;&gt;Driver&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;btusb, 12M&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        ID 0bda:b728 Realtek Semiconductor Corp. RTL8723B Bluetooth&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        /sys/bus/usb/devices/1-8  /dev/bus/usb/001/003&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;udevadm info &lt;span class=&#34;token parameter variable&#34;&gt;-a&lt;/span&gt; /dev/bus/usb/001/002&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Udevadm info starts with the device specified by the devpath and &lt;span class=&#34;token keyword&#34;&gt;then&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;walks up the chain of parent devices. It prints &lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; every device&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;found, all possible attributes &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; the udev rules key format.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;A rule to match, can be composed by the attributes of the device&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;and the attributes from one single parent device.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;37&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;38&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  looking at device &lt;span class=&#34;token string&#34;&gt;&#39;/devices/pci0000:00/0000:00:15.0/usb1/1-4&#39;&lt;/span&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;39&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token assign-left variable&#34;&gt;KERNEL&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1-4&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;40&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token assign-left variable&#34;&gt;SUBSYSTEM&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;usb&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;41&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token assign-left variable&#34;&gt;DRIVER&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;usb&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;42&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;authorized&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;43&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;avoid_reset_quirk&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;44&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bConfigurationValue&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;45&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bDeviceClass&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;00&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;46&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bDeviceProtocol&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;00&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;47&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bDeviceSubClass&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;00&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;48&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bMaxPacketSize0&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;8&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;49&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bMaxPower&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;98mA&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;50&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bNumConfigurations&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;51&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bNumInterfaces&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34; 3&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;52&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bcdDevice&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1211&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;53&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;bmAttributes&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;a0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;54&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;busnum&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;55&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;configuration&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;RQR12.11_B0032&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;56&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;devnum&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;2&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;57&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;devpath&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;4&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;58&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;idProduct&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;c52b&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;59&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;idVendor&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;046d&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;60&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;ltm_capable&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;no&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;61&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;manufacturer&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Logitech&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;62&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;maxchild&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;63&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/active_duration&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;5486884&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;64&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/async&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;enabled&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;65&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/autosuspend&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;2&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;66&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/autosuspend_delay_ms&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;2000&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;67&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/connected_duration&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;5486884&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;68&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/control&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;on&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;69&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/level&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;on&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;70&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/persist&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;71&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/runtime_active_kids&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;72&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/runtime_active_time&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;5486602&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;73&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/runtime_enabled&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;forbidden&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;74&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/runtime_status&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;active&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;75&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/runtime_suspended_time&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;76&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/runtime_usage&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;77&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;enabled&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;78&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_abort_count&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;79&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_active&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;80&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_active_count&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;81&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_count&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;82&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_expire_count&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;83&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_last_time_ms&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;84&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_max_time_ms&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;85&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;power/wakeup_total_time_ms&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;86&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;product&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;USB Receiver&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;87&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;quirks&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;0x0&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;88&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;removable&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;removable&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;89&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;rx_lanes&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;90&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;speed&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;12&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;91&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;tx_lanes&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;1&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;92&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;urbnum&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;34&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;93&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    ATTR&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;version&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34; 2.00&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;94&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;95&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;..&lt;/span&gt;.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;参看：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLmtlcm5lbC5vcmcvZHJpdmVyLWFwaS91c2IvcG93ZXItbWFuYWdlbWVudC5odG1s&#34;&gt;https://docs.kernel.org/driver-api/usb/power-management.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvVWRldiNXYWtpbmdfZnJvbV9zdXNwZW5kX3dpdGhfVVNCX2RldmljZQ==&#34;&gt;https://wiki.archlinux.org/title/Udev#Waking_from_suspend_with_USB_device&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy5yZWFjdGl2YXRlZC5uZXQvd3JpdGluZ191ZGV2X3J1bGVzLmh0bWwjZXhhbXBsZS1wcmludGVy&#34;&gt;http://www.reactivated.net/writing_udev_rules.html#example-printer&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;cpu-调度&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#cpu-调度&#34;&gt;#&lt;/a&gt; cpu 调度&lt;/h3&gt;
&lt;p&gt;一般支持以下几种策略，旧内核可能不支持  &lt;code&gt;schedutil&lt;/code&gt;  ：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Governor&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;performance&lt;/td&gt;
&lt;td&gt;Run the CPU at the maximum frequency, obtained from  &lt;code&gt;/sys/devices/system/cpu/cpuX/cpufreq/scaling_max_freq&lt;/code&gt; .&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;powersave&lt;/td&gt;
&lt;td&gt;Run the CPU at the minimum frequency, obtained from  &lt;code&gt;/sys/devices/system/cpu/cpuX/cpufreq/scaling_min_freq&lt;/code&gt; .&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;userspace&lt;/td&gt;
&lt;td&gt;Run the CPU at user specified frequencies, configurable via  &lt;code&gt;/sys/devices/system/cpu/cpuX/cpufreq/scaling_setspeed&lt;/code&gt; .&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ondemand&lt;/td&gt;
&lt;td&gt;Scales the frequency dynamically according to current load. Jumps to the highest frequency and then possibly back off as the idle time increases.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conservative&lt;/td&gt;
&lt;td&gt;Scales the frequency dynamically according to current load. Scales the frequency more gradually than ondemand.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;schedutil&lt;/td&gt;
&lt;td&gt;Scheduler-driven CPU frequency selection.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;关于  &lt;code&gt;schedutil&lt;/code&gt;  的原理可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kZWVwaW5vdXQuY29tL2FuZHJvaWQtc3lzdGVtLWFuYWx5c2lzL2FuZHJvaWQtY3B1LXJlbGF0ZWQvcHJpbmNpcGxlLWFuYWx5c2lzLW9mLWNwdS1nb3Zlcm5vci1zY2hlZHV0aWwuaHRtbA==&#34;&gt;https://deepinout.com/android-system-analysis/android-cpu-related/principle-analysis-of-cpu-governor-schedutil.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;查看 cpu 支持的调度策略及当前使用的模式：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;conservative ondemand performance schedutil&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;schedutil&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;修改所有 cpu 的策略：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;echo&lt;/span&gt; governor &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;tee&lt;/span&gt; /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;governor&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note： &lt;code&gt;governor&lt;/code&gt;  为支持的策略之一，选你需要更改的就好了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意，该操作只在当前生效，任何复位或重启后，都将恢复默认操作，因此如果要让每次生效，那么需要编写开机脚本或写入内核。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;查看各 cpu 频率：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /proc/cpuinfo &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;grep&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-E&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;^model name|^cpu MHz&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;model name      &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; Intel&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Pentium&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Silver J5040 CPU @ &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;.00GHz&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;cpu MHz         &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1029.564&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;model name      &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; Intel&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Pentium&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Silver J5040 CPU @ &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;.00GHz&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;cpu MHz         &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1168.290&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;model name      &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; Intel&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Pentium&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Silver J5040 CPU @ &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;.00GHz&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;cpu MHz         &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;818.342&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;model name      &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; Intel&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Pentium&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;R&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; Silver J5040 CPU @ &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;.00GHz&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;cpu MHz         &lt;span class=&#34;token builtin class-name&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;960.974&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;资料：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvQ1BVX2ZyZXF1ZW5jeV9zY2FsaW5nI1NjYWxpbmdfZ292ZXJub3Jz&#34;&gt;https://wiki.archlinux.org/title/CPU_frequency_scaling#Scaling_governors&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmtlbHUub3JnL3RlY2gvMjAyMS8wNS8xMy9iaW9zLWNvbmZpZy1yZW1hcmsuaHRtbA==&#34;&gt;https://blog.kelu.org/tech/2021/05/13/bios-config-remark.html&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;睡眠与休眠&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#睡眠与休眠&#34;&gt;#&lt;/a&gt; 睡眠与休眠&lt;/h3&gt;
&lt;p&gt;关于 Suspend，Linux 内核提供了四种电源模式，如下表：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;模式&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;freeze&lt;/td&gt;
&lt;td&gt;冻结 I/O 设备，将它们置于低功耗状态，使处理器进入空闲状态，唤醒最快，耗电比其它 standby, mem, disk 方式高。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;standby&lt;/td&gt;
&lt;td&gt;除了冻结 I/O 设备外，还会暂停系统，唤醒较快，耗电比其它 mem, disk 方式高。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;mem&lt;/td&gt;
&lt;td&gt;将运行状态数据存到内存，并关闭外设，进入等待模式，唤醒较慢，耗电比 disk 方式高。（实际由  &lt;code&gt;/sys/power/mem_sleep&lt;/code&gt;  抉择）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;disk&lt;/td&gt;
&lt;td&gt;将运行状态数据存到硬盘，然后关机，唤醒最慢；对于嵌入式系统，由于没有硬盘，所以一般不支持。（实际由  &lt;code&gt;/sys/power/disk&lt;/code&gt;  抉择）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;然，虽然 linux 内核支持，但实际上不同的平台，对应的支持也是不一样的；可以使用以下命令查看对 Suspend 支持：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/power/state&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;freeze mem disk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;在这里，就只支持 3 种： &lt;code&gt;freeze&lt;/code&gt;  、  &lt;code&gt;mem&lt;/code&gt;  、  &lt;code&gt;disk&lt;/code&gt;  。&lt;/p&gt;
&lt;p&gt;在 linux 中，有两个比较特殊的 Suspend 管理，那就是  &lt;code&gt;mem&lt;/code&gt;  和  &lt;code&gt;disk&lt;/code&gt;  ，分别是 &lt;strong&gt;Suspend to RAM（挂起到内存，通称睡眠）&lt;/strong&gt; 和 &lt;strong&gt;Suspend to disk（挂起到硬盘，通称休眠）&lt;/strong&gt; 这两种电源管理模式，它们默认使用的 ACPI 定义如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Suspend to RAM（挂起到内存，通称睡眠）&lt;/p&gt;
&lt;p&gt;ACPI 定义的 &lt;strong&gt;S3&lt;/strong&gt; 睡眠状态。通过将机器中大多数和 RAM 不相关的部件断电来工作，RAM 是恢复机器状态所必需的。由于可以节省大量电力，建议笔记本电脑在使用电池运行且盖子关闭时（或用户在一段时间内处于非活动状态）自动进入此模式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Suspend to disk（挂起到硬盘，通称休眠）&lt;/p&gt;
&lt;p&gt;ACPI 定义的 &lt;strong&gt;S4&lt;/strong&gt; 睡眠状态。将机器状态保存到交换空间并关闭机器。再次开机后，恢复状态。直到开机前，机器都不会有任何待机功耗。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;note：实际上，  &lt;code&gt;mem&lt;/code&gt;  和  &lt;code&gt;disk&lt;/code&gt;  是由它们对应的配置文件决定的，但一般默认会使用上面的 ACPI 状态。&lt;/p&gt;
&lt;p&gt;对于  &lt;code&gt;mem&lt;/code&gt;  和  &lt;code&gt;disk&lt;/code&gt;  的控制：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;mem&lt;/code&gt;  模式的操作由  &lt;code&gt;/sys/power/mem_sleep&lt;/code&gt;  抉择，常见以下几种睡眠处理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;deep：Suspend-To-RAM，对应 ACPI 为 S3；&lt;/li&gt;
&lt;li&gt;shallow：Power-On Suspend，对应 ACPI 为 S1；&lt;/li&gt;
&lt;li&gt;s2idle：Suspend-To-Idle，对应 ACPI 为 S0；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;disk&lt;/code&gt;  模式的操作则由  &lt;code&gt;/sys/power/disk&lt;/code&gt;  抉择，常见以下几种休眠处理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;platform：使用平台（BIOS 支持）提供的方法将把系统置于超低功耗状态（如 ACPI S4），使得额外的唤醒选项可用，并且让平台固件在唤醒之后可能允许做一个简简的初始化；&lt;/li&gt;
&lt;li&gt;shutdown：顾名思义就是关闭系统设备断电；&lt;/li&gt;
&lt;li&gt;reboot：这个。。。不用说了吧；&lt;/li&gt;
&lt;li&gt;suspend：系统混合挂起，是的没错，可以将睡眠和休眠混合，可以通过在   &lt;code&gt;/etc/systemd/sleep.conf&lt;/code&gt;  文件进行配置以达到效果，可参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eGNuLm9yZy93aWtpLyVFNyU5NCVCNSVFNiVCQSU5MCVFNyVBRSVBMSVFNyU5MCU4NiMlRTYlOEMlODIlRTglQjUlQjclRTYlODglOTYlRTQlQkMlOTElRTclOUMlQTAlRTglQUYlQjclRTYlQjElODIlRTYlOTclQjYlRTclOUElODQlRTYlQjclQjclRTUlOTAlODglRTclOUQlQTElRTclOUMlQTA=&#34;&gt;挂起或休眠请求时的混合睡眠&lt;/span&gt; ；&lt;/li&gt;
&lt;li&gt;test_resume：诊断操作。先是加载镜像（就好像系统刚从休眠中醒来，当前运行的内核实例是还原内核），然后再恢复整个系统。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;查看支持：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/power/mem_sleep&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;s2idle &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;deep&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/power/disk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;platform&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;shutdown&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;suspend&lt;/span&gt; test_resume&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果想要切换相应的控制，只需往写入你要的处理模式就好了；当然，这只是在下一次中生效，当执行完一次后将会恢复；若要设成永久处理，那么可以通过修改内核属性来达到效果。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;自动休眠：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;一般作为服务器，是不需要自动休眠的，但对于一周也用不了多少次的，可能使用自动休眠会省电一点，配合唤醒功能即可达到快速恢复工作环境的效果。&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/default/grub&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后添加  &lt;code&gt;GRUB_CMDLINE_LINUX=&amp;quot;mem_sleep_default=deep&amp;quot;&lt;/code&gt;  ，然后重新生成  &lt;code&gt;grub.cfg&lt;/code&gt;  文件，重启生效：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;grub-mkconfig&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-o&lt;/span&gt; /boot/grub/grub.cfg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;资料：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvUG93ZXJfbWFuYWdlbWVudC9TdXNwZW5kX2FuZF9oaWJlcm5hdGU=&#34;&gt;https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vc2xlZXAuY29uZi5kLjU=&#34;&gt;https://man.archlinux.org/man/sleep.conf.d.5&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvUG93ZXJfbWFuYWdlbWVudCNTdXNwZW5kX2FuZF9oaWJlcm5hdGU=&#34;&gt;https://wiki.archlinux.org/title/Power_management#Suspend_and_hibernate&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudW5peHR1dG9yaWFsLm9yZy9kaXNhYmxlLXNsZWVwLW9uLXVidW50dS1zZXJ2ZXIv&#34;&gt;https://www.unixtutorial.org/disable-sleep-on-ubuntu-server/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cua2VybmVsLm9yZy9kb2MvaHRtbC9sYXRlc3QvYWRtaW4tZ3VpZGUvcG0vc2xlZXAtc3RhdGVzLmh0bWw=&#34;&gt;https://www.kernel.org/doc/html/latest/admin-guide/pm/sleep-states.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;更多电源管理：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvUG93ZXJfbWFuYWdlbWVudCNQb3dlcl9zYXZpbmc=&#34;&gt;https://wiki.archlinux.org/title/Power_management#Power_saving&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Kernel 参数：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cua2VybmVsLm9yZy9kb2MvRG9jdW1lbnRhdGlvbi9hZG1pbi1ndWlkZS9rZXJuZWwtcGFyYW1ldGVycy50eHQ=&#34;&gt;https://www.kernel.org/doc/Documentation/admin-guide/kernel-parameters.txt&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;图形环境切换&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#图形环境切换&#34;&gt;#&lt;/a&gt; 图形环境切换&lt;/h2&gt;
&lt;p&gt;前提：系统已经安装了桌面环境，需要禁止桌面环境，以纯命令行启动，以节约性能。&lt;/p&gt;
&lt;p&gt;获取当前系统运行的界面模式：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl get-default&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;纯命令行启动：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl set-default multi-user.target&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：如果想从命令行中启动桌面，可以通过相应的图形界面启动命令来启动，例如启动 xfce4 的桌面： &lt;code&gt;startxfce4&lt;/code&gt;  .&lt;/p&gt;
&lt;p&gt;桌面环境启动：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl set-default graphical.target&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;对于多桌面，可以使用下面命令，然后选择对应的桌面系统，输入序号确认：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;update-alternatives &lt;span class=&#34;token parameter variable&#34;&gt;--config&lt;/span&gt; x-session-manager&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果要删除  &lt;code&gt;x-session-manager&lt;/code&gt;  的某个选项，可以先通过以下方式列出其路径，然后通过删除选项（eg：gnome-session）：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;update-alternatives &lt;span class=&#34;token parameter variable&#34;&gt;--list&lt;/span&gt; x-session-manager&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;update-alternatives &lt;span class=&#34;token parameter variable&#34;&gt;--remove&lt;/span&gt; x-session-manager /usr/bin/gnome-session&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参考：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8zNjcyOTQvaG93LWRvLWktY2hhbmdlLW15LWRlZmF1bHQtc2Vzc2lvbg==&#34;&gt;https://unix.stackexchange.com/questions/367294/how-do-i-change-my-default-session&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;远程唤醒&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#远程唤醒&#34;&gt;#&lt;/a&gt; 远程唤醒&lt;/h2&gt;
&lt;p&gt;首先，查看系统主板 BIOS 是否支持 Wake-On-LAN ，要是支持的话，必须先启动它，因为它被默认设禁用。&lt;/p&gt;
&lt;p&gt;然后，需要一个支持 Wake-On-LAN 的网卡；&lt;mark&gt;无线网卡并不支持&lt;/mark&gt;。你需要运行  &lt;code&gt;ethtool&lt;/code&gt;  命令查看网卡是否支持 Wake-On-LAN ：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;ethtool&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ethtool&lt;/span&gt; eno1 &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;grep&lt;/span&gt; Wake-on&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        Supports Wake-on: pumbg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        Wake-on: d&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;这条命令输出的  &lt;code&gt;Supports Wake-on&lt;/code&gt;  字段会告诉你你的网卡支持哪些功能，同时  &lt;code&gt;Wake-on&lt;/code&gt;  指示着当前配置的模式，一般有以下几种选项：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;d -- 禁用（disable）&lt;/li&gt;
&lt;li&gt;p -- 物理活动唤醒（Wake on PHY activity）&lt;/li&gt;
&lt;li&gt;u -- 单播消息唤醒（Wake on unicast activity）&lt;/li&gt;
&lt;li&gt;m -- 多播（组播）消息唤醒（Wake on multicast activity）&lt;/li&gt;
&lt;li&gt;b -- 广播消息唤醒（Wake on broadcast activity）&lt;/li&gt;
&lt;li&gt;a -- ARP 唤醒（Wake on ARP activity）&lt;/li&gt;
&lt;li&gt;g -- 特定数据包唤醒（magic packet activity）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;修改 wol 功能：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ethtool&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-s&lt;/span&gt; eno1 wol g&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ethtool&lt;/span&gt; eno1 &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;grep&lt;/span&gt; Wake-on&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        Supports Wake-on: pumbg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        Wake-on: g&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;此刻已经开启 magic packet 唤醒了，然后执行  &lt;code&gt;ip a&lt;/code&gt;  查看网卡的 mac 地址和 ip 并记录，再写入  &lt;code&gt;echo mem &amp;gt; /sys/power/state&lt;/code&gt;  ，让系统进入休眠，再在另一台主机测试网络唤醒。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Windows&lt;/p&gt;
&lt;p&gt;可以选择该工具使用：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuZGVwaWN1cy5jb20vd2FrZS1vbi1sYW4vd2FrZS1vbi1sYW4tY21k&#34;&gt;Wake On Lan Command Line&lt;/span&gt; 。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux&lt;/p&gt;
&lt;p&gt;可以安装对应的 pack 包（eg：etherwake），这里就不多说了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当你能成功唤醒后，就证明你的主板支持，bios 上的 wol 有启用，系统配置上也打开了。&lt;/p&gt;
&lt;p&gt;最后，对于部分系统，可能有些在设置完显示  &lt;code&gt;Wake-on: g&lt;/code&gt;  后，重启会变回默认配置，这时可以编写一个开机启动服务：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/systemd/system/wol@.service&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;添加如下内容：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;span&gt;wol@.service&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;[Unit]&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Description=Wake-on-LAN for %i&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Requires=network.target&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;After=network.target&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;[Service]&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ExecStart=/usr/bin/ethtool -s %i wol g&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Type=oneshot&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;[Install]&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;WantedBy=multi-user.target&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后 [Install] 区块中的  &lt;code&gt;WantedBy&lt;/code&gt;  字段，是表示该服务所在的 Target。如  &lt;code&gt;WantedBy=multi-user.target&lt;/code&gt;  指的是该服务所属于  &lt;code&gt;multi-user.target&lt;/code&gt;  ；当执行  &lt;code&gt;systemctl enable xxx.service&lt;/code&gt;  命令时， &lt;code&gt;xxx.service&lt;/code&gt;  的符号链接就会被创建在  &lt;code&gt;/etc/systemd/system/multi-user.target&lt;/code&gt;  目录下。可以通过  &lt;code&gt;systemctl get-default&lt;/code&gt;  命令查看系统默认启动的 target，一般为  &lt;code&gt;multi-user&lt;/code&gt;  或者是  &lt;code&gt;graphical&lt;/code&gt; 。因此配置好相应的  &lt;code&gt;WantedBy&lt;/code&gt;  字段，可以实现服务的开机启动。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;multi-user.target&lt;/code&gt;  表示多用户命令行状态；  &lt;code&gt;graphical.target&lt;/code&gt;  表示图形用户状态，它依赖于  &lt;code&gt;multi-user.target&lt;/code&gt;  。官方文档有一张非常清晰的 [Target 依赖关系图](&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuZnJlZWRlc2t0b3Aub3JnL3NvZnR3YXJlL3N5c3RlbWQvbWFuL2Jvb3R1cC5odG1sI1N5c3RlbQ==&#34;&gt;https://www.freedesktop.org/software/systemd/man/bootup.html#System&lt;/span&gt; Manager Bootup)。&lt;/p&gt;
&lt;p&gt;嘛，如果你是用图形界面的，也是可以用  &lt;code&gt;multi-user.target&lt;/code&gt;  的，因为  &lt;code&gt;graphical.target&lt;/code&gt;  依赖  &lt;code&gt;multi-user.target&lt;/code&gt;  ，可以利用命令  &lt;code&gt;systemctl list-units --type=target&lt;/code&gt;  查看到  &lt;code&gt;multi-user.target&lt;/code&gt;  是处于 Active 状态的。&lt;/p&gt;
&lt;p&gt;最后，重新加载所有的 systemd 服务，打开自启动并启动服务，其中  &lt;code&gt;@&lt;/code&gt;  后面跟随的是你的 wol 网卡名称：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl daemon-reload&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl &lt;span class=&#34;token builtin class-name&#34;&gt;enable&lt;/span&gt; wol@eno1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl start wol@eno1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;对于 systemd 服务的控制，可以使用如下命令：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;command&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;unit&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;[command]：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;start：立刻启动后面接的 unit。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;stop：立刻关闭后面接的 unit。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;restart：立刻关闭后启动后面接的 unit，亦即执行 stop 再 start 的意思。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;reload：不关闭 unit 的情况下，重新载入配置文件，让设置生效。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;enable：设置下次开机时，后面接的 unit 会被启动。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;disable：设置下次开机时，后面接的 unit 不会被启动。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;status：目前后面接的这个 unit 的状态，会列出有没有正在执行、开机时是否启动等信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;is-active：目前有没有正在运行中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;is-enable：开机时有没有默认要启用这个 unit。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;kill ：不要被 kill 这个名字吓着了，它其实是向运行 unit 的进程发送信号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;show：列出 unit 的配置。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mask：注销 unit，注销后你就无法启动这个 unit 了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;unmask：取消对 unit 的注销。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一些其它命令：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl poweroff &lt;span class=&#34;token comment&#34;&gt;# 系统关机&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl &lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# 重新开机&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl &lt;span class=&#34;token function&#34;&gt;suspend&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;# 进入暂停模式&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl hibernate &lt;span class=&#34;token comment&#34;&gt;# 进入休眠模式&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl rescue &lt;span class=&#34;token comment&#34;&gt;# 强制进入救援模式&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl emergency &lt;span class=&#34;token comment&#34;&gt;# 强制进入紧急救援模式&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;资料：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvV2FrZS1vbi1MQU4=&#34;&gt;https://wiki.archlinux.org/title/Wake-on-LAN&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmRlYmlhbi5vcmcvV2FrZU9uTGFu&#34;&gt;https://wiki.debian.org/WakeOnLan&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;异常记录查看&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#异常记录查看&#34;&gt;#&lt;/a&gt; 异常记录查看&lt;/h2&gt;
&lt;p&gt;使用  &lt;code&gt;last -x shutdown reboot&lt;/code&gt;  命令可以查看系统的关机和重启记录，包括异常关机。该命令会显示每次关机或重启的时间、持续时间。&lt;/p&gt;
&lt;p&gt;使用  &lt;code&gt;dmesg | grep &amp;quot;shutdown&amp;quot;&lt;/code&gt;  命令可以查看内核的消息缓冲区，筛选出关机的相关信息。&lt;/p&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy85ODE5L2hvdy10by1maW5kLW91dC1mcm9tLXRoZS1sb2dzLXdoYXQtY2F1c2VkLXN5c3RlbS1zaHV0ZG93bg==&#34;&gt;https://unix.stackexchange.com/questions/9819/how-to-find-out-from-the-logs-what-caused-system-shutdown&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4MzQ1NjU3L2FydGljbGUvZGV0YWlscy8xMjY4MzMxMzE=&#34;&gt;https://blog.csdn.net/qq_28345657/article/details/126833131&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;系统备份&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#系统备份&#34;&gt;#&lt;/a&gt; 系统备份&lt;/h2&gt;
&lt;p&gt;linux 系统说白了就是一个强大的文件系统，既然是文件，哪能不能像日常备份文件那样直接压缩备份呢？答案是可以，只是在备份压缩的时候注意把各个文件的权限都保留下来。&lt;/p&gt;
&lt;p&gt;在备份之前先了解一下 linux 的系统目录结构：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;文件夹&lt;/th&gt;
&lt;th&gt;英文全称&lt;/th&gt;
&lt;th&gt;文件夹作用&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/boot&lt;/td&gt;
&lt;td&gt;Boot&lt;/td&gt;
&lt;td&gt;存放的启动 Linux 时使用的内核文件，包括连接文件以及镜像文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/bin&lt;/td&gt;
&lt;td&gt;Binaries&lt;/td&gt;
&lt;td&gt;存放着最常用的程序和指令，所有用户都可以执行。是  &lt;code&gt;/usr/bin&lt;/code&gt;  目录的软连接。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/sbin&lt;/td&gt;
&lt;td&gt;Super User Binaries&lt;/td&gt;
&lt;td&gt;保存和系统环境设置相关的命令，只有超级用户可以使用这些命令，有些命令可以允许普通用户查看。是  &lt;code&gt;/usr/sbin&lt;/code&gt;  目录的软连接。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/usr&lt;/td&gt;
&lt;td&gt;Unix Software Resources&lt;/td&gt;
&lt;td&gt;用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/usr/bin&lt;/td&gt;
&lt;td&gt;Unix Software Resources Binaries&lt;/td&gt;
&lt;td&gt;系统用户使用的应用程序与指令。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/usr/sbin&lt;/td&gt;
&lt;td&gt;Unix Software Resources Superuser Binaries&lt;/td&gt;
&lt;td&gt;超级用户使用的比较高级的管理程序和系统守护程序。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/usr/local&lt;/td&gt;
&lt;td&gt;Unix Software Resources Local&lt;/td&gt;
&lt;td&gt;安装第三方软件的安装目录，一般是通过编译源码的方式安装的程序。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/usr/src&lt;/td&gt;
&lt;td&gt;Unix Software Resources Source&lt;/td&gt;
&lt;td&gt;内核源代码默认的放置目录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/dev&lt;/td&gt;
&lt;td&gt;Devices&lt;/td&gt;
&lt;td&gt;存放的是 Linux 的外部设备。注意：在 Linux 中访问设备和访问文件的方式是相同的。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/etc&lt;/td&gt;
&lt;td&gt;Editable Text Configuration Chest&lt;/td&gt;
&lt;td&gt;存放所有的系统需要的配置文件和子目录列表，更改目录下的文件可能会导致系统不能启动。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/opt&lt;/td&gt;
&lt;td&gt;Optional Application Software Packages&lt;/td&gt;
&lt;td&gt;可选应用软件包，第三方安装的软件保存位置，存放软件安装包。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/lib&lt;/td&gt;
&lt;td&gt;Library&lt;/td&gt;
&lt;td&gt;存放基本代码库（比如 c++ 库），其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/proc&lt;/td&gt;
&lt;td&gt;Processes&lt;/td&gt;
&lt;td&gt;虚拟文件系统，数据保存在内存中，存放当前进程信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/root&lt;/td&gt;
&lt;td&gt;Root&lt;/td&gt;
&lt;td&gt;系统管理员的用户主目录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/tmp&lt;/td&gt;
&lt;td&gt;Temporary&lt;/td&gt;
&lt;td&gt;存放临时文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/var&lt;/td&gt;
&lt;td&gt;Variable&lt;/td&gt;
&lt;td&gt;存放经常修改的数据，比如程序运行的日志文件（ &lt;code&gt;/var/log&lt;/code&gt;  目录下）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/home&lt;/td&gt;
&lt;td&gt;Home&lt;/td&gt;
&lt;td&gt;用户缺省宿主目录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/lost+found&lt;/td&gt;
&lt;td&gt;Lost And Found&lt;/td&gt;
&lt;td&gt;一般情况下为空的，存放一些系统出错的检查结果&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/srv&lt;/td&gt;
&lt;td&gt;Server&lt;/td&gt;
&lt;td&gt;服务数据目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/sys&lt;/td&gt;
&lt;td&gt;System&lt;/td&gt;
&lt;td&gt;这是 linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs。sysfs 文件系统集成了下面 3 种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/mnt&lt;/td&gt;
&lt;td&gt;Mount&lt;/td&gt;
&lt;td&gt;挂载目录。临时文件系统的安装点，默认挂载光驱和软驱的目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/media&lt;/td&gt;
&lt;td&gt;Media&lt;/td&gt;
&lt;td&gt;挂载目录。 挂载媒体设备，如软盘和光盘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/misc&lt;/td&gt;
&lt;td&gt;Miscellaneous Device&lt;/td&gt;
&lt;td&gt;挂载目录。 挂载 NFS 服务&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/run&lt;/td&gt;
&lt;td&gt;Run&lt;/td&gt;
&lt;td&gt;里面的东西是系统运行时需要的，不能随便删除。当系统重启时，这个目录下的文件应该被删掉或清除；下次系统运行时重新生成。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;备份系统：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-s&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;cd&lt;/span&gt; /&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;tar&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-zcvpf&lt;/span&gt; backup.tgz &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/proc &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/lost+found &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/backup.tgz &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/mnt &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/sys &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/media &lt;span class=&#34;token parameter variable&#34;&gt;--exclude&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/srv/dev-disk-by-uuid* /&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;恢复系统：&lt;/p&gt;
&lt;p&gt;如果原来的 Debian 系统已经崩溃，无法进入。则可以在目标机上用 ISO、LiveCD 等启动，挂载磁盘（一般会自动挂载到  &lt;code&gt;/media&lt;/code&gt;  文件夹）&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-s&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;tar&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-zcvpf&lt;/span&gt; backup.tgz &lt;span class=&#34;token parameter variable&#34;&gt;-C&lt;/span&gt; /media/&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;对应的磁盘&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-p&lt;/span&gt; proc lost+found mnt sys media&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;安装-openmediavault-6x&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装-openmediavault-6x&#34;&gt;#&lt;/a&gt; 安装 openmediavault 6.x&lt;/h1&gt;
&lt;p&gt;在操作如下流程前，要进行备份！备份！备份！&lt;/p&gt;
&lt;p&gt;具体安装以 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NzLm9wZW5tZWRpYXZhdWx0Lm9yZy9lbi9sYXRlc3QvaW5zdGFsbGF0aW9uL29uX2RlYmlhbi5odG1s&#34;&gt;https://docs.openmediavault.org/en/latest/installation/on_debian.html&lt;/span&gt; 为准。&lt;/p&gt;
&lt;p&gt;1、临时配置环境变量&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;&lt;span class=&#34;token environment constant&#34;&gt;LANG&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;C.UTF-8&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;DEBIAN_FRONTEND&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;noninteractive&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token builtin class-name&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;APT_LISTCHANGES_FRONTEND&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;none&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;2、添加软件包存储库&lt;/p&gt;
&lt;p&gt;进入文件编辑：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/apt/sources.list.d/openmediavault.list&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后粘贴以下存储库链接（这里使用的是 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9taXJyb3JzLmJmc3UuZWR1LmNuL2hlbHAvb3Blbm1lZGlhdmF1bHQv&#34;&gt;北外镜像&lt;/span&gt;，以加快国内访问速度，当然你也可以使用源链接），保存退出：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;span&gt;openmediavault.list&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public shaitan main&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;deb https://mirrors.bfsu.edu.cn/OpenMediaVault/packages shaitan main&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## Uncomment the following line to add software from the proposed repository.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public shaitan-proposed main&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# deb https://mirrors.bfsu.edu.cn/OpenMediaVault/packages shaitan-proposed main&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## This software is not part of OpenMediaVault, but is offered by third-party&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;## developers as a service to OpenMediaVault users.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public shaitan partner&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# deb https://mirrors.bfsu.edu.cn/OpenMediaVault/packages shaitan partner&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;3、添加 openmediavault 密钥&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt-get&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;--yes&lt;/span&gt; gnupg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;wget&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;--quiet&lt;/span&gt; --output-document&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;- https://packages.openmediavault.org/public/archive.key &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; gpg &lt;span class=&#34;token parameter variable&#34;&gt;--dearmor&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;--yes&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;--output&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/usr/share/keyrings/openmediavault-archive-keyring.gpg&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;4、更新软件包源并安装 omv&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt-get&lt;/span&gt; update&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt-get&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;--yes&lt;/span&gt; --auto-remove --show-upgraded &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    --allow-downgrades --allow-change-held-packages &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    --no-install-recommends &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token parameter variable&#34;&gt;--option&lt;/span&gt; DPkg::Options::&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;--force-confdef&#34;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token parameter variable&#34;&gt;--option&lt;/span&gt; DPkg::Options::&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;--force-confold&#34;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;\&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; openmediavault&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;5、同步系统配置&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-confdbadm populate&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;对于网络服务，现在只解析  &lt;code&gt;/etc/network/interfaces&lt;/code&gt;  以获取当前的网络配置。 如果以不同的方式配置网络（例如通过  &lt;code&gt;systemd&lt;/code&gt;  或  &lt;code&gt;NetworkManager&lt;/code&gt; ），则不会填充数据库，并且不包含使用  &lt;code&gt;netplan for systemd-networkd 和 systemd-resolved&lt;/code&gt;  部署网络配置所需的信息。 在这种情况下，请使用  &lt;code&gt;omv-firstaid&lt;/code&gt;  命令执行初始网络配置。&lt;/p&gt;
&lt;p&gt;如果想通过 openmediavault 使用的服务重新部署网络配置，则执行：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/network/interfaces&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后把里面的网卡配置用  &lt;code&gt;#&lt;/code&gt;  注释掉，接着：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;rm&lt;/span&gt; /etc/systemd/network/*&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;netplan apply&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-salt deploy run systemd-networkd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;omv6-基本配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#omv6-基本配置&#34;&gt;#&lt;/a&gt; omv6 基本配置&lt;/h2&gt;
&lt;h2 id=&#34;用户账户设置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#用户账户设置&#34;&gt;#&lt;/a&gt; 用户账户设置&lt;/h2&gt;
&lt;p&gt;安装完 omv 后，如果有使用  &lt;code&gt;同步系统配置&lt;/code&gt;  操作，那么，在  &lt;code&gt;用户&lt;/code&gt;  -&amp;gt;  &lt;code&gt;用户&lt;/code&gt;  管理中可以看到前面安装系统时创建的用户，之后，你可以在这里创建或修改各类用户；为了安全你也可以禁掉 root 用户，以避免 root 登录，需要注意权限问题，避免登录 omv web 无法操作。&lt;/p&gt;
&lt;p&gt;note：如果存在多个用户，在众多用户里，至少要有一个用户添加到  &lt;code&gt;openmediavault-admin&lt;/code&gt;  的  &lt;code&gt;ssh group&lt;/code&gt;  中，这将决定在登录 omv web 后是否拥有配置操作，否则任意用户登录 omv web 上都不存完整的配置操作。具体可看 &lt;strong&gt;omv 登陆后界面只剩仪表盘&lt;/strong&gt; 。&lt;/p&gt;
&lt;h2 id=&#34;配置-ssh&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#配置-ssh&#34;&gt;#&lt;/a&gt; 配置 SSH&lt;/h2&gt;
&lt;p&gt;进入  &lt;code&gt;服务&lt;/code&gt;  -&amp;gt;  &lt;code&gt;SSH&lt;/code&gt; ，选择勾选  &lt;code&gt;已启用&lt;/code&gt;  选项，接着按个人需求修改配置，同时为能 SSH 登录操作的用户添加到  &lt;code&gt;ssh group&lt;/code&gt;  ；如果你想为了安全，而选择关闭  &lt;code&gt;允许 root 登陆&lt;/code&gt;  和  &lt;code&gt;密码验证&lt;/code&gt;  选项，那么需要注意的是，至少要为一个用户添加  &lt;code&gt;ssh group&lt;/code&gt;  ，否则将没有用户可以登录 SSH，同时为用户配置好 SSH 密钥对。&lt;/p&gt;
&lt;p&gt;note：SSH 密钥对生成，需要先在本机系统中（即需要控制的机器上，一般就是我们的 windows 系统上），输入  &lt;code&gt;ssh-keygen&lt;/code&gt;  命令，然后输入存储的路径及命名  &lt;code&gt;~/.ssh/omv-id_rsa&lt;/code&gt;  ，如果需要为调用私钥而添加密码认证，则输入密码，否者直接留空回车，不设密码，最后再次确认回车，至此就生成了 SSH 密钥对了；紧接着在 omv web 的  &lt;code&gt;用户&lt;/code&gt;  -&amp;gt;  &lt;code&gt;用户&lt;/code&gt;  中选择你需要进行 SSH 密钥登录的账户，然后编辑，在  &lt;code&gt;SSH 公钥&lt;/code&gt;  中添加刚才生成的密钥对中的公钥（即  &lt;code&gt;omv-id_rsa.pub&lt;/code&gt;  ），至此就完成了。&lt;/p&gt;
&lt;h2 id=&#34;创建-raid-软阵列&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#创建-raid-软阵列&#34;&gt;#&lt;/a&gt; 创建 Raid 软阵列&lt;/h2&gt;
&lt;p&gt;在这里，不选择在 omv 页面上创建，而是使用命令创建。以 Raid 1 为例：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;准备两个硬盘，最好使用同型号的不同批次跟产期的，如果选择不同型号的，那么要考虑转速、缓存、容量这些尽可能一致。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;lsblk&lt;/code&gt;  获取需要建立 Raid 的磁盘名称  &lt;code&gt;sdx&lt;/code&gt;  （sdx 可以为 sda、sdb 等）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用  &lt;code&gt;fdisk /dev/sdx&lt;/code&gt;  分别为两块磁盘创建单一分区。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;m&lt;/code&gt;  ：查看命令操作。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;d&lt;/code&gt;  ：删除已有分区。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;n&lt;/code&gt;  ：创建新的分区。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;p&lt;/code&gt;  ：查看创建分区。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;w&lt;/code&gt;  ：应用分区信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;按 n 创建新的分区。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;然后按 p 选择主分区。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;接下来选择分区号为 1。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;按两次回车键默认将整个容量分配给它。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;然后，按 p 来打印创建好的分区。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;按 l，列出所有可用的类型。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;按 t 修改分区类型。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;键入 29 设置为 Linux 的 RAID 类型，然后按 Enter 确认。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;然后再次使用 p 查看我们所做的更改。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;使用 w 保存更改。&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;利用  &lt;code&gt;mdadm&lt;/code&gt;  命令建立 Raid 软阵列。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;检查 sdx 分区并确认 Raid 分区的类型  &lt;code&gt;mdadm -E /dev/sdx&lt;/code&gt;  。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;假设用  &lt;code&gt;dev/sdb1&lt;/code&gt;  和  &lt;code&gt;dev/sdc1&lt;/code&gt;  两个磁盘创建一个名为  &lt;code&gt;/dev/md0&lt;/code&gt;  的 Raid 1 设备  &lt;code&gt;mdadm --create /dev/md0 --level=1 --raid-device=2 /dev/sd[b-c]1&lt;/code&gt;  。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看 Raid 同步状态  &lt;code&gt;cat /proc/mdstat&lt;/code&gt;  。初次建立构建，需要很长一段时间。可以通过以下命令调整 Raid 同步速度：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sysctl&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-w&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;dev.raid.speed_limit_max&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;2000000&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sysctl&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-w&lt;/span&gt; &lt;span class=&#34;token assign-left variable&#34;&gt;dev.raid.speed_limit_min&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;100000&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用  &lt;code&gt;mdadm -E /dev/sdx1&lt;/code&gt;  分别查看 Raid 设备类型。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;为  &lt;code&gt;dev/md0&lt;/code&gt;  创建 ext4 文件系统  &lt;code&gt;mkfs.ext4 /dev/md0&lt;/code&gt;  ，最好等初始化构建完成后操作。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;检查 Raid 信息  &lt;code&gt;mdadm -D /dev/md0&lt;/code&gt;  。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;常见的 RAID 磁盘阵列：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;阵列&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;th&gt;特点&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;JBOD（线性）&lt;/td&gt;
&lt;td&gt;JBOD 不是标准的 RAID 级别，它只是在近几年才被一些厂家提出，并被广泛采用。虽然 JBOD 让多个磁盘看来似乎只有一个，但它是通过把多个驱动器合并成一个大的逻辑磁盘来做到这一点的。&lt;/td&gt;
&lt;td&gt;- 任意一块硬盘损坏，整个 JBOD 都无法使用。&amp;lt;br/&amp;gt;- 未损坏的硬盘上的数据不会丢失，但恢复数据存在门槛。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RAID 0&lt;/td&gt;
&lt;td&gt;RAID 0 是组建磁盘阵列中最简单的一种形式，只需要 2 块以上的硬盘即可。 RAID 0 是 RAID 磁盘阵列中性能最好的硬盘组合方式，但没有提供冗余或错误修复能力。&lt;/td&gt;
&lt;td&gt;按照一定规则，将文件拆分存储在 RAID 0 中，一旦一块硬盘损坏，整个 RAID 0 的所有数据全部丢失。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RAID 1（镜像）&lt;/td&gt;
&lt;td&gt;RAID 1 称为磁盘镜像，由至少 2 块硬盘组成。原理是把一个磁盘的数据镜像到另一个磁盘上，也就是说数据在写入一块磁盘的同时，会在另一块闲置的磁盘上生成镜像文件。只要系统中任何一对镜像盘中至少有一块磁盘可以使用，甚至可以在一半数量的硬盘出现问题时系统都可以正常运行。它是 RAID 磁盘阵列中性能最差，数据安全性最佳的。&lt;/td&gt;
&lt;td&gt;会损失一半硬盘容量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RAID 5&lt;/td&gt;
&lt;td&gt;RAID 5 被称为 “分布式奇偶校验的独立磁盘结构” ，需最低 3 块硬盘组成。&amp;lt;br/&amp;gt; 每在 RAID 5 中存入一个文件，3 块硬盘中：1 块用于存储该文件；2 块用于生成奇偶校验信息。&lt;/td&gt;
&lt;td&gt;只要 RAID 5 中只有 1 块硬盘损坏，就可以替换该硬盘并恢复数据；会损失 1 块硬盘容量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RAID 6&lt;/td&gt;
&lt;td&gt;RAID 6 是对 RAID 5 的扩展，需最低 4 块硬盘组成。&amp;lt;br/&amp;gt; 每在 RAID 6 中存入一个文件，4 块硬盘中：2 块用于存储该文件；2 块用于生成奇偶校验信息。&lt;/td&gt;
&lt;td&gt;只要 RAID 6 中有任意 2 块硬盘损坏，就可以替换这 2 块硬盘并恢复数据；会损失 2 块硬盘容量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RAID 10&lt;/td&gt;
&lt;td&gt;RAID 10 需要至少 4 块硬盘组成，每 2 块硬盘组成一个 RAID 1 ，2 个 RAID 1 组成一个 RAID 0 。性能与安全性在 RAID 0 和 RAID 1 中取得了一个平衡。&lt;/td&gt;
&lt;td&gt;性能比 RAID 0 差，比 RAID 1 高；安全性同于 RAID 1 。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;扩展：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZmVsaXgtenAvcC85NzM4NzI0Lmh0bWw=&#34;&gt;https://www.cnblogs.com/felix-zp/p/9738724.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuZmx5c2ZlcS5zaXRlL2luZGV4LnBocC9hcmNoaXZlcy82NS8=&#34;&gt;https://www.flysfeq.site/index.php/archives/65/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vMzd5YW4vcC83NDg5NTk3Lmh0bWw=&#34;&gt;https://www.cnblogs.com/37yan/p/7489597.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbHBmdXR1cmUvcC82Mzg1NjU3Lmh0bWw=&#34;&gt;https://www.cnblogs.com/lpfuture/p/6385657.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jbG91ZC1hdGxhcy5yZWFkdGhlZG9jcy5pby96aC1jbi9sYXRlc3QvbGludXgvc3RvcmFnZS9zb2Z0d2FyZV9yYWlkL3JhaWQtY2hlY2suaHRtbA==&#34;&gt;https://cloud-atlas.readthedocs.io/zh-cn/latest/linux/storage/software_raid/raid-check.html&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;替换更新镜像源&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#替换更新镜像源&#34;&gt;#&lt;/a&gt; 替换更新镜像源&lt;/h2&gt;
&lt;p&gt;配置基本链接的镜像源（原因是在你安装完 omv 后，前面配置的软件包存储库链接将会修改为官方默认的链接，此时需要重新设置镜像）：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_APT_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/OpenMediaVault/public&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_APT_ALT_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/OpenMediaVault/packages&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_APT_KERNEL_BACKPORTS_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/debian&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_APT_SECURITY_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/debian-security&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-salt stage run all&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后执行：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; update&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;reboot&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;重启后回到 omv 网页，你会看到有提示显示可以更新软件。&lt;/p&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;对于使用  &lt;code&gt;omv-env set&lt;/code&gt;  更换源，其实是在不同的  &lt;code&gt;openmediavault&lt;/code&gt;  文件写入，这些文件可以在  &lt;code&gt;/etc/apt/sources.list.d/&lt;/code&gt;  中找到。&lt;/p&gt;
&lt;h2 id=&#34;安装-omv-extras&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装-omv-extras&#34;&gt;#&lt;/a&gt; 安装 omv-extras&lt;/h2&gt;
&lt;p&gt;由于国内原因，防 github 解析错误，执行以下操作，如果这时候已经出现网络问题，则使用手动方法，查看 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9HaXRIdWI1MjA=&#34;&gt;GitHub520&lt;/span&gt; ：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sed&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-i&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;/# GitHub520 Host Start/Q&#34;&lt;/span&gt; /etc/hosts &lt;span class=&#34;token operator&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;curl&lt;/span&gt; https://raw.hellogithub.com/hosts &lt;span class=&#34;token operator&#34;&gt;&gt;&gt;&lt;/span&gt; /etc/hosts&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;根据&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLm9tdi1leHRyYXMub3JnL2Rva3UucGhwP2lkPW9tdjY6bmV3X3VzZXJfZ3VpZGUjb212LWV4dHJhcw==&#34;&gt;官方&lt;/span&gt;提供，安装 omv-extras：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;wget&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-O&lt;/span&gt; - https://github.com/OpenMediaVault-Plugin-Developers/packages/raw/master/install &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;bash&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后刷新 omv 网页，即可在  &lt;code&gt;系统&lt;/code&gt;  中找到 omv-extras。&lt;/p&gt;
&lt;p&gt;如果网络不好可以手动安装：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;进入 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL09wZW5NZWRpYVZhdWx0LVBsdWdpbi1EZXZlbG9wZXJzL3BhY2thZ2Vz&#34;&gt;https://github.com/OpenMediaVault-Plugin-Developers/packages&lt;/span&gt; 下载对应的插件包，然后把插件包放到 omv 上，路径自己决定，然后进入该路径执行：&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;dpkg &lt;span class=&#34;token parameter variable&#34;&gt;-i&lt;/span&gt; openmediavault-omvextrasorg_xxx.deb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;更新 omv-extras 镜像源：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_EXTRAS_APT_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_DOCKER_APT_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/docker-ce/linux/debian&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-env &lt;span class=&#34;token builtin class-name&#34;&gt;set&lt;/span&gt; OMV_PROXMOX_APT_REPOSITORY_URL &lt;span class=&#34;token string&#34;&gt;&#34;https://mirrors.bfsu.edu.cn/proxmox/debian&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;omv-salt stage run all&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;安装-docker&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装-docker&#34;&gt;#&lt;/a&gt; 安装 docker&lt;/h2&gt;
&lt;p&gt;进入  &lt;code&gt;系统&lt;/code&gt;  -&amp;gt;  &lt;code&gt;插件&lt;/code&gt; ，搜索  &lt;code&gt;compose&lt;/code&gt;  ，点击选择下载，然后等待下载完成；&lt;/p&gt;
&lt;p&gt;进入  &lt;code&gt;系统&lt;/code&gt;  -&amp;gt;  &lt;code&gt;omv-extras&lt;/code&gt; ，勾选  &lt;code&gt;Docker repo&lt;/code&gt; ，点保存；&lt;/p&gt;
&lt;p&gt;最后在  &lt;code&gt;服务&lt;/code&gt;  -&amp;gt;  &lt;code&gt;Compose&lt;/code&gt;  中可以找到  &lt;code&gt;设置&lt;/code&gt; ，查看 Docker 状态是否为  &lt;code&gt;Installed and running&lt;/code&gt; ，如果不是，可以尝试重启 Docker 或者重新安装 Docker；再不行就回到第二点先取消勾选接着保存，然后再把   &lt;code&gt;Docker repo&lt;/code&gt;  勾选上保存并重复后面操作。&lt;/p&gt;
&lt;p&gt;参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLm9tdi1leHRyYXMub3JnL2Rva3UucGhwP2lkPW9tdjY6ZG9ja2VyX2luX29tdiNkb2t1d2lraV9fdG9w&#34;&gt;https://wiki.omv-extras.org/doku.php?id=omv6:docker_in_omv#dokuwiki__top&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;如果 Docker 无法运行，输入  &lt;code&gt;systemctl status docker&lt;/code&gt;  查看状态，然后再执行  &lt;code&gt;systemctl restart docker&lt;/code&gt;  看是否成功，如果显示如下错误：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Job for docker.service failed because the control process exited with error code.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;See &#34;systemctl status docker.service&#34; and &#34;journalctl -xe&#34; for details.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;可以使用命令  &lt;code&gt;journalctl -xe&lt;/code&gt;  和  &lt;code&gt;dockerd --debug&lt;/code&gt;  来分析无法运行的错误。&lt;/p&gt;
&lt;p&gt;参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTU5MDY1MDMvZG9ja2VyLWhvdy10by1maXgtam9iLWZvci1kb2NrZXItc2VydmljZS1mYWlsZWQtYmVjYXVzZS10aGUtY29udHJvbC1wcm9jZXNzLWV4&#34;&gt;https://stackoverflow.com/questions/55906503/docker-how-to-fix-job-for-docker-service-failed-because-the-control-process-ex&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;docker-换源&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#docker-换源&#34;&gt;#&lt;/a&gt; docker 换源&lt;/h3&gt;
&lt;p&gt;编辑  &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;  配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/docker/daemon.json&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;更改为以下信息：&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption data-lang=&#34;JSON&#34;&gt;&lt;span&gt;daemon.json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token property&#34;&gt;&#34;data-root&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;/var/lib/docker&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;//docker 存储路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token property&#34;&gt;&#34;registry-mirrors&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token string&#34;&gt;&#34;https://docker.mirrors.ustc.edu.cn&#34;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// 更改换源&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token property&#34;&gt;&#34;storage-driver&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;overlay2&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token property&#34;&gt;&#34;storage-opts&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token string&#34;&gt;&#34;overlay2.override_kernel_check=true&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token string&#34;&gt;&#34;overlay2.size=15G&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token property&#34;&gt;&#34;log-driver&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;json-file&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token property&#34;&gt;&#34;log-opts&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token property&#34;&gt;&#34;max-size&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;80m&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token property&#34;&gt;&#34;max-file&#34;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;3&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;note：如果是在  &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;  文件上指定 Docker 存储路径，那么，在  &lt;code&gt;服务&lt;/code&gt;  -&amp;gt;  &lt;code&gt;Compose&lt;/code&gt;  -&amp;gt;  &lt;code&gt;设置&lt;/code&gt;  -&amp;gt;  &lt;code&gt;Docker&lt;/code&gt;  中的  &lt;code&gt;Docker 存储&lt;/code&gt;  上留空配置（该下方有备注说明）。&lt;/p&gt;
&lt;p&gt;最后，使用如下命令重启生效：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl daemon-reload&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;systemctl restart &lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;完成后使用  &lt;code&gt;docker info&lt;/code&gt;  命令，查看  &lt;code&gt;Registry Mirrors:&lt;/code&gt;  是否为配置的镜像源。&lt;/p&gt;
&lt;p&gt;测试 docker 镜像下载，可以通过拉取 helloword 镜像测试：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;docker&lt;/span&gt; pull helloword&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果成功拉取则证明当前配置能成功链接上 docker hub 镜像网上，否则则需要检查网络及镜像源是否有效。&lt;/p&gt;
&lt;h2 id=&#34;docker-应用部署&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#docker-应用部署&#34;&gt;#&lt;/a&gt; docker 应用部署&lt;/h2&gt;
&lt;p&gt;安装完 docker 后，那么你就可以用它部署各种好玩的应用，例如：私人影院、音乐播放、相册管理等；&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://arachnid.cc/tags/docker/&#34;&gt;https://arachnid.cc/tags/docker/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;other&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#other&#34;&gt;#&lt;/a&gt; other&lt;/h1&gt;
&lt;h2 id=&#34;omv-登陆后界面只剩仪表盘&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#omv-登陆后界面只剩仪表盘&#34;&gt;#&lt;/a&gt; omv 登陆后界面只剩仪表盘&lt;/h2&gt;
&lt;p&gt;一般会出现这种情况是因为更换了用户，但管理权限没有给过去，或者以非管理员登录等，总之就是登录用户没有足够的权限，如果你还禁止了 root 登录，那么你可以使用如下命令把权限给到你要登录的用户  &lt;code&gt;USER_NAME&lt;/code&gt;  上：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[user@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;usermod&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-a&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-G&lt;/span&gt; openmediavault-admin USER_NAME&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9mb3J1bS5vcGVubWVkaWF2YXVsdC5vcmcvaW5kZXgucGhwP3RocmVhZC80NTQ0My1vbXY2LXdlYi1ndWktb25seS13aXRoLWRhc2hib2FyZC1sb3N0LWV2ZXJ5dGhpbmctYW5kLWktbS1hZG1pbi11c2VyLw==&#34;&gt;https://forum.openmediavault.org/index.php?thread/45443-omv6-web-gui-only-with-dashboard-lost-everything-and-i-m-admin-user/&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;devdm-文件系统&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#devdm-文件系统&#34;&gt;#&lt;/a&gt; /dev/dm-* 文件系统&lt;/h2&gt;
&lt;p&gt;dm 是 Device Mapper 的缩写，Device Mapper 是 Linux 2.6 内核中提供的一种从逻辑设备到物理设备的映射框架机制，在该机制下，用户可以很方便的根据自己的需要制定实现存储资源的管理策略，当前比较流行的 Linux 下的逻辑卷管理器如 LVM2（Linux Volume Manager 2 version)、EVMS (Enterprise Volume Management System)、dmraid (Device Mapper Raid Tool) 等都是基于该机制实现的。&lt;/p&gt;
&lt;p&gt;既然是映射，那么就有对应关系，那到底对应着什么，可以使用如下命令查看：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;dm-*&lt;/code&gt;  一般是在  &lt;code&gt;/dev&lt;/code&gt;  文件夹里，而且还不止一个，可以使用  &lt;code&gt;ls /dev/dm*&lt;/code&gt;  查看所有  &lt;code&gt;dm&lt;/code&gt;  设备映射。&lt;/li&gt;
&lt;li&gt;使用命令  &lt;code&gt;dmsetup ls&lt;/code&gt;  查看  &lt;code&gt;dm-*&lt;/code&gt;  对应的设备，其中  &lt;code&gt;dm&lt;/code&gt;  后面的数字对应（xxx， xx）里的第二个数字。如果想详细查看信息，可以使用  &lt;code&gt;dmsetup info&lt;/code&gt;  命令，而  &lt;code&gt;Major, minor:&lt;/code&gt;  对应 （xxx， xx）。&lt;/li&gt;
&lt;li&gt;输入  &lt;code&gt;more /etc/fstab&lt;/code&gt;  命令查找对应关系，如此便能找到映射点。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;挂载新硬盘文件系统失败&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#挂载新硬盘文件系统失败&#34;&gt;#&lt;/a&gt; 挂载新硬盘文件系统失败&lt;/h2&gt;
&lt;p&gt;这里导致出现的问题是新硬盘替换旧硬盘，然后旧硬盘可能有共享、引用之类的，因此在旧硬盘不存在的情况下，当你为新硬盘建立了文件系统后，并为其挂载保存的的时候，会出现无法保存并挂载成功，这时候就必须先把旧的不存在的硬盘的文件系统卸载掉先，否者会影响新的文件系统挂载；而如果旧的文件系统是有使用共享服务的，那么需要根据其依赖关系（ &lt;code&gt;磁盘&lt;/code&gt;  -&amp;gt;  &lt;code&gt;文件系统&lt;/code&gt;  -&amp;gt;  &lt;code&gt;共享文件夹&lt;/code&gt;  -&amp;gt;  &lt;code&gt;服务(SMB, FTP等)&lt;/code&gt; ）逐步解除并保证卸载成功，这样才可以为新的硬盘挂载文件系统。&lt;/p&gt;
&lt;h2 id=&#34;手动测试硬盘&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#手动测试硬盘&#34;&gt;#&lt;/a&gt; 手动测试硬盘&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vc21hcnRjdGwuOA==&#34;&gt;smartctl&lt;/span&gt; 分析硬盘
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;smartctl -i /dev/sdxy&lt;/code&gt;  显示磁盘基本信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;smartctl -H /dev/sdxy&lt;/code&gt;  显示硬盘的健康状况。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;smartctl -A /dev/sdxy&lt;/code&gt;  显示硬盘的详细信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;smartctl -t short /dev/sdxy&lt;/code&gt;  后台检测硬盘，消耗时间短，用第二条命令查看结果。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;smartctl -t long /dev/sdxy&lt;/code&gt;  后台检测硬盘，消耗时间长，用第二条命令查看结果。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;smartctl -l selftest /dev/sdxy&lt;/code&gt;  显示硬盘检测日志。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;smartctl -l error /dev/sda&lt;/code&gt;  显示硬盘错误汇总。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vYmFkYmxvY2tzLjg=&#34;&gt;badblocks&lt;/span&gt; 扫描硬盘
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;badblocks -sv -b 512 -o ~/sdx_blocks.txt /dev/sdx&lt;/code&gt;  前台显示扫描进度，并将结果保存到文档上。&lt;/li&gt;
&lt;li&gt;-b, 指定磁盘区块大小，单位 byte，理解为最小扫描单位。（如果显示： &lt;code&gt;badblocks: Value too large for defined data type invalid end block (15628053168): must be 32-bit value&lt;/code&gt;  则说明设置的 block 大小太小了，可用  &lt;code&gt;fdisk -l /dev/sdx &lt;/code&gt;  查看硬盘 block 最小区块大小）&lt;/li&gt;
&lt;li&gt;-o, 指定扫描结果的输出路径&lt;/li&gt;
&lt;li&gt;-s, 检查时显示进度&lt;/li&gt;
&lt;li&gt;-v, 检查时显示详细的信息&lt;/li&gt;
&lt;li&gt;-w, 检查时执行有破坏性的写入测试，注意这个操作会破坏硬盘上的数据，请提前做好数据备份&lt;/li&gt;
&lt;li&gt;-n, 检查时执行没有破坏性的写入测试，只读操作&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vaGRwYXJtLjg=&#34;&gt;hdparm&lt;/span&gt; 测硬盘读速
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;hdparm -Ttv /dev/sdxy&lt;/code&gt;  该命令将显示磁盘的缓存和读性能。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hdparm -tv --direct /dev/sdxy&lt;/code&gt;  添加  &lt;code&gt;--direct&lt;/code&gt;  选项将绕过硬盘驱动器的缓冲区高速缓存，从而直接从磁盘读取。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vZGQuMQ==&#34;&gt;dd&lt;/span&gt; 测硬盘写速
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sync; dd if=/dev/zero of=/srv/dev-disk-by-uuid-xxx/tempfile bs=1M count=5120; sync&lt;/code&gt;  以 1MByte 为单位，写入 5120 次，即写入往 tempfile 文件写入 5GB 大小的零数据值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;omv-开关机导致硬盘不安全计数增加&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#omv-开关机导致硬盘不安全计数增加&#34;&gt;#&lt;/a&gt; omv 开关机导致硬盘不安全计数增加&lt;/h2&gt;
&lt;p&gt;在 SCSI disk 中，有一个  &lt;code&gt;manage_start_stop&lt;/code&gt;  flag，它可以控制 disk 的启停，将该值置 1 的时候，将使得 disk 减速关闭，从而让 disk 关机时磁头会复位；如果关机时 disk 磁头不复位直接断电，就会有磁头弹回去的声音，并且这种情况下，硬盘的 SMART 数据里，C0（不安全关机计数）的值应该会 +1，硬盘也有损坏的风险。&lt;/p&gt;
&lt;p&gt;因此，正常情况下，普通 SATA 硬盘的这项属性的值默认为 1，关机时磁头会复位。可以通过下面的命令查看所有磁盘这项属性的值：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/class/scsi_disk/*/manage_start_stop&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果上面的文件不存在，可以使用以下命令查看：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;cat&lt;/span&gt; /sys/block/sdX/device/scsi_disk/*/manage_start_stop&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# sdX 为对应硬盘符&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后，对于修改，可以使用：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;token for-or-select variable&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; /sys/class/scsi_disk/*/manage_start_stop&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;token builtin class-name&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token variable&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;done&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;对所有的 SCSI disk 进行更改，同样的，可以把该条命令增加至开机脚本，使其每次生效。&lt;/p&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cubGludXgtYXRhLm9yZy9zaHV0ZG93bi5odG1s&#34;&gt;Serial ATA (SATA) shutdown info&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yb21hY28uY2EvYmxvZy8yMDE3LzA4LzA2L2hvdy10by1zcGluLWRvd24taGFyZC1kaXNrcy1hdC1zaHV0ZG93bi1vbi1sc2ktaGJhcy1vbi1saW51eC8=&#34;&gt;How To Spin Down Hard Disks at Shutdown on LSI HBAs on Linux&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3RvcnZhbGRzL2xpbnV4L2NvbW1pdC8zY2MyZmZlNWMxNmRjNjVkZmFjMzU0YmM1YjViYzk4ZDNiMzk3NTY3&#34;&gt;https://github.com/torvalds/linux/commit/3cc2ffe5c16dc65dfac354bc5b5bc98d3b397567&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;硬盘-apm-及-aam-设置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#硬盘-apm-及-aam-设置&#34;&gt;#&lt;/a&gt; 硬盘 APM 及 AAM 设置&lt;/h2&gt;
&lt;p&gt;在 omv wed 的  &lt;code&gt;存储器&lt;/code&gt;  -&amp;gt;  &lt;code&gt;磁盘&lt;/code&gt;  -&amp;gt;  &lt;code&gt;编辑&lt;/code&gt;  中，存在 APM（高级电源管理）和 AAM（自动声音管理）。AAM（Automactic acoustics management）自动噪声管理，指通过调整硬盘盘片转速在安静和高性能之间切换；APM（Advanced power management）高级电源管理，即调节硬盘的睡眠状态，有利于节省移动设备的电能。&lt;/p&gt;
&lt;p&gt;所以，适当降低 AAM 有利于降低转速，实现噪声的控制，增大 APM 有利于杜绝硬盘进入睡眠，从而避免磁头频繁进出停泊区产生摩擦噪音。&lt;/p&gt;
&lt;p&gt;对于  APM/AAM 信息的获取，可以使用以下命令查看：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;hdparm &lt;span class=&#34;token parameter variable&#34;&gt;-B&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-M&lt;/span&gt; /dev/sdX&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果您的驱动器不支持 AAM，您将收到消息： &lt;code&gt;APM_level=not support&lt;/code&gt;  ；&lt;/p&gt;
&lt;p&gt;如果您的驱动器不支持 AAM，您将收到消息： &lt;code&gt;acoustic=not support&lt;/code&gt;  。&lt;/p&gt;
&lt;p&gt;然后根据实际情况，在 omv wed 的  &lt;code&gt;存储器&lt;/code&gt;  -&amp;gt;  &lt;code&gt;磁盘&lt;/code&gt;  -&amp;gt;  &lt;code&gt;编辑&lt;/code&gt;  中进行设置。&lt;/p&gt;
&lt;h2 id=&#34;权限管理&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#权限管理&#34;&gt;#&lt;/a&gt; 权限管理&lt;/h2&gt;
&lt;h3 id=&#34;共享权限&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#共享权限&#34;&gt;#&lt;/a&gt; 共享权限&lt;/h3&gt;
&lt;p&gt;FTP/SMB 服务共享权限 (OMV 系统) &amp;lt; 用户权限 (OMV 系统) &amp;lt; 文件夹 / 文件权限 &amp;lt; ACL 特殊权限&lt;/p&gt;
&lt;p&gt;eg：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;当 “共享文件夹 A” 权限缺少  &lt;code&gt;r&lt;/code&gt;  读权限时，即使” 用户权限” 设置了  &lt;code&gt;rw&lt;/code&gt;  读写也无法列出该文件夹里的内容。&lt;/li&gt;
&lt;li&gt;如果 “用户 B” 对 “共享文件夹 C” 设置了 “禁止读写”，即使该文件夹权限是  &lt;code&gt;rwx&lt;/code&gt;  读写执行，也无法打开 “共享文件夹 C” 。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;登录权限&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#登录权限&#34;&gt;#&lt;/a&gt; 登录权限&lt;/h3&gt;
&lt;p&gt;该权限主要是服务器管理处理，除了上面的禁用 ssh 上的 root 登录及私钥访问，还应禁用避免使用  &lt;code&gt;su&lt;/code&gt;  和  &lt;code&gt;sudo&lt;/code&gt;  切换到 root 用户。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;禁用  &lt;code&gt;su&lt;/code&gt;  命令：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;修改  &lt;code&gt;/etc/pam.d/su&lt;/code&gt;  配置&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/pam.d/su&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 去除以下注释&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;auth required pam_wheel.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改  &lt;code&gt;/etc/login.defs&lt;/code&gt;  配置&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/login.defs&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 找到 SU_WHEEL_ONLY 定义并改写成以下配置&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SU_WHEEL_ONLY &lt;span class=&#34;token function&#34;&gt;yes&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如此一来，只有指定加入  &lt;code&gt;wheel&lt;/code&gt;  group 的用户才能使用  &lt;code&gt;su&lt;/code&gt;  命令，同样也就禁用了  &lt;code&gt;su -&lt;/code&gt;  切换 root 了；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;禁用  &lt;code&gt;su -&lt;/code&gt;  命令：&lt;/p&gt;
&lt;p&gt;如果觉得禁用  &lt;code&gt;su&lt;/code&gt;  该操作覆盖范围太大了，可以通过  &lt;code&gt;visudo&lt;/code&gt;  命令修改  &lt;code&gt;/etc/sudoers&lt;/code&gt;  文件，对指定的用户或群组进行限制，eg：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;span&gt;sudoers&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# User privilege specification&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;admin   ALL=(ALL:ALL)     ALL, !/usr/bin/su -&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# Allow members of group sudo to execute any command&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;%wheel  ALL=(ALL:ALL)     ALL, !/usr/bin/su -&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;以上例子分别表示对  &lt;code&gt;admin&lt;/code&gt;  用户及  &lt;code&gt;wheel&lt;/code&gt;  群组做了  &lt;code&gt;su -&lt;/code&gt;  命令限制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;禁用  &lt;code&gt;sudo&lt;/code&gt;  升权：&lt;/p&gt;
&lt;p&gt;一般来说，除了安装系统的时候配置的用户拥有  &lt;code&gt;sudo&lt;/code&gt;  权限，后期创建用户时，除非明确加入  &lt;code&gt;sudo&lt;/code&gt;  组或改写  &lt;code&gt;/etc/sudoers&lt;/code&gt;  文件配置，否则是不支持  &lt;code&gt;sudo&lt;/code&gt;  命令操作的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;防止  &lt;code&gt;sudo su -&lt;/code&gt;  直接串权：&lt;/p&gt;
&lt;p&gt;虽说利用  &lt;code&gt;sudo&lt;/code&gt;  升权后，同样拥有 root 权限，但与实际登录 root 账户有所区别，毕竟使用  &lt;code&gt;sudo&lt;/code&gt;  是有操作记录的，而直接 root 登录后无法跟踪其操作。&lt;/p&gt;
&lt;p&gt;通过设置上面的 &amp;quot;&lt;strong&gt; 禁用  &lt;code&gt;su&lt;/code&gt;  命令&lt;/strong&gt; &amp;quot;或&amp;quot;&lt;strong&gt; 禁用  &lt;code&gt;su -&lt;/code&gt;  命令&lt;/strong&gt; &amp;quot; ，同样可以防止  &lt;code&gt;sudo su -&lt;/code&gt;  操作，但无法防止  &lt;code&gt;sudo -&lt;/code&gt;  后执行  &lt;code&gt;su -&lt;/code&gt;  切换到 root 环境，如果要禁掉该操作，可以简单粗暴的使用上面的 &amp;quot; 禁用  &lt;code&gt;sudo&lt;/code&gt;  升权 &amp;quot; 操作，或者通过修改  &lt;code&gt;vim /etc/pam.d/su&lt;/code&gt;  文件进行滤除操作。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;root 用户禁用：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（注意：在进行该操作前要至少确保有一个用户可以提权到 root 权限，以避免出现没有超级权限的可能。）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;除了在 omv web 的  &lt;code&gt;服务&lt;/code&gt;  -&amp;gt;  &lt;code&gt;SSH&lt;/code&gt;  中禁用 root 登录外，还可以在用户配置上禁用 root 账号，使其无法使用登录（包括本机终端登录）。通过执行以下命令：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 查看 root 帐号密码信息，第二个字符 P 表示有密码&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;passwd&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-S&lt;/span&gt; root&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;root P 01/22/2024 &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;99999&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;7&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 删除 root 密码&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;passwd&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-d&lt;/span&gt; root&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;passwd: password expiry information changed.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 确认删除密码，此时第二个字符为 NP 即 No Password&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;passwd&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-S&lt;/span&gt; root&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;root NP 01/22/2024 &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;99999&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;7&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 禁用锁定 root 帐号&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;passwd&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-l&lt;/span&gt; root&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;passwd: password expiry information changed.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 确认删除密码，此时第二个字符为 L 即 Lock&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;passwd&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-S&lt;/span&gt; root&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;root L 01/22/2024 &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;99999&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;7&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;note：&lt;/p&gt;
&lt;p&gt;关于查看  &lt;code&gt;sudo&lt;/code&gt;  执行操作信息，可通过  &lt;code&gt;cat /var/log/auth.log&lt;/code&gt;  命令查看，对于文件内大量出现  &lt;code&gt;pam_unix(cron:session): session opened for user root by (uid=0)&lt;/code&gt;  的解决办法，通过以下操作滤除信息：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/pam.d/common-session-noninteractive&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;找到下行：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;session required        pam_unix.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;在其上一行添加：&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption data-lang=&#34;text&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;session     [success=1 default=ignore] pam_succeed_if.so service in cron quiet use_uid&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;保存退出后，重启 crond 服务：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] #&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;cron&lt;/span&gt; restart&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYXp1cmVvbG9neS9wLzE1MTE0Njg2Lmh0bWw=&#34;&gt;auth.log 大量出现 pam_unix (cron:session): session opened for user root by (uid=0) 解决办法&lt;/span&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
