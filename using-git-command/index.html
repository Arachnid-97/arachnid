<!-- build time:Mon Sep 02 2024 22:22:14 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="命运转轮" href="https://arachnid.cc/rss.xml"><link rel="alternate" type="application/atom+xml" title="命运转轮" href="https://arachnid.cc/atom.xml"><link rel="alternate" type="application/json" title="命运转轮" href="https://arachnid.cc/feed.json"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="history,git"><link rel="canonical" href="https://arachnid.cc/using-git-command/"><title>git 应用速查 | Arachnid's blog = 命运转轮 = Life is ...the time you did something you're afraid of doing</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="loader-state"><svg viewBox="0 0 178 40" width="178" height="40"><path class="air" d="M 46 16.5 h -20 a 8 8 0 0 1 0 -16" fill="none" stroke="#E85725" stroke-width="1" stroke-linejoin="round" stroke-linecap="round"></path><g id="car"><svg viewBox="0 0 118 28.125" x="30" y="11.725" width="118" height="28.125"><defs><circle id="circle" cx="0" cy="0" r="1"></circle><g id="wheel"><use href="#circle" fill="#1E191A" transform="scale(10)"></use><use href="#circle" fill="#fff" transform="scale(5)"></use><path fill="#1E191A" stroke="#1E191A" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.2" stroke-dashoffset="0" d="M -3.5 0 a 4 4 0 0 1 7 0 a 3.5 3.5 0 0 0 -7 0"></path><use href="#circle" fill="#1E191A" transform="scale(1.5)"></use><path fill="none" stroke="#F9B35C" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="20 14 8 5" d="M 0 -7.5 a 7.5 7.5 0 0 1 0 15 a 7.5 7.5 0 0 1 0 -15"></path><path fill="none" stroke="#fff" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" opacity="0.1" stroke-dashoffset="0" d="M -6.5 -6.25 a 10 10 0 0 1 13 0 a 9 9 0 0 0 -13 0"></path></g></defs><g transform="translate(51.5 11.125)"><path stroke-width="2" stroke="#1E191A" fill="#EF3F33" d="M 0 0 v -2 a 4.5 4.5 0 0 1 9 0 v 2"></path><rect fill="#1E191A" x="3.25" y="-3" width="5" height="3"></rect></g><g transform="translate(10 24.125)"><g transform="translate(59 0)"><path id="shadow" opacity="0.7" fill="#1E191A" d="M -64 0 l -4 4 h 9 l 8 -1.5 h 100 l -3.5 -2.5"></path></g><path fill="#fff" stroke="#1E191A" stroke-width="2.25" stroke-linecap="round" stroke-linejoin="round" d="M 0 0 v -10 l 35 -13 v 5 l 4 0.5 l 0.5 4.5 h 35.5 l 30 13"></path><g fill="#fff" stroke="#1E191A" stroke-width="2.25" stroke-linecap="round" stroke-linejoin="round"><path d="M -6 0 v -22 h 10 z"></path><path d="M 105 0 h -3 l -12 -5.2 v 6.2 h 12"></path></g><g fill="#949699" opacity="0.7"><rect x="16" y="-6" width="55" height="6"></rect><path d="M 24 -14 l 13 -1.85 v 1.85"></path></g><g fill="none" stroke="#1E191A" stroke-width="2.25" stroke-linecap="round" stroke-linejoin="round"><path stroke-dasharray="30 7 42" d="M 90 0 h -78"></path><path d="M 39.5 -13 h -15"></path></g><path fill="#fff" stroke="#1E191A" stroke-width="2.25" stroke-linejoin="round" d="M 48.125 -6 h -29 v 6 h 29"></path><rect x="48" y="-7.125" width="6.125" height="7.125" fill="#1E191A"></rect><g fill="#1E191A"><rect x="60" y="-15" width="1" height="6"></rect><rect x="56.5" y="-17.5" width="6" height="2.5"></rect></g></g><g class="wheels" transform="translate(0 18.125)"><g transform="translate(10 0)"><use href="#wheel"></use></g><g transform="translate(87 0)"><use href="#wheel" stroke-dashoffset="-22"></use></g></g></svg></g><g fill="none" stroke-width="1" stroke-linejoin="round" stroke-linecap="round"><path class="air" stroke="#E85725" d="M 177.5 34 h -10 q -16 0 -32 -8"></path><path class="air" stroke="#949699" d="M 167 28.5 c -18 -2 -22 -8 -37 -10.75"></path><path class="air" stroke="#949699" d="M 153 20 q -4 -1.7 -8 -3"></path><path class="air" stroke="#E85725" d="M 117 16.85 c -12 0 -12 16 -24 16 h -8"></path><path class="air" stroke="#949699" d="M 65 12 q -5 3 -12 3.8"></path><path class="air" stroke="#949699" stroke-dasharray="9 10" d="M 30 13.5 h -2.5 q -5 0 -5 -5"></path><path class="air" stroke="#949699" d="M 31 33 h -10"></path><path class="air" stroke="#949699" d="M 29.5 23 h -12"></path><path class="air" stroke="#949699" d="M 13.5 23 h -6"></path><path class="air" stroke="#E85725" d="M 28 28 h -27.5"></path></g></svg></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline"><a href="/using-git-command" class="link external" itemprop="url">git 应用速查<i class="ic i-link-alt"></i></a></h1><div class="meta"><span class="item" title="创建时间：2020-03-19 21:48:04"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2020-03-19T21:48:04+08:00">2020-03-19</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>7.9k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>8 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Arachnid's blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://arachnid.cc/picture/(24).webp"></li><li class="item" data-background-image="https://arachnid.cc/picture/(17).webp"></li><li class="item" data-background-image="https://arachnid.cc/picture/(11).webp"></li><li class="item" data-background-image="https://arachnid.cc/picture/(10).webp"></li><li class="item" data-background-image="https://arachnid.cc/picture/(34).webp"></li><li class="item" data-background-image="https://arachnid.cc/picture/(30).webp"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="cn"><link itemprop="mainEntityOfPage" href="https://arachnid.cc/using-git-command/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.webp"><meta itemprop="name" content="夏沫の浅雨"><meta itemprop="description" content="Life is ...the time you did something you're afraid of doing, 不曾亏欠，不曾辜负，如此足矣"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="命运转轮"></span><div class="body md" itemprop="articleBody"><blockquote><p><strong>前言：git 用的好，删库不用跑，记一下踩过的坑</strong></p></blockquote><h1 id="vim-命令"><a class="anchor" href="#vim-命令">#</a> vim 命令</h1><h2 id="vim-插入模式命令"><a class="anchor" href="#vim-插入模式命令">#</a> vim 插入模式命令</h2><table><thead><tr><th><strong>命令</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>i</strong></td><td><strong>实现的是在光标之前的插入</strong></td></tr><tr><td><strong>I</strong></td><td><strong>大写的 i 实现在光标所在行的最前面插入</strong></td></tr><tr><td><strong>a</strong></td><td><strong>实现在光标后插入</strong></td></tr><tr><td><strong>A</strong></td><td><strong>实现在光标所在行的行尾插入</strong></td></tr><tr><td><strong>o</strong></td><td><strong>实现在光标所在行的上方插入新行</strong></td></tr><tr><td><strong>O</strong></td><td><strong>是现在光标坐在行的下方插入新行</strong></td></tr></tbody></table><h2 id="git-中-vim-的命令"><a class="anchor" href="#git-中-vim-的命令">#</a> git 中 vim 的命令</h2><table><thead><tr><th><strong>命令</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>:w</strong></td><td>保存编辑后的文件内容，但不退出 vim 编辑器。这个命令的作用是把内存缓冲区中的数据写到启动 vim 时指定的文件中。</td></tr><tr><td><strong>:w!</strong></td><td>强制写文件，即强制覆盖原有文件。如果原有文件的访问权限不允许写入文件，例如，原有的文件为只读文件，则可使用这个命令强制写入。但是，这种命令用法仅当用户是文件的属主时才适用，而超级用户则不受此限制。</td></tr><tr><td><strong>:wq</strong></td><td>保存文件内容后退出 vim 编辑器。这个命令的作用是把内存缓冲区中的数据写到启动 vim 时指定的文件中，然后退出 vim 编辑器。另外一种替代的方法是用 <code>ZZ</code> 命令。</td></tr><tr><td><strong>:wq!</strong></td><td>强制保存文件内容后退出 vim 编辑器。这个命令的作用是把内存缓冲区中的数据强制写到启动 vim 时指定的文件中，然后退出 vim 编辑器。</td></tr><tr><td><strong>ZZ</strong></td><td>使用 <code>ZZ</code> 命令时，如果文件已经做过编辑处理，则把内存缓冲区中的数据写到启动 vim 时指定的文件中，然后退出 vim 编辑器。否则只是退出 vim 而已。注意， <code>ZZ</code> 命令前面无需加冒号 <code>:</code> ，也无需按 Enter 键。</td></tr><tr><td><strong>:q</strong></td><td>在未做任何编辑处理而准备退出 vim 时，可以使用此命令。如果已做过编辑处理，则 vim 不允许用户使用 <code>:q</code> 命令退出，同时还会输出下列警告信息：No write since last change (:quit! overrides)。</td></tr><tr><td><strong>:q!</strong></td><td>强制退出 vim 编辑器，放弃编辑处理的结果。如果确实不需要保存修改后的文件内容，可输入 <code>:q!</code> 命令，强行退出 vim 编辑器。</td></tr><tr><td><strong>:w filename</strong></td><td>把编辑处理后的结果写到指定的文件中保存。</td></tr><tr><td><strong>:w! filename</strong></td><td>把编辑处理后的结果强制保存到指定的文件中，如果文件已经存在，则覆盖现有的文件。</td></tr><tr><td><strong>:wq! filename</strong></td><td>把编辑处理后的结果强制保存到指定的文件中，如果文件已经存在，则覆盖现有文件，并退出 vim 编辑器。</td></tr></tbody></table><hr><h1 id="git-流程图"><a class="anchor" href="#git-流程图">#</a> git 流程图</h1><p><img data-src="/using-git-command/20200426223848910.png" alt="img"></p><p><img data-src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><hr><h1 id="git-添加文件"><a class="anchor" href="#git-添加文件">#</a> git 添加文件</h1><ul><li><code>git add -u</code></li></ul><p>添加已跟踪的被修改（modified）和被删除（deleted）文件，<strong>不包括新文件（new）</strong>（即：表示只添加暂存区已有的文件（包括删除操作），但不添加未跟踪的新增文件）。</p><ul><li><code>git add .</code></li></ul><p>添加未跟踪的新文件（new）和已跟踪的被修改（modified）文件，<strong>不包括被删除（deleted）文件</strong>（注意：只能够提交当前目录或者它后代目录下相应文件）。</p><ul><li><code>git add -A</code></li></ul><p>（ <code>git add --all</code> 的缩写） 添加所有变化；<strong>是上面两个功能的合集</strong>，可以提交未跟踪、修改和删除文件。</p><hr><h1 id="git-远程强制推送"><a class="anchor" href="#git-远程强制推送">#</a> git 远程强制推送</h1><ul><li><p><code>git push -f origin master</code></p><p>强制更新到 GitHub， <code>--force</code> 假如遇到冲突也让 git 强制执行</p></li></ul><hr><h1 id="git-删除当前分支下的所有历史版本与-log-并同步至-github"><a class="anchor" href="#git-删除当前分支下的所有历史版本与-log-并同步至-github">#</a> git 删除当前分支下的所有历史版本与 log 并同步至 GitHub</h1><ol><li><p>切换到 latest_branch 分支下：</p><p><code>git checkout --orphan latest_branch</code></p></li><li><p>添加所有文件：</p><p><code>git add –A</code></p></li><li><p>提交更改：</p><p><code>git commit -m '清除所有历史版本以减少仓库大小'</code></p></li><li><p>删除分支：</p><p><code>git branch -D master</code></p></li><li><p>将当前分支重命名：</p><p><code>git branch -m master</code></p></li><li><p>最后，强制更新存储库：</p><p><code>git push -f origin master</code></p></li></ol><hr><h1 id="git-出现-fatal-refusing-to-merge-unrelated-histories"><a class="anchor" href="#git-出现-fatal-refusing-to-merge-unrelated-histories">#</a> git 出现 &quot;fatal: refusing to merge unrelated histories&quot;</h1><p><strong>背景</strong>：在本地初始化了一个 git 代码仓库，关联到 Github 上新建的仓库，第一次执行 <code>git pull origin master</code> 拉取远程分支时，出现标题上的问题（ Git 2.9 之后的版本才会出现此问题）。</p><p>需要添加 <code>--allow-unrelated-histories</code> 告诉 git 允许不相关历史合并，即写成 <code>git pull origin master --allow-unrelated-histories</code> 。</p><hr><h1 id="git-撤销-commit"><a class="anchor" href="#git-撤销-commit">#</a> git 撤销 commit</h1><h2 id="方法一"><a class="anchor" href="#方法一">#</a> 方法一</h2><ol><li><p>找到你想要撤销的 commit id：</p><p><code>git log</code></p></li><li><p>撤销到当前 commit id 的位置：</p></li></ol><ul><li><p><code>--soft</code> ：不删除工作空间改动代码，撤销 commit，不撤销 <code>git add</code> 。</p><p><code>git reset --soft commit id</code></p></li></ul><p><strong>或者</strong></p><ul><li><p><code>--mixed</code> ：不删除工作空间改动代码，撤销 commit，并且撤销 <code>git add</code> 操作，这个为默认参数； <code>git reset --mixed HEAD^</code> 和 <code>git reset HEAD^</code> 效果是一样的。</p><p><code>git reset -- mixed commit id</code></p></li></ul><p><strong>亦或者</strong></p><ul><li><p><code>--hard</code> ：删除工作空间改动代码，撤销 commit，撤销 <code>git add</code> （即时光穿梭 - 版本回退）。</p><p><code>git reset --hard commit id</code></p></li></ul><h2 id="方法二"><a class="anchor" href="#方法二">#</a> 方法二</h2><p>如果你刚执行完 commit 后，想撤回 commit，可以直接：</p><p><code>git reset --soft HEAD^</code></p><p>这样就成功的撤销了你的 commit；注意，仅仅是撤回 commit 操作。</p><p><code>HEAD^</code> 的意思是上一个版本，也可以写成 <code>HEAD~1</code> ；如果你进行了 2 次 commit，想都撤回，可以使用 <code>HEAD~2</code> ，以此类推。</p><h2 id="方法三"><a class="anchor" href="#方法三">#</a> 方法三</h2><p>如果 commit 注释写错了，想改一下注释。</p><p><code>git commit --amend</code></p><p>此时会进入默认 vim 编辑器，修改注释完毕后保存就好了，当然你也可以直接：</p><p><code>git commit --amend –m '新命名'</code></p><hr><h1 id="git-重写历史"><a class="anchor" href="#git-重写历史">#</a> git 重写历史</h1><p>1、修改多个提交信息，可以通过给 <code>git rebase</code> 增加 <code>-i</code> 选项来交互式地运行变基。 必须指定想要重写多久远的历史，这可以通过告诉命令将要变基到的提交来做到。</p><p>例如，如果想要修改最近三次提交信息，或者那组提交中的任意一个提交信息， 将想要修改的最近一次提交的父提交作为参数传递给 <code>git rebase -i</code> 命令，例如你想修改倒数第三次的历史，即 <code>HEAD~2^</code> 或 <code>HEAD~3</code> （两者是一样的），亦或者通过 commit id 来操作。 记住 <code>~3</code> 可能比较容易，因为你正尝试修改最后三次提交，但是注意实际上指定了以前的四次提交；那么我们只需要修改提交的父提交：</p><p><code>git rebase -i HEAD~3</code></p><p>再次记住这是一个变基命令 —— 在 <code>HEAD~3 … HEAD</code> 范围内的每一个修改了提交信息的提交及其 <strong>所有后裔</strong> 都会被重写。 不要涉及任何已经推送到中央服务器的提交 —— 这样做会产生一次变更的两个版本，因而使他人困惑。</p><p>2、在文本编辑器上找到想要修改的历史信息，修改 pick 为 edit；需要重点注意的是相对于正常使用的 <code>log</code> 命令，这些提交显示的顺序是相反的。</p><p>3、当保存并退出编辑器时，git 将你带回到列表中的最后一次提交，然后输入 <code>git commit –amend</code> ，接着修改提交信息，然后退出编辑器；最后，运行 <code>git rebase --continue</code> ，这个命令将会自动地应用另外两个提交，然后就完成了。</p><hr><h1 id="git-rebase-后出现-masterrebase-i-nm"><a class="anchor" href="#git-rebase-后出现-masterrebase-i-nm">#</a> git rebase 后出现 (master|REBASE –i n/m)</h1><p>只需要： <code>git rebase --abort</code> ，放弃当前操作退出 rebase-merge 目录。</p><hr><h1 id="git-合并多次commit然后在保存时出现-error-cannot-squash-without-a-previous-commit"><a class="anchor" href="#git-合并多次commit然后在保存时出现-error-cannot-squash-without-a-previous-commit">#</a> git 合并多次 commit，然后在保存时出现 &quot;error: cannot'squash' without a previous commit&quot;</h1><p>注意不要合并先前提交过的东西，也就是已经提交远程分支的纪录。</p><hr><h1 id="git-rebase-报错error-cannot-rebase-you-have-unstaged-changes-error-please-commit-or-stash-them"><a class="anchor" href="#git-rebase-报错error-cannot-rebase-you-have-unstaged-changes-error-please-commit-or-stash-them">#</a> git rebase 报错：error: cannot rebase: You have unstaged changes. error: Please commit or stash them.</h1><p>有两种方法：</p><ul><li>一种是使用 commit 把未暂存的文件进行一次提交，但我们并不想增加一个脏的提交，虽然说可以进行 commit 合并，可这不是自找麻烦吗，那么你可以考虑第二种；</li><li>第二种就是使用 <code>git stash</code> （git 储藏）， <code>git stash</code> 会把所有未提交的修改（包括暂存的和非暂存的）都保存起来，用于后续恢复当前工作目录；使用该命令后会推送一个新的储藏，当前的工作目录就干净了，这样就可以接着使用 <code>git rebase</code> 了；需要说明一点， <code>stash</code> 是本地的，不会通过 <code>git push</code> 命令上传到 <code>git server</code> 上；然后想重新应用缓存的 <code>stash</code> ，可以通过 <code>git stash pop</code> 命令恢复之前缓存的工作目录。</li></ul><hr><h1 id="git-stash"><a class="anchor" href="#git-stash">#</a> git stash</h1><h2 id="常用操作"><a class="anchor" href="#常用操作">#</a> 常用操作</h2><ul><li><p><code>git stash save 'save message'</code></p><p>执行存储时，添加备注，方便查找，使用 <code>git stash</code> 可以，但查找时不方便识别。</p></li><li><p><code>git stash list</code></p><p>查看 <code>stash</code> 了哪些存储。</p></li><li><p><code>git stash show</code></p><p>显示做了哪些改动，默认 show 第一个存储，如果要显示其他存贮，后面加 <code>stash@&#123;$num&#125;</code> ，例如显示第二个： <code>git stash show stash@&#123;1&#125;</code> 。</p></li><li><p><code>git stash apply</code></p><p>应用某个存储，但不会把存储从存储列表中删除；默认使用第一个存储，即 <code>stash@&#123;0&#125;</code> ；如果要应用其它，则后面加 <code>stash@&#123;$num&#125;</code> ， 例如应用第二个： <code>git stash apply stash@&#123;1&#125;</code> 。</p></li><li><p><code>git stash pop</code></p><p>用于恢复之前缓存的工作目录文件，将暂存起来的文件对应修改应用到当前的工作目录下，同时将缓存堆栈中的对应 stash 删除；默认为第一个存储，即 <code>stash@&#123;0&#125;</code> ；如果要应用并删除其他 stash，则后面加 <code>stash@&#123;$num&#125;</code> ，例如应用并删除第二个： <code>git stash pop stash@&#123;1&#125;</code> 。</p></li><li><p><code>git stash drop stash@&#123;$num&#125;</code></p><p>丢弃 <code>stash@&#123;$num&#125;</code> 存储，从列表中删除这个存储 。</p></li><li><p><code>git stash clear</code></p><p>删除所有缓存的 stash。</p></li></ul><h2 id="暂存部分文件"><a class="anchor" href="#暂存部分文件">#</a> 暂存部分文件</h2><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> file1 file2 <span class="token comment"># 保留不想备份的文件至工作区</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> stash save <span class="token parameter variable">-k</span> <span class="token comment"># 暂存未 add 的更改文件</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">git</span> reset <span class="token comment"># 恢复工作区文件，至此，只有未 add 的更改文件被储藏</span></pre></td></tr></table></figure><hr><h1 id="git-基于当前工作区新开一个本地分支并把远程仓库的文件强制覆盖本地某一分支的文件"><a class="anchor" href="#git-基于当前工作区新开一个本地分支并把远程仓库的文件强制覆盖本地某一分支的文件">#</a> git 基于当前工作区新开一个本地分支，并把远程仓库的文件强制覆盖本地某一分支的文件</h1><p>有时候我们在 master 分支上 commit 了多次，但是后面觉得这些东西应该另外开一个分支 dev 存储比较好，并且想保留之前已经 push 上远程仓库的代码，那么需要以下操作：</p><ol><li><p>先把当前的所有文件放到暂存区里面：</p><p><code>git add –A</code></p></li><li><p>新建一个分支 dev，并切换到该分支：</p><p><code>git checkout -b dev</code></p></li><li><p>把所有未提交的修改（包括暂存的和非暂存的）都保存起来：</p><p><code>git stash</code></p></li><li><p>切换回去 master 分支：</p><p><code>git checkout master</code></p></li><li><p>从远程分支拉取代码，但是不同步合并本地分支：</p><p><code>git fetch –all</code></p></li><li><p>设置本地的 master 与远程 master 的 commit 一致：</p><p><code>git reset --hard origin/master</code></p></li><li><p>回到我们工作的 dev 分支：</p><p><code>git checkout dev</code></p></li><li><p>恢复之前缓存的工作目录：</p><p><code>git stash pop</code></p></li></ol><hr><h1 id="git-删除远程分支后仍能在本地中看到该分支"><a class="anchor" href="#git-删除远程分支后仍能在本地中看到该分支">#</a> git 删除远程分支后，仍能在本地中看到该分支</h1><ol><li><p>使用 <code>git push origin --delete &lt;name&gt;</code> 删除远程分之后（ <code>&lt;name&gt;</code> 为要删除的分支名）。</p></li><li><p>执行 <code>git branch -a</code> 查看远程和本地所有分之，发现还会显示已删除分支。</p></li><li><p>执行 <code>git remote show origin</code> 查看远程库，可看到远程分支，本地分支相对应的关系。</p></li><li><p>执行 <code>git remote prune origin</code> 删除远程没有本地有的分支。</p></li></ol><hr><h1 id="git-指定版本"><a class="anchor" href="#git-指定版本">#</a> git 指定版本</h1><p>此时只需要三步走：</p><p>1、克隆代码： <code>git clone xxxx.git</code></p><p>2、进入项目目录： <code>cd &lt;项目文件夹名称&gt;</code></p><p>3、切换到指定版本： <code>git checkout &lt;commit SHA&gt;</code></p><p>注： <code>&lt;commit SHA&gt;</code> 可通过 <code>git log</code> 查看。</p><p>在 git submodule 中也可以指定子模块的版本，方法就是：</p><p>首先添加子模块，然后 cd 到子模块，checkout 到指定的版本，然后提交就可以了，跟上面的操作一样。</p><p>还有一种方法，使用 <code>git clone -b &lt;branch/label&gt; xxxx.git</code> 即可下载指定的分支 / 版本。</p><hr><h1 id="使用-gitignore-忽略-target-idea-文件夹等"><a class="anchor" href="#使用-gitignore-忽略-target-idea-文件夹等">#</a> 使用 .gitignore 忽略 target、.idea 文件夹等</h1><figure class="highlight txt"><figcaption data-lang="txt"></figcaption><table><tr><td data-num="1"></td><td><pre>#忽略所有.svn目录</pre></td></tr><tr><td data-num="2"></td><td><pre>.svn/</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>#忽略所有target目录</pre></td></tr><tr><td data-num="5"></td><td><pre>target/</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>#忽略所有.idea目录</pre></td></tr><tr><td data-num="8"></td><td><pre>.idea/</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>#忽略所有.iml文件</pre></td></tr><tr><td data-num="11"></td><td><pre>*.iml</pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">语法</th><th style="text-align:left">含义</th></tr></thead><tbody><tr><td style="text-align:left">/</td><td style="text-align:left">目录</td></tr><tr><td style="text-align:left">*</td><td style="text-align:left">多个字符</td></tr><tr><td style="text-align:left">?</td><td style="text-align:left">单个字符</td></tr><tr><td style="text-align:left">[]</td><td style="text-align:left">多个可选字符匹配单个字符</td></tr><tr><td style="text-align:left">!</td><td style="text-align:left">不忽略（跟踪）匹配到的文件或目录</td></tr></tbody></table><p>note： <code>.gitignore</code> 只能忽略那些 ** 原来没有被 track（之前没有 add 过）** 的文件，如果某些文件已经被纳入了版本管理中，则修改 <code>.gitignore</code> 是无效的。</p><p>要想解决，就是先把本地缓存删除（改变成未 track 状态），然后再提交（假设 target 文件已被添加）：</p><p><code>git rm -r --cached target</code></p><p>此时将不再追踪 target 这个文件了。</p><hr><h1 id="git-代理设置"><a class="anchor" href="#git-代理设置">#</a> git 代理设置</h1><h2 id="前提条件"><a class="anchor" href="#前提条件">#</a> 前提条件</h2><ul><li>首先你得一个可用的梯子（代理）</li><li>其次，确认你的梯子的代理端口号</li></ul><h2 id="设置-github上的-https-协议代理"><a class="anchor" href="#设置-github上的-https-协议代理">#</a> 设置 Github 上的 https 协议代理</h2><p>Git 代理有两种设置方式，分别是全局代理和只对 Github 代理，建议只对 Github 代理。</p><p>代理协议也有两种，分别是使用 <code>http</code> 代理和使用 <code>socks5</code> 代理，建议使用 <code>socks5</code> 代理。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#使用 socks5 代理（推荐）</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> https.https://github.com.proxy socks5://127.0.0.1:<span class="token punctuation">[</span>proxy_port<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 使用 http 代理（不推荐）</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> https.https://github.com.proxy http://127.0.0.1:<span class="token punctuation">[</span>proxy_port<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># note：其中 [proxy_port] 为你使用的代理端口号</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 查看配置</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--get</span> https.https://github.com.proxy</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># or</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">-e</span></pre></td></tr></table></figure><p>如果要取消 <code>https</code> 代理，注释掉配置或者输入以下命令：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> https.https://github.com.proxy</pre></td></tr></table></figure><h2 id="设置-github上的-ssh-协议代理"><a class="anchor" href="#设置-github上的-ssh-协议代理">#</a> 设置 Github 上的 ssh 协议代理</h2><p><code>https</code> 代理存在一个局限，那就是没有办法做身份验证，每次拉取私库或者推送代码时，都需要输入 Github 的账号和密码，非常痛苦。</p><p>在设置 <code>ssh</code> 代理前，请确保你已经设置 <code>ssh key</code> 。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 编辑或创建 `~/.ssh/config` 文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">vim</span> ~/.ssh/config</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 添加如下配置信息</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># github</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Host github.com</pre></td></tr><tr><td data-num="7"></td><td><pre>    HostName github.com</pre></td></tr><tr><td data-num="8"></td><td><pre>    PreferredAuthentications publickey</pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment"># [github_rsa] 为你的</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    IdentityFile ~/.ssh/<span class="token punctuation">[</span>github_rsa<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment"># 主要是下面这一行，其中 [proxy_port] 为你使用的代理端口号</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    ProxyCommand connect <span class="token parameter variable">-S</span> <span class="token number">127.0</span>.0.1:<span class="token punctuation">[</span>proxy_port<span class="token punctuation">]</span> %h %p</pre></td></tr><tr><td data-num="13"></td><td><pre>    </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># 测试配置</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com</pre></td></tr></table></figure><p>如果要取消 <code>ssh</code> 代理，注释掉配置或者删除文件即可。</p><h1 id="github-actions-workflow-使用"><a class="anchor" href="#github-actions-workflow-使用">#</a> github actions workflow 使用</h1><p>官方教程：<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vemgvYWN0aW9ucy9xdWlja3N0YXJ0">https://docs.github.com/zh/actions/quickstart</span></p><p>比较实用的：</p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21xeXFpbmdmZW5nL0Jsb2cvaXNzdWVzLzIzNw==">https://github.com/mqyqingfeng/Blog/issues/237</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9tcnNlYXdhdmUuZ2l0aHViLmlvL2Jsb2dzL2FydGljbGVzLzIwMjEvMTIvMTcvZ2l0aHViLWFjdGlvbnMtbWFudWFsLXRyaWdnZXIv">https://mrseawave.github.io/blogs/articles/2021/12/17/github-actions-manual-trigger/</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmhzem9mZmljaWFsLnNpdGUvaW50cm9kdWNlLzIwMjAvMTEvMzAvJUU0JUJEJUJGJUU3JTk0JUE4R2l0aHViQWN0aW9ucyVFOCU4NyVBQSVFNSU4QSVBOCVFNSU4QyU5NiVFNSVCNyVBNSVFNCVCRCU5QyVFNiVCNSU4MS8=">https://blog.hszofficial.site/introduce/2020/11/30 / 使用 GithubActions 自动化工作流 /</span></p><h1 id="git-子模块"><a class="anchor" href="#git-子模块">#</a> git 子模块</h1><p>其命令为： <code>git submodule add &lt;remote repo url&gt; &lt;local repo url&gt;</code></p><ul><li><code>remote repo url</code> 指远程仓库的 url。</li><li><code>local repo url</code> 指本地仓库的路径 url。</li></ul><p>eg：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>// 在主库中添加 ModuleA</pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> submodule <span class="token function">add</span> ./module-a.git ModuleA</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>// 在主库中添加 ModuleB</pre></td></tr><tr><td data-num="5"></td><td><pre>$ <span class="token function">git</span> submodule <span class="token function">add</span> ./module-b.git ModuleB</pre></td></tr></table></figure><p>在添加了子模块后，会有一个 <code>.gitmodules</code> 配置文件，它保存了远程仓库 url 与本地仓库 url 路径的映射：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>submodule <span class="token string">"ModuleA"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    path <span class="token operator">=</span> ModuleA</pre></td></tr><tr><td data-num="3"></td><td><pre>    url <span class="token operator">=</span> ./module-a.git</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>submodule <span class="token string">"ModuleB"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    path <span class="token operator">=</span> ModuleB</pre></td></tr><tr><td data-num="6"></td><td><pre>    url <span class="token operator">=</span> ./module-b.git</pre></td></tr></table></figure><p>每条记录对应一个子模块信息，path 和 url 对应远程仓库 url 和本地仓库路径。</p><h1 id="git-分支合并提交-commit"><a class="anchor" href="#git-分支合并提交-commit">#</a> git 分支合并提交 commit</h1><p>一般来说，如果使用 <code>git merge</code> ，对于分支签出往前开发后合并（fast forward merge），是没有任何合并指示的，如下图右方；若使用 <code>--no-ff</code> 选项可确保一个 fast forward merge 不会发生，而是产生一个新的提交来记录该次合并请求，如下图左方。</p><p><img data-src="/using-git-command/FMD5h.png" alt="fast forward merge vs explicit merge"></p><p>论述：<span class="exturl" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTA2OTA2MS93aGF0LWVmZmVjdC1kb2VzLXRoZS1uby1mZi1mbGFnLWhhdmUtZm9yLWdpdC1tZXJnZQ==">https://stackoverflow.com/questions/9069061/what-effect-does-the-no-ff-flag-have-for-git-merge</span></p><p>还有一种合并是只对某次提交进行合并，可以使用 <code>git cherry-pick -e &lt;commit id&gt;</code> 。</p><h1 id="git-log-导出"><a class="anchor" href="#git-log-导出">#</a> git log 导出</h1><p>参考：<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL3poL3YyL0dpdC0lRTUlOUYlQkElRTclQTElODAtJUU2JTlGJUE1JUU3JTlDJThCJUU2JThGJTkwJUU0JUJBJUE0JUU1JThFJTg2JUU1JThGJUIy">Git 基础 - 查看提交历史</span></p><p>命令项：</p><ul><li><p>--pretty 格式化输出</p><p>常见选项：</p><table><thead><tr><th style="text-align:center">选项</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:center">%H</td><td>提交的完整哈希值</td></tr><tr><td style="text-align:center">%h</td><td>提交的简写哈希值</td></tr><tr><td style="text-align:center">%T</td><td>树的完整哈希值</td></tr><tr><td style="text-align:center">%t</td><td>树的简写哈希值</td></tr><tr><td style="text-align:center">%P</td><td>父提交的完整哈希值</td></tr><tr><td style="text-align:center">%p</td><td>父提交的简写哈希值</td></tr><tr><td style="text-align:center">%an</td><td>作者名字</td></tr><tr><td style="text-align:center">%ae</td><td>作者的电子邮件地址</td></tr><tr><td style="text-align:center">%ad</td><td>作者修订日期（可以用 --date = 选项 来定制格式）</td></tr><tr><td style="text-align:center">%ar</td><td>作者修订日期，按多久以前的方式相对时间显示</td></tr><tr><td style="text-align:center">%cn</td><td>提交者的名字</td></tr><tr><td style="text-align:center">%ce</td><td>提交者的电子邮件地址</td></tr><tr><td style="text-align:center">%cd</td><td>提交日期</td></tr><tr><td style="text-align:center">%cr</td><td>提交日期（距今多长时间）</td></tr><tr><td style="text-align:center">%s</td><td>提交说明</td></tr></tbody></table></li><li><p>--no-merges 不显示合并的提交</p></li></ul><p>eg： <code>git log --no-merges --pretty=format:&quot;%ai: %s&quot; HEAD &gt; CHANGELOG.txt</code></p><h2 id="git-文件目录区分大小写"><a class="anchor" href="#git-文件目录区分大小写">#</a> git 文件目录区分大小写</h2><p>在某些时候，如果仓库中已存在并监视了某个文件夹，然后你想把该文件夹更改一下大小转换，，而某个文件里的链接需要调用这个文件夹路径，同时你也一起更改了；当你提交到远程后，但你会发现，这样会导致修改文件夹大小写后，git 提交不生效，导致文件引用失效。</p><p>其实 git 在提交的文件的时候，默认是不区分大小写更改的，可以通过以下命令查看（正常应回应 true，意味着不区分大小写）：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config core.ignorecase</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token boolean">true</span></pre></td></tr></table></figure><p>然后，我们可以使用 <code>git config core.ignorecase false</code> 使其区分大小写，值得注意的是，该操作是对这项工程起作用，并非所有 git 操作，因此在使用该命令时，必须在想要修改的 git 工程里面操作。</p><h1 id="附"><a class="anchor" href="#附">#</a> 附</h1><p><span class="exturl" data-url="aHR0cHM6Ly9sZWFybmdpdGJyYW5jaGluZy5qcy5vcmcvP2xvY2FsZT16aF9DTg==">Learn Git Branching</span></p><p><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTUvMTIvZ2l0LWNoZWF0LXNoZWV0Lmh0bWw=">常用 Git 命令清单</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvODk2MDQzNDg4MDI5NjAwIzA=">Git 教程</span></p><div class="tags"><a href="/tags/history/" rel="tag"><i class="ic i-tag"></i> history</a> <a href="/tags/git/" rel="tag"><i class="ic i-tag"></i> git</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-08-31 13:00:57" itemprop="dateModified" datetime="2024-08-31T13:00:57+08:00">2024-08-31</time></span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="using-git-command/" class="item leancloud_visitors" data-flag-title="git 应用速查" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span id="busuanzi_value_page_pv"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 投喂</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.webp" alt="夏沫の浅雨 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.webp" alt="夏沫の浅雨 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>夏沫の浅雨 <i class="ic i-at"><em>@</em></i>命运转轮</li><li class="link"><strong>本文链接：</strong> <a href="https://arachnid.cc/using-git-command/" title="git 应用速查">https://arachnid.cc/using-git-command/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/freertos-event/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;arachnid.cc&#x2F;picture&#x2F;(20).webp" title="FreeRTOS 篇章之事件位和事件组"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> FreeRTOS</span><h3>FreeRTOS 篇章之事件位和事件组</h3></a></div><div class="item right"><a href="/resistor/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;arachnid.cc&#x2F;picture&#x2F;(23).webp" title="三大无源器件之电阻"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>三大无源器件之电阻</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.</span> <span class="toc-text">vim 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vim-%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">vim 插入模式命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-%E4%B8%AD-vim-%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">git 中 vim 的命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">2.</span> <span class="toc-text">git 流程图</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">git 添加文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E8%BF%9C%E7%A8%8B%E5%BC%BA%E5%88%B6%E6%8E%A8%E9%80%81"><span class="toc-number">4.</span> <span class="toc-text">git 远程强制推送</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%88%A0%E9%99%A4%E5%BD%93%E5%89%8D%E5%88%86%E6%94%AF%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC%E4%B8%8E-log-%E5%B9%B6%E5%90%8C%E6%AD%A5%E8%87%B3-github"><span class="toc-number">5.</span> <span class="toc-text">git 删除当前分支下的所有历史版本与 log 并同步至 GitHub</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%87%BA%E7%8E%B0-fatal-refusing-to-merge-unrelated-histories"><span class="toc-number">6.</span> <span class="toc-text">git 出现 &quot;fatal: refusing to merge unrelated histories&quot;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E6%92%A4%E9%94%80-commit"><span class="toc-number">7.</span> <span class="toc-text">git 撤销 commit</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">7.1.</span> <span class="toc-text">方法一</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">7.2.</span> <span class="toc-text">方法二</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89"><span class="toc-number">7.3.</span> <span class="toc-text">方法三</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2"><span class="toc-number">8.</span> <span class="toc-text">git 重写历史</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-rebase-%E5%90%8E%E5%87%BA%E7%8E%B0-masterrebase-i-nm"><span class="toc-number">9.</span> <span class="toc-text">git rebase 后出现 (master|REBASE –i n&#x2F;m)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%90%88%E5%B9%B6%E5%A4%9A%E6%AC%A1commit%E7%84%B6%E5%90%8E%E5%9C%A8%E4%BF%9D%E5%AD%98%E6%97%B6%E5%87%BA%E7%8E%B0-error-cannot-squash-without-a-previous-commit"><span class="toc-number">10.</span> <span class="toc-text">git 合并多次 commit，然后在保存时出现 &quot;error: cannot&#39;squash&#39; without a previous commit&quot;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-rebase-%E6%8A%A5%E9%94%99error-cannot-rebase-you-have-unstaged-changes-error-please-commit-or-stash-them"><span class="toc-number">11.</span> <span class="toc-text">git rebase 报错：error: cannot rebase: You have unstaged changes. error: Please commit or stash them.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-stash"><span class="toc-number">12.</span> <span class="toc-text">git stash</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">12.1.</span> <span class="toc-text">常用操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9A%82%E5%AD%98%E9%83%A8%E5%88%86%E6%96%87%E4%BB%B6"><span class="toc-number">12.2.</span> <span class="toc-text">暂存部分文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%9F%BA%E4%BA%8E%E5%BD%93%E5%89%8D%E5%B7%A5%E4%BD%9C%E5%8C%BA%E6%96%B0%E5%BC%80%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E5%B9%B6%E6%8A%8A%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%96%87%E4%BB%B6%E5%BC%BA%E5%88%B6%E8%A6%86%E7%9B%96%E6%9C%AC%E5%9C%B0%E6%9F%90%E4%B8%80%E5%88%86%E6%94%AF%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">13.</span> <span class="toc-text">git 基于当前工作区新开一个本地分支，并把远程仓库的文件强制覆盖本地某一分支的文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%90%8E%E4%BB%8D%E8%83%BD%E5%9C%A8%E6%9C%AC%E5%9C%B0%E4%B8%AD%E7%9C%8B%E5%88%B0%E8%AF%A5%E5%88%86%E6%94%AF"><span class="toc-number">14.</span> <span class="toc-text">git 删除远程分支后，仍能在本地中看到该分支</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC"><span class="toc-number">15.</span> <span class="toc-text">git 指定版本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-gitignore-%E5%BF%BD%E7%95%A5-target-idea-%E6%96%87%E4%BB%B6%E5%A4%B9%E7%AD%89"><span class="toc-number">16.</span> <span class="toc-text">使用 .gitignore 忽略 target、.idea 文件夹等</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span class="toc-number">17.</span> <span class="toc-text">git 代理设置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6"><span class="toc-number">17.1.</span> <span class="toc-text">前提条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-github%E4%B8%8A%E7%9A%84-https-%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86"><span class="toc-number">17.2.</span> <span class="toc-text">设置 Github 上的 https 协议代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-github%E4%B8%8A%E7%9A%84-ssh-%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86"><span class="toc-number">17.3.</span> <span class="toc-text">设置 Github 上的 ssh 协议代理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#github-actions-workflow-%E4%BD%BF%E7%94%A8"><span class="toc-number">18.</span> <span class="toc-text">github actions workflow 使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-number">19.</span> <span class="toc-text">git 子模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E6%8F%90%E4%BA%A4-commit"><span class="toc-number">20.</span> <span class="toc-text">git 分支合并提交 commit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-log-%E5%AF%BC%E5%87%BA"><span class="toc-number">21.</span> <span class="toc-text">git log 导出</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#git-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-number">21.1.</span> <span class="toc-text">git 文件目录区分大小写</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84"><span class="toc-number">22.</span> <span class="toc-text">附</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="夏沫の浅雨" data-src="/images/avatar.webp"><p class="name" itemprop="name">夏沫の浅雨</p><div class="description" itemprop="description">不曾亏欠，不曾辜负，如此足矣</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">82</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">5</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">24</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FyYWNobmlkLTk3" title="https:&#x2F;&#x2F;github.com&#x2F;Arachnid-97"><i class="ic i-github"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMjM2MTA4MzU=" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;23610835"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友人帐</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-info-circle"></i>关于</a></li><li class="item"><a href="/atom.xml" rel="section"><i class="ic i-rss"></i>RSS</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/freertos-event/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/resistor/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/altium-designer-summary" title="Altium Designer 常用总结">Altium Designer 常用总结<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/RTOS/" title="分类于 FreeRTOS">FreeRTOS</a></div><span><a href="/freertos-queue" title="FreeRTOS 篇章之队列管理">FreeRTOS 篇章之队列管理<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/using-wireshark" title="wireshark 使用">wireshark 使用<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/vscode-config" title="vscode 常用配置">vscode 常用配置<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/linux-system-constitute" title="Linux 系统构成：bootloader、kernel、rootfs">Linux 系统构成：bootloader、kernel、rootfs<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/gcc-compiler-collection" title="GCC 编译器套件说明">GCC 编译器套件说明<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Hexo/" title="分类于 Hexo-shoka">Hexo-shoka</a></div><span><a href="/hexo-shoka-create" title="博客搭建笔记之 Hexo-shoka">博客搭建笔记之 Hexo-shoka<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/logical-level" title="常用逻辑电平标准总结">常用逻辑电平标准总结<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/altium-pcb-rule" title="(转)Altium PCB 基本规则的详解">(转)Altium PCB 基本规则的详解<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/linux-routing-table" title="Linux 路由表说明">Linux 路由表说明<i class="ic i-link-alt"></i></a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2022 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">夏沫の浅雨 @ Arachnid's blog</span></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="count"><span class="icon"><i class="ic i-person"></i> <span id="busuanzi_value_site_uv"></span>人 <span class="post-meta-divider">|</span> <span class="icon"><i class="ic i-eye"></i> <span id="busuanzi_value_site_pv"></span>次 <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">626k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">10:38</span></span></span></div><div class="create_time"><span class="icon"><i class="ic i-clock"></i> <span id="timeDate">正在加载</span> <span id="times">...</span><script>function createtime(){var n=new Date("04/28/2022 15:45:50");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML=" 本站存活 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}var now=new Date;setInterval("createtime()",250)</script></span></div><div class="powered-by">Powered-by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"using-git-command/",favicon:{show:"ψ(｀∇´)ψ 欢迎回来!",hide:"《原子弹入门及制造》"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,mermaid:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',isOutdated:!0,format_year_as_prefix:"{{year}}年",format_month_as_prefix:"{{month}}个月",format_month_as_suffix:"零{{month}}个月",format_day_as_prefix:"{{day}}天",format_day_as_suffix:"零{{day}}天",template:"<div class='note warning'><p><span class='label primary'><strong>文章时效性提示</strong></span><br>这是一篇发布于 <span class='pink'>{{publish}}</span> 前，最后一次更新距今已经 <span class='pink'>{{updated}}</span> 的文章，部分内容可能已经过时，请注意甄别。</p></div>",ignores:[function(a){return a.includes("#")},function(a){return new RegExp(LOCAL.path+"$").test(a)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="/js/combined-file.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->